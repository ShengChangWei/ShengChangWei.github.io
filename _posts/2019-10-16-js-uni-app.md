---
layout: post
title:  "使用uni-app从零到上线开发微信小程序"
date:   2019-10-16
excerpt: "使用uni-app从零到上线开发微信小程序"
javascript: true
tag:
- javascript
comments: true
---


# uni-app 开发微信小程序

## 前言

9月份，开始开发微信小程序，因为公司后期有开发app的需求，最终选择使用了uni-app，本文主要介绍如何使用uni-app搭建小程序项目，以及自己对框架的补充，包括封装request接口，引用color-ui,动态设置底部tab页等，详情见下文


## uni-app 介绍（官网）
`uni-app `是一个使用` Vue.js` 开发所有前端应用的框架，开发者编写一套代码，可发布到iOS、Android、H5、以及各种小程序（微信/支付宝/百度/头条/QQ/钉钉）等多个平台。

即使不跨端，uni-app同时也是更好的小程序开发框架。详见[评测](https://ask.dcloud.net.cn/article/35947)

好处如图：

![uni-app]({{ site.url }}/assets/img/js/uni-app.jpg)

我使用uni-app框架主要用来开发微信小程序，我使用过程中感觉的好处是：

* uni-app框架使用的开发工具 HBuilderX ，HBuilderX 内置相关环境，开箱即用，无需配置 nodejs， 需要什么插件可直接下载，测试、打包、发布特别方便。
* uni-app 采用Vue.js语法，基本支持vue大部分语法（vue的动态组件component不支持）。
* PC端使用vue封装的一些js方法，以及建构思想，可直接移植到uni-app中，比如：本人pc 项目中api接口js文件，可直接复制到小程序框架api文件夹中（PS：api文件夹维护后端请求路径）
* uni-app 周边生态丰富，[插件市场](https://ext.dcloud.net.cn)可用的组件特别多，也可使用vue语法自己封装一些组件。


## 开发工具（HBuilderX）

* HBuilderX: [官网IDE下载地址](https://www.dcloud.io/hbuilderx.html);
* HBuilderX是通用的前端开发工具，但为uni-app做了特别强化。
* HBuilderX提供了一些插件，可直接下载安装，具体如下图：
![uni-app]({{ site.url }}/assets/img/js/tools.jpg)

## 项目结构

首先我们通过`HBuilderx` > `文件` > `项目`，选择`uni-app`项目，模板我选择的是默认模板，当然你也可选择其他模板，接着确认创建，如果你选择的是默认模板，此时你的文件夹应该如下图：

![uni-app]({{ site.url }}/assets/img/js/ml.jpg)

接着我根据自己的项目需求，以及为了与`vue`的`pc`项目结构保持一下，分别添加如下文件夹

![uni-app]({{ site.url }}/assets/img/js/mls.jpg)

```shell
+-- api -- (页面接口路径)
|   +-- login.js
|   +-- tools.js
+-- colorui -- (color-ui 样式)
+-- common -- (通用的js方法)
+-- components -- (通用的组件)
+-- pages -- (主要页面)
+-- services -- (通用的服务)
|   +-- auth.service.js -- (主要封装了一些保存用户的token方法)
|   +-- config.service.js -- (存放全局通用的变量)
|   +-- request.service.js -- (封装了uni.request的方法)
+-- static -- (静态文件)
+-- unpackage -- (运行到小程序模拟器时生成的文件)
+-- App.vue
+-- main.js
+-- manifest.json
+-- pages.json
+-- uni.scss
```

* `api` 文件夹中存放的是各个页面的请求路径，引入`request.service.js`暴露出来的`api`， 
* `colorui` 使用了`color-ui`样式，个人认为样式非常好看，非常感谢，详情：[color-ui](https://github.com/weilanwl/ColorUI)
* `common` 存放全局通用的方法
* `components` 存放全局组件，包括`uni-ui`以及自己封装的组件
* `pages` 主要页面， 其中`pages`文件夹中 `index`文件中写底图的`tab`页面，通过`v-if`判断显示不同的tab页




