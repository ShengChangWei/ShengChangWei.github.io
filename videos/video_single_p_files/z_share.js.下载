/*
 * Compressed by JSA(www.xidea.org)
 */
var Prototype={Version:"1.5.0_rc0",ScriptFragment:"(?:<script.*?>)((\n|\r|.)*?)(?:</script>)",Browser:{IE:!!(window.attachEvent&&!window.opera),Opera:!!window.opera,WebKit:navigator.userAgent.indexOf("AppleWebKit/")>-1,Gecko:navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("KHTML")==-1,MobileSafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/)},emptyFunction:function(){},K:function(A){return A}},Class={create:function(B,A){if(arguments.length==1&&!Object.isFunction(B))A=B,B=null;var C=function(){if(!Class.extending)this.initialize.apply(this,arguments)};C.superclass=B;C.subclasses=[];if(Object.isFunction(B)){Class.extending=true;C.prototype=new B();B.subclasses.push(C);delete Class.extending}if(A)Class.extend(C,A);C.prototype.constructor=C;return C},extend:function(C,A){for(var B in A)Class.inherit(C,A,B);return C},inherit:function(I,A,C){var G=I.prototype,F=G[C],B=A[C];if(F&&Object.isFunction(B)&&B.argumentNames().first()=="$super"){var E=B,B=F.wrap(E);Object.extend(B,{valueOf:function(){return E},toString:function(){return E.toString()}})}G[C]=B;if(I.subclasses&&I.subclasses.length>0)for(var H=0,D;D=I.subclasses[H];H++){Class.extending=true;Object.extend(D.prototype,new I());D.prototype.constructor=D;delete Class.extending;Class.inherit(D,I.prototype,C)}},mixin:function(B,A){return Object.extend(B,A)}},Abstract=new Object();Object.extend=function(C,A){for(var B in A)C[B]=A[B];return C};Object.inspect=function(B){try{if(B==undefined)return"undefined";if(B==null)return"null";return B.inspect?B.inspect():B.toString()}catch(A){if(A instanceof RangeError)return"...";throw A}};Object.extend(Function.prototype,{argumentNames:function(){var A=this.toString().match(/^[\s\(]*function[^(]*\((.*?)\)/)[1].split(",").invoke("strip");return A.length==1&&!A[0]?[]:A},bind:function(){if(arguments.length<2&&arguments[0]===undefined)return this;var A=this,B=$A(arguments),C=B.shift();return function(){return A.apply(C,B.concat($A(arguments)))}},bindAsEventListener:function(){var A=this,B=$A(arguments),C=B.shift();return function(D){return A.apply(C,[D||window.event].concat(B))}},curry:function(){if(!arguments.length)return this;var A=this,B=$A(arguments);return function(){return A.apply(this,B.concat($A(arguments)))}},delay:function(){var A=this,B=$A(arguments),C=B.shift()*1000;return window.setTimeout(function(){return A.apply(A,B)},C)},wrap:function(B){var A=this;return function(){return B.apply(this,[A.bind(this)].concat($A(arguments)))}},isFunction:function(A){return typeof A=="function"},methodize:function(){if(this._methodized)return this._methodized;var A=this;return this._methodized=function(){return A.apply(null,[this].concat($A(arguments)))}}});Object.extend(Number.prototype,{toColorPart:function(){var A=this.toString(16);if(this<16)return"0"+A;return A},succ:function(){return this+1},times:function(A){$R(0,this,true).each(A);return this}});var Try={these:function(){var C;for(var D=0;D<arguments.length;D++){var A=arguments[D];try{C=A();break}catch(B){}}return C}},PeriodicalExecuter=Class.create();PeriodicalExecuter.prototype={initialize:function(A,B){this.callback=A;this.frequency=B;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){setInterval(this.onTimerEvent.bind(this),this.frequency*1000)},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.callback()}finally{this.currentlyExecuting=false}}}};Object.extend(String.prototype,{startsWith:function(A){return this.indexOf(A)===0},endsWith:function(B){var A=this.length-B.length;return A>=0&&this.lastIndexOf(B)===A},gsub:function(D,B){var A="",C=this,E;B=arguments.callee.prepareReplacement(B);while(C.length>0)if(E=C.match(D)){A+=C.slice(0,E.index);A+=(B(E)||"").toString();C=C.slice(E.index+E[0].length)}else A+=C,C="";return A},sub:function(C,A,B){A=this.gsub.prepareReplacement(A);B=B===undefined?1:B;return this.gsub(C,function(C){if(--B<0)return C[0];return A(C)})},scan:function(B,A){this.gsub(B,A);return this},truncate:function(B,A){B=B||30;A=A===undefined?"...":A;return this.length>B?this.slice(0,B-A.length)+A:this},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")},underscore:function(){return this.gsub(/::/,"/").gsub(/([A-Z]+)([A-Z][a-z])/,"#{1}_#{2}").gsub(/([a-z\d])([A-Z])/,"#{1}_#{2}").gsub(/-/,"_").toLowerCase()},dasherize:function(){return this.gsub(/_/,"-")},extractScripts:function(){var A=new RegExp(Prototype.ScriptFragment,"img"),B=new RegExp(Prototype.ScriptFragment,"im");return(this.match(A)||[]).map(function(A){return(A.match(B)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(script){return eval(script)})},escapeHTML:function(){var B=document.createElement("div"),A=document.createTextNode(this);B.appendChild(A);return B.innerHTML},unescapeHTML:function(){var A=document.createElement("div");A.innerHTML=this.stripTags();return A.childNodes[0]?A.childNodes[0].nodeValue:""},toQueryParams:function(){var A=this.match(/^\??(.*)$/)[1].split("&");return A.inject({},function(C,B){var A=B.split("=");C[decodeURIComponent(A[0])]=A[1];return C})},toArray:function(){return this.split("")},camelize:function(){var A=this.split("-");if(A.length==1)return A[0];var C=this.indexOf("-")==0?A[0].charAt(0).toUpperCase()+A[0].substring(1):A[0];for(var E=1,D=A.length;E<D;E++){var B=A[E];C+=B.charAt(0).toUpperCase()+B.substring(1)}return C},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},inspect:function(){return"'"+this.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"}});String.prototype.gsub.prepareReplacement=function(B){if(typeof B=="function")return B;var A=new Template(B);return function(B){return A.evaluate(B)}};String.prototype.parseQuery=String.prototype.toQueryParams;var Template=Class.create();Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;Template.prototype={initialize:function(A,B){this.template=A.toString();this.pattern=B||Template.Pattern},evaluate:function(A){return this.template.gsub(this.pattern,function(C){var B=C[1];if(B=="\\")return C[2];return B+(A[C[3]]||"").toString()})}};var $break=new Object(),$continue=new Object(),Enumerable={each:function(B){var A=0;try{this._each(function(D){try{B(D,A++)}catch(C){if(C!=$continue)throw C}})}catch(C){if(C!=$break)throw C}},all:function(B){var A=true;this.each(function(D,C){A=A&&!!(B||Prototype.K)(D,C);if(!A)throw $break});return A},any:function(B){var A=true;this.each(function(D,C){if(A=!!(B||Prototype.K)(D,C))throw $break});return A},collect:function(A){var B=[];this.each(function(D,C){B.push(A(D,C))});return B},detect:function(B){var A;this.each(function(D,C){if(B(D,C)){A=D;throw $break}});return A},findAll:function(A){var B=[];this.each(function(D,C){if(A(D,C))B.push(D)});return B},grep:function(C,A){var B=[];this.each(function(E,D){var F=E.toString();if(F.match(C))B.push((A||Prototype.K)(E,D))});return B},include:function(A){var B=false;this.each(function(C){if(C==A){B=true;throw $break}});return B},inject:function(B,A){this.each(function(D,C){B=A(B,D,C)});return B},invoke:function(B){var A=$A(arguments).slice(1);return this.collect(function(C){return C[B].apply(C,A)})},max:function(B){var A;this.each(function(D,C){D=(B||Prototype.K)(D,C);if(A==undefined||D>=A)A=D});return A},min:function(B){var A;this.each(function(D,C){D=(B||Prototype.K)(D,C);if(A==undefined||D<A)A=D});return A},partition:function(B){var A=[],C=[];this.each(function(E,D){((B||Prototype.K)(E,D)?A:C).push(E)});return[A,C]},pluck:function(B){var A=[];this.each(function(D,C){A.push(D[B])});return A},reject:function(A){var B=[];this.each(function(D,C){if(!A(D,C))B.push(D)});return B},sortBy:function(A){return this.collect(function(C,B){return{value:C,criteria:A(C,B)}}).sort(function(C,D){var B=C.criteria,A=D.criteria;return B<A?-1:B>A?1:0}).pluck("value")},toArray:function(){return this.collect(Prototype.K)},zip:function(){var A=Prototype.K,B=$A(arguments);if(typeof B.last()=="function")A=B.pop();var C=[this].concat(B).map($A);return this.map(function(D,B){return A(C.pluck(B))})},inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"}};Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray});function $A(C){if(!C)return[];if("toArray"in C)return C.toArray();var B=C.length||0,A=new Array(B);while(B--)A[B]=C[B];return A}Array.from=$A;Function.prototype.defer=Function.prototype.delay.curry(0.01);Object.extend(Array.prototype,Enumerable);if(!Array.prototype._reverse)Array.prototype._reverse=Array.prototype.reverse;Object.extend(Array.prototype,{_each:function(A){for(var B=0;B<this.length;B++)A(this[B])},clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(A){return A!=undefined||A!=null})},flatten:function(){return this.inject([],function(B,A){return B.concat(A&&A.constructor==Array?A.flatten():[A])})},without:function(){var A=$A(arguments);return this.select(function(B){return!A.include(B)})},indexOf:function(A){for(var B=0;B<this.length;B++)if(this[B]==A)return B;return-1},reverse:function(A){return(A!==false?this:this.toArray())._reverse()},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"}});var Hash={_each:function(A){for(var D in this){var C=this[D];if(typeof C=="function")continue;var B=[D,C];B.key=D;B.value=C;A(B)}},keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},merge:function(A){return $H(A).inject($H(this),function(B,A){B[A.key]=A.value;return B})},toQueryString:function(){return this.map(function(A){return A.map(encodeURIComponent).join("=")}).join("&")},inspect:function(){return"#<Hash:{"+this.map(function(A){return A.map(Object.inspect).join(": ")}).join(", ")+"}>"}};function $H(B){var A=Object.extend({},B||{});Object.extend(A,Enumerable);Object.extend(A,Hash);return A}ObjectRange=Class.create();Object.extend(ObjectRange.prototype,Enumerable);Object.extend(ObjectRange.prototype,{initialize:function(A,C,B){this.start=A;this.end=C;this.exclusive=B},_each:function(A){var B=this.start;do{A(B);B=B.succ()}while(this.include(B))},include:function(A){if(A<this.start)return false;if(this.exclusive)return A<this.end;return A<=this.end}});var $R=function(A,C,B){return new ObjectRange(A,C,B)},Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(A){this.responders._each(A)},register:function(A){if(!this.include(A))this.responders.push(A)},unregister:function(A){this.responders=this.responders.without(A)},dispatch:function(D,C,B,A){this.each(function(F){if(F[D]&&typeof F[D]=="function"){try{F[D].apply(F,[C,B,A])}catch(E){}}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=function(){};Ajax.Base.prototype={setOptions:function(A){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",parameters:""};Object.extend(this.options,A||{})},responseIsSuccess:function(){return this.transport.status==undefined||this.transport.status==0||(this.transport.status>=200&&this.transport.status<300)},responseIsFailure:function(){return!this.responseIsSuccess()}};Ajax.Request=Class.create();Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Request.prototype=Object.extend(new Ajax.Base(),{initialize:function(A,B){this.transport=Ajax.getTransport();this.setOptions(B);this.request(A)},request:function(D){var C=this.options.parameters||"";if(C.length>0)C+="&_=";try{this.url=D;if(this.options.method=="get"&&C.length>0)this.url+=(this.url.match(/\?/)?"&":"?")+C;Ajax.Responders.dispatch("onCreate",this,this.transport);this.transport.open(this.options.method,this.url,this.options.asynchronous);if(this.options.asynchronous){this.transport.onreadystatechange=this.onStateChange.bind(this);setTimeout((function(){this.respondToReadyState(1)}).bind(this),10)}this.setRequestHeaders();var A=this.options.postBody?this.options.postBody:C;this.transport.send(this.options.method=="post"?A:null)}catch(B){this.dispatchException(B)}},setRequestHeaders:function(){var A=["X-Requested-With","XMLHttpRequest","X-Prototype-Version",Prototype.Version,"Accept","text/javascript, text/html, application/xml, text/xml, */*"];if(this.options.method=="post"){A.push("Content-type",this.options.contentType);if(this.transport.overrideMimeType)A.push("Connection","close")}if(this.options.requestHeaders)A.push.apply(A,this.options.requestHeaders);for(var B=0;B<A.length;B+=2)this.transport.setRequestHeader(A[B],A[B+1])},onStateChange:function(){var A=this.transport.readyState;if(A!=1)this.respondToReadyState(this.transport.readyState)},header:function(B){try{return this.transport.getResponseHeader(B)}catch(A){}},evalJSON:function(){try{return eval("("+this.header("X-JSON")+")")}catch(e){}},evalResponse:function(){try{return eval(this.transport.responseText)}catch(e){this.dispatchException(e)}},respondToReadyState:function(E){var D=Ajax.Request.Events[E],C=this.transport,B=this.evalJSON();if(D=="Complete"){try{(this.options["on"+this.transport.status]||this.options["on"+(this.responseIsSuccess()?"Success":"Failure")]||Prototype.emptyFunction)(C,B)}catch(A){this.dispatchException(A)}if((this.header("Content-type")||"").match(/^text\/javascript/i))this.evalResponse()}try{(this.options["on"+D]||Prototype.emptyFunction)(C,B);Ajax.Responders.dispatch("on"+D,this,C,B)}catch(A){this.dispatchException(A)}if(D=="Complete")this.transport.onreadystatechange=Prototype.emptyFunction},dispatchException:function(A){(this.options.onException||Prototype.emptyFunction)(this,A);Ajax.Responders.dispatch("onException",this,A)}});Ajax.Updater=Class.create();Object.extend(Object.extend(Ajax.Updater.prototype,Ajax.Request.prototype),{initialize:function(B,C,D){this.containers={success:B.success?$(B.success):$(B),failure:B.failure?$(B.failure):(B.success?null:$(B))};this.transport=Ajax.getTransport();this.setOptions(D);var A=this.options.onComplete||Prototype.emptyFunction;this.options.onComplete=(function(B,C){this.updateContent();A(B,C)}).bind(this);this.request(C)},updateContent:function(){var B=this.responseIsSuccess()?this.containers.success:this.containers.failure,A=this.transport.responseText;if(!this.options.evalScripts)A=A.stripScripts();if(B)if(this.options.insertion)new this.options.insertion(B,A);else Element.update(B,A);if(this.responseIsSuccess())if(this.onComplete)setTimeout(this.onComplete.bind(this),10)}});function $w(A){A=A.strip();return A?A.split(/\s+/):[]}Ajax.PeriodicalUpdater=Class.create();Ajax.PeriodicalUpdater.prototype=Object.extend(new Ajax.Base(),{initialize:function(A,B,C){this.setOptions(C);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=(this.options.decay||1);this.updater={};this.container=A;this.url=B;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(A){if(this.options.decay){this.decay=(A.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=A.responseText}this.timer=setTimeout(this.onTimerEvent.bind(this),this.decay*this.frequency*1000)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});function $(){var B=[],A;for(var C=0;C<arguments.length;C++){A=arguments[C];if(typeof A=="string")A=document.getElementById(A);B.push(Element.extend(A))}return B.length<2?B[0]:B}var Element;if(!Element)Element=new Object();Element.extend=function(B){if(!B)return;if(_nativeExtensions)return B;if(!B._extended&&B.tagName&&B!=window){var A=Element.Methods,C=Element.extend.cache;for(property in A){var D=A[property];if(typeof D=="function")B[property]=C.findOrStore(D)}}B._extended=true;return B};Element.extend.cache={findOrStore:function(A){return this[A]=this[A]||function(){return A.apply(null,[this].concat($A(arguments)))}}};Element.Methods={visible:function(A){return $(A).style.display!="none"},immediateDescendants:function(A){if(!(A=$(A).firstChild))return[];while(A&&A.nodeType!=1)A=A.nextSibling;if(A)return[A].concat($(A).nextSiblings());return[]},nextSiblings:function(A){return $(A).recursivelyCollect("nextSibling")},recursivelyCollect:function(A,B){A=$(A);var C=[];while(A=A[B])if(A.nodeType==1)C.push(Element.extend(A));return C},getWidth:function(A){return $(A).getDimensions().width},toggle:function(){for(var B=0;B<arguments.length;B++){var A=$(arguments[B]);Element[Element.visible(A)?"hide":"show"](A)}},hide:function(){for(var B=0;B<arguments.length;B++){var A=$(arguments[B]);A.style.display="none"}},show:function(){for(var B=0;B<arguments.length;B++){var A=$(arguments[B]);A.style.display=""}},remove:function(A){A=$(A);A.parentNode.removeChild(A)},update:function(A,B){$(A).innerHTML=B.stripScripts();setTimeout(function(){new String(B).evalScripts()},10)},replace:function(A,C){A=$(A);if(A.outerHTML)A.outerHTML=C.stripScripts();else{var B=A.ownerDocument.createRange();B.selectNodeContents(A);A.parentNode.replaceChild(B.createContextualFragment(C.stripScripts()),A)}setTimeout(function(){new String(C).evalScripts()},10)},getHeight:function(A){A=$(A);return A.offsetHeight},classNames:function(A){return new Element.ClassNames(A)},hasClassName:function(A,B){if(!(A=$(A)))return;return Element.classNames(A).include(B)},addClassName:function(A,B){if(!(A=$(A)))return;return Element.classNames(A).add(B)},removeClassName:function(A,B){if(!(A=$(A)))return;return Element.classNames(A).remove(B)},cleanWhitespace:function(A){A=$(A);for(var C=0;C<A.childNodes.length;C++){var B=A.childNodes[C];if(B.nodeType==3&&!/\S/.test(B.nodeValue))Element.remove(B)}},empty:function(A){return $(A).innerHTML.match(/^\s*$/)},childOf:function(A,B){A=$(A),B=$(B);while(A=A.parentNode)if(A==B)return true;return false},scrollTo:function(A){A=$(A);var C=A.x?A.x:A.offsetLeft,B=A.y?A.y:A.offsetTop;window.scrollTo(C,B)},getStyle:function(A,B){A=$(A);var C=A.style[B.camelize()];if(!C)if(document.defaultView&&document.defaultView.getComputedStyle){var D=document.defaultView.getComputedStyle(A,null);C=D?D.getPropertyValue(B):null}else if(A.currentStyle)C=A.currentStyle[B.camelize()];if(window.opera&&["left","top","right","bottom"].include(B))if(Element.getStyle(A,"position")=="static")C="auto";return C=="auto"?null:C},setStyle:function(A,B){A=$(A);for(var C in B)A.style[C.camelize()]=B[C]},getDimensions:function(A){A=$(A);if(Element.getStyle(A,"display")!="none")return{width:A.offsetWidth,height:A.offsetHeight};var E=A.style,F=E.visibility,B=E.position;E.visibility="hidden";E.position="absolute";E.display="";var D=A.clientWidth,C=A.clientHeight;E.display="none";E.position=B;E.visibility=F;return{width:D,height:C}},makePositioned:function(A){A=$(A);var B=Element.getStyle(A,"position");if(B=="static"||!B){A._madePositioned=true;A.style.position="relative";if(window.opera){A.style.top=0;A.style.left=0}}},undoPositioned:function(A){A=$(A);if(A._madePositioned){A._madePositioned=undefined;A.style.position=A.style.top=A.style.left=A.style.bottom=A.style.right=""}},makeClipping:function(A){A=$(A);if(A._overflow)return;A._overflow=A.style.overflow;if((Element.getStyle(A,"overflow")||"visible")!="hidden")A.style.overflow="hidden"},undoClipping:function(A){A=$(A);if(A._overflow)return;A.style.overflow=A._overflow;A._overflow=undefined}};Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants});Object.extend(Element,Element.Methods);var _nativeExtensions=false;if(!HTMLElement&&/Konqueror|Safari|KHTML/.test(navigator.userAgent)){var HTMLElement={};HTMLElement.prototype=document.createElement("div").__proto__}Element.addMethods=function(A){Object.extend(Element.Methods,A||{});if(typeof HTMLElement!="undefined"){var A=Element.Methods,B=Element.extend.cache;for(property in A){var C=A[property];if(typeof C=="function")HTMLElement.prototype[property]=B.findOrStore(C)}_nativeExtensions=true}};Element.addMethods();var Toggle=new Object();Toggle.display=Element.toggle;Abstract.Insertion=function(A){this.adjacency=A};Abstract.Insertion.prototype={initialize:function(B,A){this.element=$(B);this.content=A.stripScripts();if(this.adjacency&&this.element.insertAdjacentHTML){try{this.element.insertAdjacentHTML(this.adjacency,this.content)}catch(C){var D=this.element.tagName.toLowerCase();if(D=="tbody"||D=="tr")this.insertContent(this.contentFromAnonymousTable());else throw C}}else{this.range=this.element.ownerDocument.createRange();if(this.initializeRange)this.initializeRange();this.insertContent([this.range.createContextualFragment(this.content)])}setTimeout(function(){A.evalScripts()},10)},contentFromAnonymousTable:function(){var A=document.createElement("div");A.innerHTML="<table><tbody>"+this.content+"</tbody></table>";return $A(A.childNodes[0].childNodes[0].childNodes)}};var Insertion=new Object();Insertion.Before=Class.create();Insertion.Before.prototype=Object.extend(new Abstract.Insertion("beforeBegin"),{initializeRange:function(){this.range.setStartBefore(this.element)},insertContent:function(A){A.each((function(A){this.element.parentNode.insertBefore(A,this.element)}).bind(this))}});Insertion.Top=Class.create();Insertion.Top.prototype=Object.extend(new Abstract.Insertion("afterBegin"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(true)},insertContent:function(A){A.reverse(false).each((function(A){this.element.insertBefore(A,this.element.firstChild)}).bind(this))}});Insertion.Bottom=Class.create();Insertion.Bottom.prototype=Object.extend(new Abstract.Insertion("beforeEnd"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(this.element)},insertContent:function(A){A.each((function(A){this.element.appendChild(A)}).bind(this))}});Insertion.After=Class.create();Insertion.After.prototype=Object.extend(new Abstract.Insertion("afterEnd"),{initializeRange:function(){this.range.setStartAfter(this.element)},insertContent:function(A){A.each((function(A){this.element.parentNode.insertBefore(A,this.element.nextSibling)}).bind(this))}});Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(A){this.element=$(A)},_each:function(A){this.element.className.split(/\s+/).select(function(A){return A.length>0})._each(A)},set:function(A){this.element.className=A},add:function(A){if(this.include(A))return;this.set(this.toArray().concat(A).join(" "))},remove:function(A){if(!this.include(A))return;this.set(this.select(function(B){return B!=A}).join(" "))},toString:function(){return this.toArray().join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);var Selector=Class.create();Selector.prototype={initialize:function(A){this.params={classNames:[]};this.expression=A.toString().strip();this.parseExpression();this.compileMatcher()},parseExpression:function(){function F(A){throw"Parse error in selector: "+A}if(this.expression=="")F("empty expression");var E=this.params,B=this.expression,D,A,G,C;while(D=B.match(/^(.*)\[([a-z0-9_:-]+?)(?:([~\|!]?=)(?:"([^"]*)"|([^\]\s]*)))?\]$/i)){E.attributes=E.attributes||[];E.attributes.push({name:D[2],operator:D[3],value:D[4]||D[5]||""});B=D[1]}if(B=="*")return this.params.wildcard=true;while(D=B.match(/^([^a-z0-9_-])?([a-z0-9_-]+)(.*)/i)){A=D[1],G=D[2],C=D[3];switch(A){case"#":E.id=G;break;case".":E.classNames.push(G);break;case"":case undefined:E.tagName=G.toUpperCase();break;default:F(B.inspect())}B=C}if(B.length>0)F(B.inspect())},buildMatchExpression:function(){var B=this.params,A=[],D;if(B.wildcard)A.push("true");if(D=B.id)A.push("element.id == "+D.inspect());if(D=B.tagName)A.push("element.tagName.toUpperCase() == "+D.inspect());if((D=B.classNames).length>0)for(var C=0;C<D.length;C++)A.push("Element.hasClassName(element, "+D[C].inspect()+")");if(D=B.attributes)D.each(function(C){var B="element.getAttribute("+C.name.inspect()+")",D=function(A){return B+" && "+B+".split("+A.inspect()+")"};switch(C.operator){case"=":A.push(B+" == "+C.value.inspect());break;case"~=":A.push(D(" ")+".include("+C.value.inspect()+")");break;case"|=":A.push(D("-")+".first().toUpperCase() == "+C.value.toUpperCase().inspect());break;case"!=":A.push(B+" != "+C.value.inspect());break;case"":case undefined:A.push(B+" != null");break;default:throw"Unknown operator "+C.operator+" in selector"}});return A.join(" && ")},compileMatcher:function(){this.match=new Function("element","if (!element.tagName) return false; return "+this.buildMatchExpression())},findElements:function(B){var A;if(A=$(this.params.id))if(this.match(A))if(!B||Element.childOf(A,B))return[A];B=(B||document).getElementsByTagName(this.params.tagName||"*");var C=[];for(var D=0;D<B.length;D++)if(this.match(A=B[D]))C.push(Element.extend(A));return C},toString:function(){return this.expression}};function $$(){return $A(arguments).map(function(A){return A.strip().split(/\s+/).inject([null],function(B,C){var A=new Selector(C);return B.map(A.findElements.bind(A)).flatten()})}).flatten()}var Field={clear:function(){for(var A=0;A<arguments.length;A++)$(arguments[A]).value=""},focus:function(A){$(A).focus()},present:function(){for(var A=0;A<arguments.length;A++)if($(arguments[A]).value=="")return false;return true},select:function(A){$(A).select()},activate:function(A){A=$(A);A.focus();if(A.select)A.select()}},Form={serialize:function(B){var D=Form.getElements($(B)),C=new Array();for(var E=0;E<D.length;E++){var A=Form.Element.serialize(D[E]);if(A)C.push(A)}return C.join("&")},getElements:function(A){A=$(A);var E=new Array();for(var C in Form.Element.Serializers){var B=A.getElementsByTagName(C);for(var D=0;D<B.length;D++)E.push(B[D])}return E},getInputs:function(E,A,F){E=$(E);var D=E.getElementsByTagName("input");if(!A&&!F)return D;var C=new Array();for(var G=0;G<D.length;G++){var B=D[G];if((A&&B.type!=A)||(F&&B.name!=F))continue;C.push(B)}return C},disable:function(B){var C=Form.getElements(B);for(var D=0;D<C.length;D++){var A=C[D];A.blur();A.disabled="true"}},enable:function(B){var C=Form.getElements(B);for(var D=0;D<C.length;D++){var A=C[D];A.disabled=""}},findFirstElement:function(A){return Form.getElements(A).find(function(A){return A.type!="hidden"&&!A.disabled&&["input","select","textarea"].include(A.tagName.toLowerCase())})},focusFirstElement:function(A){Field.activate(Form.findFirstElement(A))},reset:function(A){$(A).reset()}};Form.Element={serialize:function(A){A=$(A);if(A.disabled)return;var C=A.tagName.toLowerCase(),B=Form.Element.Serializers[C](A);if(B){var D=encodeURIComponent(B[0]);if(D.length==0)return;if(B[1].constructor!=Array)B[1]=[B[1]];return B[1].map(function(A){return D+"="+encodeURIComponent(A)}).join("&")}},getValue:function(A){A=$(A);var C=A.tagName.toLowerCase(),B=Form.Element.Serializers[C](A);if(B)return B[1]}};Form.Element.Serializers={input:function(A){switch(A.type.toLowerCase()){case"submit":case"hidden":case"password":case"text":return Form.Element.Serializers.textarea(A);case"checkbox":case"radio":return Form.Element.Serializers.inputSelector(A)}return false},inputSelector:function(A){if(A.checked)return[A.name,A.value]},textarea:function(A){return[A.name,A.value]},select:function(A){return Form.Element.Serializers[A.type=="select-one"?"selectOne":"selectMany"](A)},selectOne:function(A){var C="",D,B=A.selectedIndex;if(B>=0){D=A.options[B];C=D.value||D.text}return[A.name,C]},selectMany:function(A){var B=[];for(var D=0;D<A.length;D++){var C=A.options[D];if(C.selected)B.push(C.value||C.text)}return[A.name,B]}};var $F=Form.Element.getValue;Abstract.TimedObserver=function(){};Abstract.TimedObserver.prototype={initialize:function(A,C,B){this.frequency=C;this.element=$(A);this.callback=B;this.lastValue=this.getValue();this.registerCallback()},registerCallback:function(){setInterval(this.onTimerEvent.bind(this),this.frequency*1000)},onTimerEvent:function(){var A=this.getValue();if(this.lastValue!=A){this.callback(this.element,A);this.lastValue=A}}};Form.Element.Observer=Class.create();Form.Element.Observer.prototype=Object.extend(new Abstract.TimedObserver(),{getValue:function(){return Form.Element.getValue(this.element)}});Form.Observer=Class.create();Form.Observer.prototype=Object.extend(new Abstract.TimedObserver(),{getValue:function(){return Form.serialize(this.element)}});Abstract.EventObserver=function(){};Abstract.EventObserver.prototype={initialize:function(A,B){this.element=$(A);this.callback=B;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form")this.registerFormCallbacks();else this.registerCallback(this.element)},onElementEvent:function(){var A=this.getValue();if(this.lastValue!=A){this.callback(this.element,A);this.lastValue=A}},registerFormCallbacks:function(){var A=Form.getElements(this.element);for(var B=0;B<A.length;B++)this.registerCallback(A[B])},registerCallback:function(A){if(A.type)switch(A.type.toLowerCase()){case"checkbox":case"radio":Event.observe(A,"click",this.onElementEvent.bind(this));break;case"password":case"text":case"textarea":case"select-one":case"select-multiple":Event.observe(A,"change",this.onElementEvent.bind(this));break}}};Form.Element.EventObserver=Class.create();Form.Element.EventObserver.prototype=Object.extend(new Abstract.EventObserver(),{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create();Form.EventObserver.prototype=Object.extend(new Abstract.EventObserver(),{getValue:function(){return Form.serialize(this.element)}});var Event;if(!Event)Event=new Object();Object.extend(Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(A){return A.target||A.srcElement},isLeftClick:function(A){return(((A.which)&&(A.which==1))||((A.button)&&(A.button==1)))},pointerX:function(A){return A.pageX||(A.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))},pointerY:function(A){return A.pageY||(A.clientY+(document.documentElement.scrollTop||document.body.scrollTop))},stop:function(A){if(A.preventDefault){A.preventDefault();A.stopPropagation()}else{A.returnValue=false;A.cancelBubble=true}},findElement:function(B,C){var A=Event.element(B);while(A.parentNode&&(!A.tagName||(A.tagName.toUpperCase()!=C.toUpperCase())))A=A.parentNode;return A},observers:false,_observeAndCache:function(B,C,D,A){if(!this.observers)this.observers=[];if(B.addEventListener){this.observers.push([B,C,D,A]);B.addEventListener(C,D,A)}else if(B.attachEvent){this.observers.push([B,C,D,A]);B.attachEvent("on"+C,D)}},unloadCache:function(){if(!Event.observers)return;for(var A=0;A<Event.observers.length;A++){Event.stopObserving.apply(this,Event.observers[A]);Event.observers[A][0]=null}Event.observers=false},observe:function(B,C,D,A){var B=$(B);A=A||false;if(C=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||B.attachEvent))C="keydown";this._observeAndCache(B,C,D,A)},stopObserving:function(B,C,D,A){var B=$(B);A=A||false;if(C=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||B.detachEvent))C="keydown";if(B.removeEventListener)B.removeEventListener(C,D,A);else if(B.detachEvent)B.detachEvent("on"+C,D)}});if(navigator.appVersion.match(/\bMSIE\b/))Event.observe(window,"unload",Event.unloadCache,false);var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},realOffset:function(B){var A=0,C=0;do{A+=B.scrollTop||0;C+=B.scrollLeft||0;B=B.parentNode}while(B);return[C,A]},cumulativeOffset:function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;B=B.offsetParent}while(B);return[C,A]},positionedOffset:function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;B=B.offsetParent;if(B){p=Element.getStyle(B,"position");if(p=="relative"||p=="absolute")break}}while(B);return[C,A]},offsetParent:function(A){if(A.offsetParent)return A.offsetParent;if(A==document.body)return A;while((A=A.parentNode)&&A!=document.body)if(Element.getStyle(A,"position")!="static")return A;return document.body},within:function(A,C,B){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(A,C,B);this.xcomp=C;this.ycomp=B;this.offset=this.cumulativeOffset(A);return(B>=this.offset[1]&&B<this.offset[1]+A.offsetHeight&&C>=this.offset[0]&&C<this.offset[0]+A.offsetWidth)},withinIncludingScrolloffsets:function(A,D,C){var B=this.realOffset(A);this.xcomp=D+B[0]-this.deltaX;this.ycomp=C+B[1]-this.deltaY;this.offset=this.cumulativeOffset(A);return(this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+A.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+A.offsetWidth)},overlap:function(B,A){if(!B)return 0;if(B=="vertical")return((this.offset[1]+A.offsetHeight)-this.ycomp)/A.offsetHeight;if(B=="horizontal")return((this.offset[0]+A.offsetWidth)-this.xcomp)/A.offsetWidth},clone:function(A,C){A=$(A);C=$(C);C.style.position="absolute";var B=this.cumulativeOffset(A);C.style.top=B[1]+"px";C.style.left=B[0]+"px";C.style.width=A.offsetWidth+"px";C.style.height=A.offsetHeight+"px"},page:function(D){var A=0,C=0,B=D;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body)if(Element.getStyle(B,"position")=="absolute")break}while(B=B.offsetParent);B=D;do{A-=B.scrollTop||0;C-=B.scrollLeft||0}while(B=B.parentNode);return[C,A]},clone:function(A,D){var F=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},arguments[2]||{});A=$(A);var C=Position.page(A);D=$(D);var B=[0,0],E=null;if(Element.getStyle(D,"position")=="absolute"){E=Position.offsetParent(D);B=Position.page(E)}if(E==document.body){B[0]-=document.body.offsetLeft;B[1]-=document.body.offsetTop}if(F.setLeft)D.style.left=(C[0]-B[0]+F.offsetLeft)+"px";if(F.setTop)D.style.top=(C[1]-B[1]+F.offsetTop)+"px";if(F.setWidth)D.style.width=A.offsetWidth+"px";if(F.setHeight)D.style.height=A.offsetHeight+"px"},absolutize:function(A){A=$(A);if(A.style.position=="absolute")return;Position.prepare();var C=Position.positionedOffset(A),F=C[1],E=C[0],D=A.clientWidth,B=A.clientHeight;A._originalLeft=E-parseFloat(A.style.left||0);A._originalTop=F-parseFloat(A.style.top||0);A._originalWidth=A.style.width;A._originalHeight=A.style.height;A.style.position="absolute";A.style.top=F+"px";A.style.left=E+"px";A.style.width=D+"px";A.style.height=B+"px"},relativize:function(A){A=$(A);if(A.style.position=="relative")return;Position.prepare();A.style.position="relative";var C=parseFloat(A.style.top||0)-(A._originalTop||0),B=parseFloat(A.style.left||0)-(A._originalLeft||0);A.style.top=C+"px";A.style.left=B+"px";A.style.height=A._originalHeight;A.style.width=A._originalWidth}};if(/Konqueror|Safari|KHTML/.test(navigator.userAgent))Position.cumulativeOffset=function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body)if(Element.getStyle(B,"position")=="absolute")break;B=B.offsetParent}while(B);return[C,A]};var Windows;if(!Windows)Windows={maxZIndex:100000};var isIE=navigator.appVersion.match(/MSIE/)=="MSIE",WindowUtilities={getWindowScroll:function(){var w=window,T,L,W,H;with(w.document){if(w.document.documentElement&&documentElement.scrollTop){T=documentElement.scrollTop;L=documentElement.scrollLeft}else if(w.document.body){T=body.scrollTop;L=body.scrollLeft}if(w.innerWidth){W=w.innerWidth;H=w.innerHeight}else if(w.document.documentElement&&documentElement.clientWidth){W=documentElement.clientWidth;H=documentElement.clientHeight}else{W=body.offsetWidth;H=body.offsetHeight}}return{top:T,left:L,width:W,height:H}},getPageSize:function(){var F,A;if(window.innerHeight&&window.scrollMaxY){F=document.body.scrollWidth;A=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){F=document.body.scrollWidth;A=document.body.scrollHeight}else{F=document.body.offsetWidth;A=document.body.offsetHeight}var D,C;if(self.innerHeight){D=self.innerWidth;C=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){D=document.documentElement.clientWidth;C=document.documentElement.clientHeight}else if(document.body){D=document.body.clientWidth;C=document.body.clientHeight}var E,B;if(A<C)E=C;else E=A;if(F<D)B=D;else B=F;return{pageWidth:B,pageHeight:E,windowWidth:D,windowHeight:C}},disableScreen:function(E,D,G){WindowUtilities.initLightbox(D,E);var A=$(D).getAttribute("wxRefCount")||0;A=parseInt(A,10)+1;$(D).setAttribute("wxRefCount",A);var F=document.getElementsByTagName("body").item(0),B=$(D),C=WindowUtilities.getPageSize();if(G&&isIE){$$("select").each(function(A){A.style.visibility="hidden"});$$("#"+G+" select").each(function(A){A.style.visibility="visible"})}B.style.height=(C.pageHeight+"px");B.style.width=(C.windowWidth+"px");B.style.display="block"},enableScreen:function(A){A=A||"overlay_modal";var C=$(A);if(C){var B=C.getAttribute("wxRefCount")||0;B=parseInt(B,10)-1;if(B>0){C.setAttribute("wxRefCount",B);return}C.style.display="none";if(isIE)$$("select").each(function(A){A.style.visibility="visible"});C.parentNode.removeChild(C)}},initLightbox:function(A,C){if($(A))Element.setStyle(A,{zIndex:Windows.maxZIndex+10});else{var D=document.getElementsByTagName("body").item(0),B=document.createElement("div");B.setAttribute("id",A);B.className="overlay_"+C;B.style.display="none";B.style.position="absolute";B.style.top="0";B.style.left="0";B.style.zIndex=Windows.maxZIndex+10;B.style.width="100%";D.insertBefore(B,D.firstChild)}},setCookie:function(A,B){document.cookie=B[0]+"="+escape(A)+((B[1])?"; expires="+B[1].toGMTString():"")+((B[2])?"; path="+B[2]:"")+((B[3])?"; domain="+B[3]:"")+((B[4])?"; secure":"")},getCookie:function(C){var A=document.cookie,B=C+"=",E=A.indexOf("; "+B);if(E==-1){E=A.indexOf(B);if(E!=0)return null}else E+=2;var D=document.cookie.indexOf(";",E);if(D==-1)D=A.length;return unescape(A.substring(E+B.length,D))},_computeSize:function(B,A,E,C,F){if(F==null)F=5;var G=document.getElementsByTagName("body").item(0),D=document.createElement("div");D.setAttribute("id",A);if(C)D.style.height=C+"px";else D.style.width=E+"px";D.style.position="absolute";D.style.top="0";D.style.left="0";D.style.display="none";D.innerHTML=B;G.insertBefore(D,G.firstChild);var H;if(C)H=$(A).getDimensions().width+F;else H=$(A).getDimensions().height+F;G.removeChild(D);return H}};function window_disable(A){A=$(A);WindowUtilities.disableScreen("alert","overlay_modal",A?A.id:null)}function window_enable(){WindowUtilities.enableScreen("overlay_modal")}function center_element(B){B=$(B);window_disable(B);var A=Element.getDimensions(B),C=WindowUtilities.getWindowScroll(),D=WindowUtilities.getPageSize(),F=(D.windowHeight-(A.height))/2;F+=C.top;var E=(D.windowWidth-(A.width))/2;E+=C.left;Element.setStyle(B,{top:F+"px"});Element.setStyle(B,{left:E+"px"});Element.setStyle(B,{zIndex:(Windows.maxZIndex+20)});Element.show(B)}Element.Storage={UID:1};Element.getStorage=function(B){if(!(B=$(B)))return;var A;if(B===window)A=0;else{if(typeof B._prototypeUID==="undefined")B._prototypeUID=[Element.Storage.UID++];A=B._prototypeUID[0]}if(!Element.Storage[A])Element.Storage[A]={};return Element.Storage[A]};Element.addMethods({store:function(A,C,B){if(!(A=$(A)))return;Element.getStorage(A)[C]=B},retrieve:function(A,E,D){if(!(A=$(A)))return;var B=Element.getStorage(A),C=B[E];if(typeof C=="undefined"){B[E]=D;C=D}return C}});Element._getContentFromAnonymousElement=function(B,D){var C=document.createElement("div"),A=Element._insertionTranslations.tags[B];if(A){C.innerHTML=A[0]+D+A[1];A[2].times(function(){C=C.firstChild})}else C.innerHTML=D;return $A(C.childNodes)};Element._insertionTranslations={before:function(A,B){A.parentNode.insertBefore(B,A)},top:function(A,B){A.insertBefore(B,A.firstChild)},bottom:function(A,B){A.appendChild(B)},after:function(A,B){A.parentNode.insertBefore(B,A.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};function wx_get_rows_from_text(A){var B=document.createElement("div");B.innerHTML=js.str.trim(A);return $A(B.firstChild.tBodies[0].rows)}Function.prototype.forDefer=function(){var A=this;return function(){setTimeout(A,10)}};function $Tag(A,B){return($(B)||document.body).getElementsByTagName(A)}function $Next(C){C=$(C);var B=C.parentNode,F,D=B.childNodes.length,E=false;for(F=0;F<D;F++){var A=B.childNodes[F];if(A==C){E=true;continue}if(E&&A.nodeType==1)return A}}function check_allow_parent(A,B){if(!B)return true;if(!A.parentNode)return false;if(A.parentNode==B)return true;return check_allow_parent(A.parentNode,B)}function $Name(A,B){B=$(B);var C=document.getElementsByName(A);if(!B)return C;return $A(C).findAll(function(A){return check_allow_parent(A,B)})}function $Attr(C,D,B){if(!D)return[];var A=($(B)||document.body).getElementsByTagName("*");return $A(A).inject([],function(B,A){if(A.getAttribute(C)==D)B.push(Element.extend(A));return B})}function $Field(B,A){return $Attr("field",B,A).find(function(A){return A.tagName=="DIV"})}function $PTag(A,B){A=$(A);while(A.parentNode&&A.parentNode.tagName&&A.parentNode.tagName.toLowerCase()!=B.toLowerCase())A=A.parentNode;return A.parentNode}function $PClass(B,C){B=$(B);if(!B)return null;if(Element.hasClassName(B,C))return B;var A=document.body;while(B.parentNode&&B.parentNode!=A&&!Element.hasClassName(B.parentNode,C))B=B.parentNode;return B.parentNode}function $PName(A,B){A=$(A);while(A.parentNode&&A.parentNode.name!=B)A=A.parentNode;return A.parentNode}function $PAttr(A,B,C){A=$(A);while(A.parentNode&&A.parentNode.getAttribute(B)!=C){A=A.parentNode;if(A==document.body)return null}return A.parentNode}function $PDataTr(A){return $PAttr(A,"dataTr","true")}function $Form(A){return $PTag(A,"FORM")}Prototype.ScriptFragment="(?:<script.*?>)((\\n|.|\\r\\n)*?)(?:</script>)";Form.Element.Serializers.selectOne=function(A){var C="",D,B=A.selectedIndex;if(B>=0){D=A.options[B];C=D.value}return[A.name,C]};Form.Element.Serializers.selectMany=function(A){var B=[];for(var D=0;D<A.length;D++){var C=A.options[D];if(C.selected)B.push(C.value)}return[A.name,B]};Form.Element.Serializers.select=function(A){if(A.getAttribute("selectAll")=="true"){var C=new Array();for(var E=0;E<A.length;E++){var D=A.options[E],B=D.value;if(!B&&!("value"in D))B=D.text;C.push(B)}return[A.name,C]}return Form.Element.Serializers[A.type=="select-one"?"selectOne":"selectMany"](A)};String.prototype.escapeXML=function(){if(this==null)return null;var A=this;A=A.replace(/&/g,"&amp;");A=A.replace(/"/g,"&quot;");A=A.replace(/</g,"&lt;");A=A.replace(/>/g,"&gt;");A=A.replace(/'/g,"&#039;");return A};String.prototype.formatN=function(){var E,D=arguments.length;if(D<=0)return this;var C=this;for(E=0;E<D;E++){var A=arguments[E];if(typeof(A)=="undefined")A="undefined";var B=new RegExp("\\$"+E,"g");C=C.replace(B,A);B=new RegExp("\\{"+E+"\\}","g");C=C.replace(B,A)}return C};String.prototype.quote=function(){var A=this;A=A.gsub("\"","\\\"");return"\""+A+"\""};String.prototype.evalScripts=function(G){if(G){var E=new RegExp(Prototype.ScriptFragment,"img"),C=this.match(E),D=document.getElementsByTagName("head")[0];if(D)for(var I=0;C&&I<C.length;I++){var B=document.createElement("script");B.type="text/javascript";var H=C[I],A=H.match(/src=\"(.*)\"/ig);if(A){B.src=RegExp.$1;D.appendChild(B)}}}var C=this.extractScripts(),I,F=C.length;for(I=0;I<F;I++){if(C[I]&&C[I].indexOf("<script>")==0)C[I]=C[I].substring("<script>".length);if(window.execScript){if(C[I])window.execScript(C[I])}else window.eval(C[I])}};function merge_list(C,B){var A=[];C.each(function(B){if(!A.include(B))A.push(B)});B.each(function(B){if(!A.include(B))A.push(B)});return A}var WxUtils={wrapChildren:function(D,B,A,F){var E=F||"div",C=document.createElement(E);if(A)C.id=A;if(B)C.className=B;while(D.firstChild)C.appendChild(D.firstChild);D.appendChild(C);return C},newEl:function(D,B,A){var C=document.createElement(D);if(A)C.id=A;if(B)C.className=B;return C},offsetPos:function(B){B=$(B);var D=0,C=0,A=B;do{D+=A.offsetLeft||0;C+=A.offsetTop||0;A=A.offsetParent}while(A);A=B;do{D-=A.scrollLeft||0;C-=A.scrollTop||0;A=A.parentNode}while(A);return[D,C]},absolutePos:function(A){A=$(A);var D=offsetPos(A),C=D[0],B=D[1];C+=document.body.scrollLeft||0;B+=document.body.scrollTop||0;return[C,B]},nan2zero:function(A){if(typeof(A)=="string")A=parseInt(A);return isNaN(A)||typeof(A)=="undefined"?0:A},byCls:function(C,B){var A=new RegExp("(^|\\s)"+C+"(\\s|$)");if(!B)B=document.body;return _get_element_by_class(A,B)},aryByCls:function(D,C){var B=new RegExp("(^|\\s)"+D+"(\\s|$)"),A=[];if(!C)C=document.body;_get_ary_by_class(B,C,A);return A},insertAfter:function(A,B){if(!(A=$(A)))return false;if(!(B=$(B)))return false;return B.parentNode.insertBefore(A,B.nextSibling)},replaceChildren:function(A,B){this.removeChildren(A);while(B.firstChild)A.appendChild(B.firstChild)},removeChildren:function(A){if(!(A=$(A)))return false;while(A.firstChild)A.removeChild(A.firstChild);return A},prependChild:function(B,A){if(!(B=$(B)))return false;if(!(A=$(A)))return false;if(B.firstChild)B.insertBefore(A,B.firstChild);else B.appendChild(A);return B}};function _get_element_by_class(A,B){if(B.className&&B.className.match(A))return B;var E=B.childNodes,G,D=E.length;for(G=0;G<D;G++){var C=E[G],F=_get_element_by_class(A,C);if(F)return F}return null}function _get_ary_by_class(B,C,A){if(C.className&&C.className.match(B)){A.push(C);return}var F=C.childNodes,G,E=F.length;for(G=0;G<E;G++){var D=F[G];if(D.nodeType!=1)continue;_get_ary_by_class(B,D,A)}}var Wx=WxUtils,js;if(!js)js={};js.CSS=function(){var C=null,B=document,A=function(B){var A=function(B){var A=/(-[a-z])/i.exec(B);return B.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase())};while(B.indexOf("-")>-1)B=A(B);return B};return{createStyleSheet:function(C){var D;if(isIE){D=B.createStyleSheet();D.cssText=C}else{var E=B.getElementsByTagName("head")[0],F=B.createElement("style");F.setAttribute("type","text/css");try{F.appendChild(B.createTextNode(C))}catch(A){F.cssText=C}E.appendChild(F);D=F.styleSheet?F.styleSheet:(F.sheet||B.styleSheets[B.styleSheets.length-1])}this.cacheStyleSheet(D);return D},removeStyleSheet:function(A){var C=B.getElementById(A);if(C)C.parentNode.removeChild(C)},swapStyleSheet:function(A,D){this.removeStyleSheet(A);var C=B.createElement("link");C.setAttribute("rel","stylesheet");C.setAttribute("type","text/css");C.setAttribute("id",A);C.setAttribute("href",D);B.getElementsByTagName("head")[0].appendChild(C)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(B){if(!C)C={};try{var D=B.cssRules||B.rules;for(var E=D.length-1;E>=0;--E)C[D[E].selectorText]=D[E]}catch(A){}},getRules:function(A){if(C==null||A){C={};var F=B.styleSheets;for(var G=0,E=F.length;G<E;G++){try{this.cacheStyleSheet(F[G])}catch(D){}}}return C},getRule:function(B,A){var C=this.getRules(A);if(!(B instanceof Array))return C[B];for(var D=0;D<B.length;D++)if(C[B[D]])return C[B[D]];return null},updateRule:function(B,E,D){if(!(B instanceof Array)){var C=this.getRule(B);if(C){C.style[A(E)]=D;return true}}else for(var F=0;F<B.length;F++)if(this.updateRule(B[F],E,D))return true;return false},apply:function(D,A){if(!(A instanceof Array)){var E=this.getRule(A);if(E){var C=E.style;for(var F in C)if(typeof C[F]!="function")if(C[F]&&String(C[F]).indexOf(":")<0&&C[F]!="false"){try{D.style[F]=C[F]}catch(B){}}return true}}else for(var G=0;G<A.length;G++)if(this.apply(D,A[G]))return true;return false},applyFirst:function(C,B,A){var D=["#"+B+" "+A,A];return this.apply(C,D)},revert:function(C,A){if(!(A instanceof Array)){var D=this.getRule(A);if(D){for(key in D.style)if(D.style[key]&&String(D.style[key]).indexOf(":")<0&&D.style[key]!="false"){try{C.style[key]=""}catch(B){}}return true}}else for(var E=0;E<A.length;E++)if(this.revert(C,A[E]))return true;return false},revertFirst:function(C,B,A){var D=["#"+B+" "+A,A];return this.revert(C,D)}}}();js;if(!js)js={};var i18n_strings={"std.filter":"\u8fc7\u6ee4\u5668","vfs.local_file":"\u672c\u5730\u6587\u4ef6","std.list":"\u5217\u8868","std.confirm_recover_removed":"\u786e\u5b9a\u8981\u6062\u590d\u5df2\u5220\u9664\u7684\u8bb0\u5f55\u5417","vfs.share_out_path_name":".[\u5bf9\u5916\u5171\u4eab\u7684\u6587\u4ef6]","std.add_ok":"\u4fdd\u5b58\u6210\u529f","folder.rename":"\u91cd\u547d\u540d","folder.move_fail":"\u79fb\u52a8\u6587\u4ef6(\u76ee\u5f55)\u5931\u8d25","std.move_to":"\u79fb\u52a8\u5230","std.config_list_fields":"\u914d\u7f6e\u5217\u8868\u5b57\u6bb5","folder.address":"\u5730\u5740","std.update":"\u4fee\u6539","std.confirm_leave_page":"\u786e\u5b9a\u79bb\u5f00\u672c\u9875\u9762\u5417\uff1f","wf.kill_wf_ok":"\u6d41\u7a0b\u5df2\u4e2d\u6b62","std.clear_selected":"\u6e05\u7a7a\u6240\u9009","std.double_click_to_clear":"\u53cc\u51fb\u6e05\u7a7a\u9009\u62e9","std.remove":"\u5220\u9664","wf.view_instance":"\u67e5\u770b","ajax.hide_error":"\u9690\u85cf","wf.list_activity":"\u4efb\u52a1\u5217\u8868","std.add_fail":"\u4fdd\u5b58\u5931\u8d25","std.done_step":"\u5b8c\u6210","wf.my_task_done":"\u5df2\u5b8c\u6210\u4efb\u52a1","wf.group_task_checkout":"\u5df2\u68c0\u51fa\u7ec4\u4efb\u52a1","std.only_sub_record":"\u53ea\u5305\u542b\u672c\u7ea7\u8bb0\u5f55","std.new":"\u65b0\u5efa","std.save_and_close":"\u4fdd\u5b58\u5e76\u5173\u95ed","std.batch_update":"\u4fee\u6539","std.remove_row":"\u5220\u9664\u884c","wf.list_draft":"\u8349\u7a3f\u5217\u8868","std.should_giveup_update":"\u662f\u5426\u653e\u5f03\u4fee\u6539\u5185\u5bb9\uff1f","folder.move_or_rename_file":"\u79fb\u52a8( \u91cd\u547d\u540d ) \u6587\u4ef6","std.login_fail":"\u767b\u9646\u5931\u8d25","std.no_pref_query_id":"\u8bf7\u586b\u5199\u914d\u7f6e\u540d\u79f0","std.prev_step":"\u4e0a\u4e00\u6b65","std.move_up":"\u5411\u4e0a\u79fb\u52a8","stopping":"\u6b63\u5728\u505c\u6b62","folder.file_too_large":"\u6587\u4ef6\u8fc7\u5927","wf.return_group_work":"\u5f52\u8fd8\u7ec4\u5de5\u4f5c","std.last_page":"\u6700\u540e\u4e00\u9875","std.tree_table":"\u6811\u5f62\u5217\u8868","folder.overwrite_or_not":"\u6587\u4ef6\u5df2\u5b58\u5728\uff0c\u662f\u5426\u8986\u76d6","stopped":"\u5df2\u505c\u6b62","step.confirm_to_remove_children":"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u8282\u70b9\u7684\u6240\u6709\u5b50\u8282\u70b9\u5417","std.giveup_update":"\u662f\u5426\u653e\u5f03\u4fee\u6539","std.cancel_step":"\u53d6\u6d88","std.close":"\u5173\u95ed","std.no_selected":"\u8bf7\u9009\u62e9\u6761\u76ee","mail.forward":"\u8f6c\u53d1","std.select":"\u9009\u62e9","std.cancel":"\u53d6\u6d88","std.export_to_excel":"\u5bfc\u51faExcel","folder.new_dir":"\u65b0\u5efa\u76ee\u5f55","std.jump_to":"\u8df3\u8f6c\u5230","std.add_next":"\u65b0\u589e\u4e0b\u4e00\u4e2a","std.view_newly_add":"\u5bdf\u770b\u65b0\u589e\u8bb0\u5f55","std.submit":"\u63d0\u4ea4","folder.allow_exts":"\u5141\u8bb8\u7684\u540e\u7f00\u540d\u4e3a","std.sys_notification":"\u7cfb\u7edf\u63d0\u793a","std.missing_record":"\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u8bb0\u5f55\uff01","std.reset":"\u91cd\u7f6e","std.login_no_user_or_pass":"\u7528\u6237\u540d\u6216\u5bc6\u7801\u4e0d\u5b58\u5728","vfs.share_in_path_name":".[\u5916\u90e8\u5171\u4eab\u7684\u6587\u4ef6]","std.saving":"\u6b63\u5728\u4fdd\u5b58","std.validate":"\u6821\u9a8c","wf.reject":"\u9000\u56de","ajax.show_error":"\u663e\u793a","ajax.loading":"\u6b63\u5728\u88c5\u8f7d...","std.root_path":"\u6839\u76ee\u5f55","ajax.processing":"\u6b63\u5728\u5904\u7406...","std.std_table":"\u666e\u901a\u5217\u8868","wf.stop":"\u7ed3\u675f\u6d41\u7a0b","std.next_page":"\u4e0b\u4e00\u9875","step.remove_children":"\u5220\u9664\u5b50\u8282\u70b9","step.move_right":"\u53f3\u79fb","std.export":"\u5bfc\u51fa","wf.my_task":"\u6211\u7684\u4efb\u52a1","std.not_all_field_filled":"\u6ca1\u6709\u586b\u5199\u6240\u6709\u6761\u76ee","std.confirm_clear_selected":"\u786e\u5b9a\u8981\u6e05\u7a7a\u5f53\u524d\u9009\u62e9\u7684\u8bb0\u5f55\u5417?","rpt.xls_total_colspan_overflow":"\u8d85\u51faExcel\u6700\u5927\u5217\u5bbd","wf.check_out":"\u68c0\u51fa","std.batch_set":"\u6279\u91cf\u7ef4\u62a4","std.goback":"\u8fd4\u56de","std.cascade_include_record":"\u5305\u542b\u4e0b\u7ea7\u8bb0\u5f55","std.update_ok":"\u4fdd\u5b58\u6210\u529f","folder.no_selected_txt_file":"\u6ca1\u6709\u9009\u4e2d\u7684\u6587\u672c\u6587\u4ef6","wf.kill":"\u4e2d\u6b62\u6d41\u7a0b","std.clear":"\u6e05\u7a7a","std.op":"\u64cd\u4f5c","wf.add_draft":"\u8d77\u8349","std.go":"\u8df3\u8f6c","std.remove_ok":"\u5220\u9664\u6210\u529f","wf.confirm_reject":"\u786e\u8ba4\u9000\u56de\u5230\u4e0a\u4e00\u6b65\u5417\uff1f","std.confirm_remove":"\u786e\u8ba4\u5220\u9664\u5417","step.confirm_to_remove":"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u8282\u70b9\u5417","std.please_select_condition":"\u8bf7\u9009\u62e9\u67e5\u8be2\u6761\u4ef6","std.ok":"\u786e\u5b9a","std.add":"\u65b0\u5efa","std.saved_query":"\u5df2\u4fdd\u5b58\u7684\u67e5\u8be2","std.adv_search":"\u9ad8\u7ea7\u67e5\u8be2","std.open_in_top_win":"\u5728\u72ec\u7acb\u7a97\u53e3\u4e2d\u6253\u5f00","std.export_to_xls":"\u5bfc\u51fa\u5230Excel","std.edit_query":"\u7f16\u8f91\u67e5\u8be2\u6761\u4ef6","std.export_to_doc":"\u5bfc\u51fa\u5230Word","std.submit_ok":"\u63d0\u4ea4\u6210\u529f","folder.update_share_in":"\u641c\u7d22\u5916\u90e8\u5171\u4eab\u76ee\u5f55","std.save":"\u4fdd\u5b58","std.all":"\u5168\u90e8","std.seq":"\u5e8f\u53f7","step.remove":"\u5220\u9664\u672c\u8282\u70b9","std.query":"\u67e5\u8be2","std.export_to_gridstar":"\u5bfc\u51fa\u4e3a\u8868\u683c\u4e4b\u661f","std.please_select":"\u8bf7\u9009\u62e9","std.refresh":"\u5237\u65b0","folder.move":"\u79fb\u52a8","std.please_select_update_item":"\u8bf7\u9009\u62e9\u8981\u66f4\u65b0\u7684\u6761\u76ee","wf.check_in":"\u68c0\u5165","folder.remove_share_out":"\u53d6\u6d88\u5171\u4eab\u76ee\u5f55","ajax.no_error":"\u6ca1\u6709\u9519\u8bef\u4fe1\u606f","wf.change_state":"\u66f4\u6539\u72b6\u6001","std.first_page":"\u7b2c\u4e00\u9875","rpt.sum":"\u5408\u8ba1","std.validate_ok":"\u6821\u9a8c\u901a\u8fc7","folder.upload":"\u4e0a\u8f7d","std.update_fail":"\u4fdd\u5b58\u5931\u8d25","std.import":"\u5bfc\u5165","std.save_ok":"\u4fdd\u5b58\u6210\u529f","wf.list_instance":"\u6d41\u7a0b\u5217\u8868","std.hide":"\u9690\u85cf","folder.manage_share_out":"\u7ba1\u7406\u5171\u4eab\u76ee\u5f55","wf.fetch_group_work":"\u68c0\u51fa\u7ec4\u5de5\u4f5c","step.move_left":"\u5de6\u79fb","std.add_row":"\u589e\u52a0\u884c","step.add_next":"\u589e\u52a0\u5b50\u8282\u70b9","std.return":"\u8fd4\u56de","std.click_to_edit":"\u70b9\u51fb\u6587\u5b57\u8fdb\u884c\u7f16\u8f91","std.next_step":"\u4e0b\u4e00\u6b65","std.move_down":"\u5411\u4e0b\u79fb\u52a8","std.search":"\u67e5\u8be2","mail.reply":"\u56de\u590d","std.confirm":"\u786e\u5b9a","std.expand":"\u5c55\u5f00","std.prev_page":"\u524d\u4e00\u9875","std.edit":"\u7f16\u8f91","error":"\u51fa\u9519","wf.confirm_kill_wf":"\u786e\u5b9a\u4e2d\u6b62\u6b64\u5de5\u4f5c\u6d41\u5b9e\u4f8b\u5417\uff1f","std.move":"\u79fb\u52a8","std.show":"\u663e\u793a","std.remove_all":"\u5168\u90e8\u5220\u9664","mail.no_receiver":"\u6ca1\u6709\u6307\u5b9a\u63a5\u6536\u4eba","vfs.share_in_dept_path_name":".[\u90e8\u95e8\u5171\u4eab\u7684\u6587\u4ef6]","wf.group_task":"\u7ec4\u4efb\u52a1","std.export_to_pdf":"\u5bfc\u51fa\u5230PDF","std.save_and_query":"\u4fdd\u5b58\u5e76\u67e5\u8be2","std.show_selected":"\u67e5\u770b\u9009\u4e2d\u8bb0\u5f55","std.continue_add":"\u7ee7\u7eed\u6dfb\u52a0","folder.new_share_out":"\u65b0\u5efa\u5171\u4eab\u76ee\u5f55","std.too_many_rows":"\u884c\u6570\u8fc7\u591a","app.leave_msg":"\u60a8\u597d!\u6211\u73b0\u5728\u4e0d\u5728...","std.view":"\u67e5\u770b","std.send":"\u53d1\u9001","std.recover_removed":"\u6062\u590d\u5df2\u5220\u9664\u8bb0\u5f55","wf.start":"\u542f\u52a8\u6d41\u7a0b","std.undo":"\u56de\u9000","std.submit_fail":"\u63d0\u4ea4\u5931\u8d25","std.recover":"\u6062\u590d","std.no_data_change":"\u6ca1\u6709\u6570\u636e\u53d8\u5316","std.view_list":"\u89c6\u56fe","started":"\u5df2\u542f\u52a8","folder.edit":"\u7f16\u8f91","std.batch_add":"\u6279\u91cf\u6dfb\u52a0","std.redo":"\u91cd\u505a","app.title":"\u4fe1\u606f\u7ba1\u7406\u7cfb\u7edf","ending":"ending"};js.alert=function(B){var A=i18n_strings[B];if(!A)A=B;alert(A)};js.string=function(B){var A=i18n_strings[B];if(!A)A=B;return A};js.log=function(){if(window.console){var A="info",B=window.console[A];B.apply(window.console,arguments)}};if(typeof(js)=="undefined")js=function(){};js.str=function(){alert("str.js")};function _check_str(A){if(A==null)return;if(typeof(A)!="string")alert(A+" is not string")}js.str.removePtnId=function(A){if(!A)return A;return A.indexOf("/")<0?A:A.substring(A.indexOf("/")+1)};js.str.format=function(C){if(typeof(C)=="undefined")return"";_check_str(C);var E,D=arguments.length;if(D<=1)return C;var B=C;for(E=1;E<D;E++){var A=arguments[E];if(typeof(A)=="undefined")A="undefined";B=B.replace("$"+E,A)}return B};js.str.formatN=function(A,C){if(C<=0)return this;for(i=0;i<C.length;i++){var B=C[i];if(typeof(B)=="undefined")continue;var D=new RegExp("\\$"+i,"g");A=A.replace(D,B)}return A};js.str.hasChinese=function(A){for(var B=0;B<A.length;B++)if(A.charCodeAt(B)>255)return true;return false};js.str.calcByteLen=function(A){if(!A)return 0;var B=0;for(var C=0;C<A.length;C++)if(A.charCodeAt(C)>255)B=B+2;else B++;return B};js.str.isEmpty=function(A){A=js.str.trimLeft(A," ");A=js.str.trimRight(A," ");return(!A||(A==null)||(A.length==0))};js.str.isBlank=function(A){if(!A)return true;if(A==null)return true;var D=A.length,B=0;if(D==0)return true;for(var C=0;C<D;C++)if(A.charAt(C)==" ")B++;if(D==B)return true;else return false};js.str.trimLeft=function(A,B){if(!B)B=" \t\n\r\u3000";if(!A||A.length==0)return"";while(A.length!=0&&B.indexOf(A.charAt(0))!=-1)A=A.substr(1);return A};js.str.trimRight=function(A,B){if(!B)B=" \t\n\r\u3000";if(!A||A.length==0)return"";while(A.length!=0&&B.indexOf(A.charAt(A.length-1))!=-1)A=A.substr(0,A.length-1);return A};js.str.trim=function(A,B){A=js.str.trimLeft(A,B);A=js.str.trimRight(A,B);return A};js.str.hasSpecChar=function(B,A){if(!B)return false;_check_str(B);_check_str(A);var E=A;if(A=="S")E="'\"<>";else if(A=="L")E="~!@#$^&*+|`=\\{}:\";'<>?";var D=E.length;for(var F=0;F<D;F++){var C=E.charAt(F);if(B.indexOf(C)>=0)return true}return false};js.str.onlyContains=function(A,B){if(!A)return true;_check_str(A);_check_str(B);var D,C=A.length;for(D=0;D<C;D++)if(B.indexOf(A.charAt(D))<0)return false;return true};js.str.onlyCharAndDigit=function(A){return js.str.onlyContains(A,"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789")};js.str.doubleEscape=function(A,B){if(!A||!B)return A;for(var C=A.length-1;C>=0;--C)if(B.indexOf(A[C])!=-1)A=A.substring(0,C)+A.charAt(C)+A.substr(C);return A};js.str.doubleUnescape=function(C,D){if(!C||!D)return C;for(var E=0;E<D.length;++E){var B=""+D[E]+D[E];for(var A=C.indexOf(B);A!=-1;A=C.indexOf(B,A+1))C=C.substring(0,A)+C.substr(A+1)}return C};js.str.startsWith=function(B,A){if(!B||!A)return null;else return B.toString().substring(0,A.length)==A.toString()};js.str.endsWith=function(B,A){if(!B||!A)return null;else return B.toString().substr(B.length-A.toString().length)==A.toString()};js.str.getIntLen=function(A){if(!A)return 0;A=js.str.trimLeft(A);if(A.indexOf("-")==0)A=A.substr(1);var B=A.indexOf(".");if(B==-1)return A.length;else return B};js.str.isDigit=function(A){return((A>="0")&&(A<="9"))};js.str.onlyDigit=function(A){if(!A)return true;_check_str(A);var D,C=A.length;for(D=0;D<C;D++){var B=A.charAt(D);if(!js.str.isDigit(B))return false}return true};js.str.isFloat=function(A){if(!A||!(/^[+|-]?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(A)||/^[+|-]?\d+\.?\d*[E|e]{1}[+]?\d+$/.test(A)))return false;var B=parseFloat(A);return!isNaN(B)};js.str.isInt=function(A){if(!A)return false;var B=parseFloat(A);if(isNaN(B))return false;return Math.round(B)==B};js.str.transSpecNum=function(A){var B="";for(var C=0;C<A.length;C++)if(A.charAt(C)=="\uff10")B+="0";else if(A.charAt(C)=="\uff11")B+="1";else if(A.charAt(C)=="\uff12")B+="2";else if(A.charAt(C)=="\uff13")B+="3";else if(A.charAt(C)=="\uff14")B+="4";else if(A.charAt(C)=="\uff15")B+="5";else if(A.charAt(C)=="\uff16")B+="6";else if(A.charAt(C)=="\uff17")B+="7";else if(A.charAt(C)=="\uff18")B+="8";else if(A.charAt(C)=="\uff19")B+="9";else B+=A.charAt(C);return B};js.str.isEmail=function(B){if(!B)return false;var A=/\w\w*@\w\w*\.\w\w*/i;if(B.search(A)==-1)return false;else if(B.charAt(B.length-1)==".")return false;return true};js.str.isYear=function(B){if(js.str.isBlank(B))return false;if(!js.str.onlyDigit(B))return false;var A=parseInt(B,10);if(A>2500||A<1900)return false;return true};js.str.isDate=function(B){if(!B)return false;function C(A){return((A<30?"20":"19")+A)|0}var G,E,D,F;G=B.match(new RegExp("^((\\d{4})|(\\d{2}))([-./])(\\d{1,2})\\4(\\d{1,2})$"));if(G==null)return false;F=G[6];D=G[5]*1;E=(G[2].length==4)?G[2]:C(parseInt(G[3],10));if(!parseInt(D,10))return false;D=D==0?12:D;var H=new Date(E,D-1,F),A=(typeof(H)=="object"&&E==H.getFullYear()&&D==(H.getMonth()+1)&&F==H.getDate());return A};js.str.isLayerCode=function(A,C){if(!C)C=".";if(!A)return false;if(A.indexOf(C)==0)return false;if(A.indexOf(C+C)>=0)return false;var D,B=A.length;for(D=0;D<B;D++)if(!js.str.isDigit(A.charAt(D))&&A.charAt(D)!=C)return false;return true};js.str.parseToMap=function(A){var C=new Object(),G=A.split("\n");for(var F=0;F<G.length;F++){if(G[F].indexOf("=")<=0)continue;var B=G[F].split("=");if(B.length==1){C[js.str.trim(B[0])]=null;continue}if(B[0]!=""&&B.length==2){var E=C[js.str.trim(B[0])];if(E)E.push(js.str.trim(B[1]));else{var D=new Array();D.push(js.str.trim(B[1]));C[js.str.trim(B[0])]=D}}}return C};js.str.StringBuilder=function(A){this.length=0;this.append=function(A){this.length+=(this._parts[this._current++]=String(A)).length;this._string=null;return this};this.toString=function(){if(this._string!=null)return this._string;var A=this._parts.join("");this._parts=[A];this._current=1;this.length=A.length;return this._string=A};this._current=0;this._parts=[];this._string=null;if(A!=null)this.append(A)};if(typeof(js)=="undefined")js=function(){};js.num=function(){alert("num.js")};js.num.isLT=function(A,B){A=parseFloat(A);if(isNaN(A))return false;B=parseFloat(B);if(isNaN(B))return false;return A<B};js.num.isGT=function(A,B){A=parseFloat(A);if(isNaN(A))return false;B=parseFloat(B);if(isNaN(B))return false;return A>B};js.num.isLE=function(A,B){A=parseFloat(A);if(isNaN(A))return false;B=parseFloat(B);if(isNaN(B))return false;return A<=B};js.num.isGE=function(A,B){A=parseFloat(A);if(isNaN(A))return false;B=parseFloat(B);if(isNaN(B))return false;return A>=B};js.num.isNE=function(A,B){A=parseFloat(A);if(isNaN(A))return false;B=parseFloat(B);if(isNaN(B))return false;return A!=B};js.num.isEQ=function(A,B){A=parseFloat(A);if(isNaN(A))return false;B=parseFloat(B);if(isNaN(B))return false;return A==B};js.num.isIntLT=function(A,B){A=parseInt(A,10);if(isNaN(A))return false;B=parseInt(B,10);if(isNaN(B))return false;return A<B};js.num.isIntGT=function(A,B){A=parseInt(A,10);if(isNaN(A))return false;B=parseInt(B,10);if(isNaN(B))return false;return A>B};js.num.isIntLE=function(A,B){A=parseInt(A,10);if(isNaN(A))return false;B=parseInt(B,10);if(isNaN(B))return false;return A<=B};js.num.isIntGE=function(A,B){A=parseInt(A,10);if(isNaN(A))return false;B=parseInt(B,10);if(isNaN(B))return false;return A>=B};js.num.isIntNE=function(A,B){A=parseInt(A,10);if(isNaN(A))return false;B=parseInt(B,10);if(isNaN(B))return false;return A!=B};js.num.isIntEQ=function(A,B){A=parseInt(A,10);if(isNaN(A))return false;B=parseInt(B,10);if(isNaN(B))return false;return A==B};if(typeof(js)=="undefined")js=new Object;if(!js.date)js.date=new Object;js.date.getDayOfWeek=function(A){var B=A.getDay();if(B==0)B=7;return B};js.date.getFirstDayOfWeekInYear=function(B){var C=B.getYear(),A=new Date(C,0,1),D=js.date.getDayOfWeek(A);return D};js.date.getFirstMondayOfYear=function(B){var E=js.date.getFirstDayOfWeekInYear(B),C=B.getYear();if(E==1)var A=new Date(C,0,1);else var D=9-E,A=new Date(C,0,D);return A};js.date.getWeekOfYear=function(B){var A=1000*60,J=A*60,K=J*24,I=K*7,F=js.date.getFirstMondayOfYear(B),C=F.getTime(),G=B.getTime(),H=G-C,L=Math.floor(H/I)+1;if(L==0){var E=B.getYear()-1,D=new Date(E,11,31);L=getWeekOfYear(D)}return L};js.date.moveMillis=function(C){var B=new Date(),A=B+C;B.setTime(A);return B};js.date.getMonday=function(C){var D=js.date.getDayOfWeek(C),B=C.getDate()-D+1,A=new Date(C);A.setDate(B);return A};js.date.add=function(B,A){olddate=B.getDate();newdate=olddate+A;objdate=new Date(B);objdate.setDate(newdate);return objdate};js.date.toFormatString=function(B,A){flag=0;if(A=="YYYY-MM-DD"||A=="yyyy-mm-dd"||A=="yyyy-MM-dd"){dat=B.getDate();if(dat<="9")dat="0"+dat;month=B.getMonth()+1;if(month<="9")month="0"+month;year=B.getFullYear();ret=""+year+"-"+month+"-"+dat+"";flag=1}if(A=="hh:mm:ss"||A=="HH:MM:SS"||A=="HH:mm:ss"){hour=B.getHours();if(hour<10)hour="0"+hour;minute=B.getMinutes();if(minute<10)minute="0"+minute;second=B.getSeconds();if(second<10)second="0"+second;ret=""+hour+":"+minute+":"+second+"";flag=1}if(A=="YYYY-MM-DD HH:MM:SS"||A=="yyyy-mm-dd hh:mm:ss"||A=="yyyy-MM-dd HH:mm:ss"){dat=B.getDate();if(dat<10)dat="0"+dat;month=B.getMonth()+1;if(month<10)month="0"+month;year=B.getFullYear();if(year<1900)year=1900+year;if(B.getHours()==0&&B.getMinutes()==0&&B.getSeconds()==0)return""+year+"-"+month+"-"+dat;hour=B.getHours();if(hour<10)hour="0"+hour;minute=B.getMinutes();if(minute<10)minute="0"+minute;second=B.getSeconds();if(second<=0)ret=""+year+"-"+month+"-"+dat+" "+hour+":"+minute;else{if(second<10)second="0"+second;ret=""+year+"-"+month+"-"+dat+" "+hour+":"+minute+":"+second+""}flag=1}if(A=="yyyy-mm-dd hh:mm"||A=="YYYY-MM-DD HH:MM"||A=="yyyy-MM-dd HH:mm"||A=="yyyy-MM-dd hh:mm"||A=="yyyy-mm-dd HH:mm"){dat=B.getDate();if(dat<10)dat="0"+dat;month=B.getMonth()+1;if(month<10)month="0"+month;year=B.getFullYear();if(year<1900)year=1900+year;hour=B.getHours();if(hour<10)hour="0"+hour;minute=B.getMinutes();if(minute<10)minute="0"+minute;ret=""+year+"-"+month+"-"+dat+" "+hour+":"+minute;flag=1}if(flag==0)alert("\u65f6\u95f4\u683c\u5f0f\u53c2\u6570\u8f93\u5165\u9519\u8bef");else return ret};js.date.validDuration=function(B,A){if(A!=null&&A.length!=0&&A<B)return false;else return true};function validDuration(B,A){js.date.validDuration(B,A)}js.date.fromString=function js_date_fromString(E){if(!E)return null;var C=/(\d{1,4})(-(\d{1,2})(-(\d{1,2})( (\d{1,2})(:(\d{1,2})(:(\d{1,2})(.(\d{1,3}))?)?)?)?)?)?/,A=E.match(C);if(!A)return"";var K=parseInt(A[1],10),G=A[3]?parseInt(A[3],10):0,B=A[5]?parseInt(A[5],10):0,J=A[7]?parseInt(A[7],10):0,H=A[9]?parseInt(A[9],10):0,D=A[11]?parseInt(A[11],10):0,F=A[13]?parseInt(A[13],10):0,I=new Date(K,G-1,B,J,H,D);I.setMilliseconds(F);return I};js.date.format=function(B){if(!B)return"";var A=js.date.fromString(B);if(!A)return"";return js.date.toFormatString(A,"yyyy-MM-dd HH:mm:ss")};js.date.toMilitaryTimeString=function(C){var D="00"+C.getHours(),B="00"+C.getMinutes(),A="00"+C.getSeconds();return D.substr(D.length-2,2)+":"+B.substr(B.length-2,2)+":"+A.substr(A.length-2,2)};js.date.toRelativeString=function(D){var B=new Date(),A=(B-D)/1000,E=" ago",C=false;if(A<0){C=true;E=" from now";A=-A}if(A<60){A=Math.round(A);return A+" second"+(A==1?"":"s")+E}else if(A<3600){A=Math.round(A/60);return A+" minute"+(A==1?"":"s")+E}else if(A<3600*24&&D.getDay()==B.getDay()){A=Math.round(A/3600);return A+" hour"+(A==1?"":"s")+E}else if(A<3600*24*7){A=Math.round(A/(3600*24));if(A==1)return C?"Tomorrow":"Yesterday";else return A+" days"+E}else return js.date.toMilitaryTimeString(D)};js.date.isLeapYear=function(A){var B=A.getFullYear();return((B&3)==0&&(B%100||(B%400==0&&B)))};js.date.getFirstDateOfWeek=function(B){var A=js.date.getMonday(B);return new Date(A.getFullYear(),A.getMonth(),A.getDate(),0,0,0)};js.date.getLastDateOfWeek=function(B){var A=js.date.getMonday(B),C=js.date.add(A,6);return new Date(C.getFullYear(),C.getMonth(),C.getDate(),23,59,59)};js.date.getFirstDateOfPreWeek=function(B){var A=js.date.getMonday(B),C=js.date.add(A,-7);return new Date(C.getFullYear(),C.getMonth(),C.getDate(),0,0,0)};js.date.getLastDateOfPreWeek=function(C){var B=js.date.getMonday(C),A=js.date.add(B,-1);return new Date(A.getFullYear(),A.getMonth(),A.getDate(),23,59,59)};js.date.getFirstDateOfMonth=function(A){return new Date(A.getFullYear(),A.getMonth(),1,0,0,0)};js.date.getLastDateOfMonth=function(A){return new Date(A.getFullYear(),A.getMonth(),js.date.getDaysInMonth(A),23,59,59)};js.date.getFirstDateOfPreMonth=function(A){var B=js.date.getFirstDateOfMonth(A),C=js.date.add(B,-1);return new Date(C.getFullYear(),C.getMonth(),1,0,0,0)};js.date.getLastDateOfPreMonth=function(A){var B=js.date.getFirstDateOfMonth(A),C=js.date.add(B,-1);return new Date(C.getFullYear(),C.getMonth(),js.date.getDaysInMonth(C),23,59,59)};js.date.getPreDay7=function(B){var A=js.date.add(B,-7);return new Date(A.getFullYear(),A.getMonth(),A.getDate(),0,0,0)};js.date.getPreDay30=function(A){var B=js.date.add(A,-30);return new Date(B.getFullYear(),B.getMonth(),B.getDate(),0,0,0)};js.date.getLastTimeOfDay=function(A){return new Date(A.getFullYear(),A.getMonth(),A.getDate(),23,59,59)};js.date.getDaysInMonth=function(A){js.daysInMonth[1]=js.date.isLeapYear(A)?29:28;return js.daysInMonth[A.getMonth()]};js.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];js.date.calc_time_range=function(B){var E=new Date(),A=new Date(),D=new Date(),C=new Array();if(typeof(B)=="string")if(B=="day"){A=new Date(E.getFullYear(),E.getMonth(),E.getDate(),0,0,0);D=new Date(E.getFullYear(),E.getMonth(),E.getDate(),23,59,59)}else if(B=="week"){A=js.date.getFirstDateOfWeek(E);D=js.date.getLastDateOfWeek(E)}else if(B=="month"){A=js.date.getFirstDateOfMonth(E);D=js.date.getLastDateOfMonth(E)}else if(B=="lastWeek"){A=js.date.getFirstDateOfPreWeek(E);D=js.date.getLastDateOfPreWeek(E)}else if(B=="lastMonth"){A=js.date.getFirstDateOfPreMonth(E);D=js.date.getLastDateOfPreMonth(E)}else if(B=="day7"){A=js.date.getPreDay7(E);D=js.date.getLastTimeOfDay(E)}else if(B=="day30"){A=js.date.getPreDay30(E);D=js.date.getLastTimeOfDay(E)}C[0]=A;C[1]=D;return C};Date.prototype.moveNext=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+1,this.getHours(),this.getMinutes(),this.getSeconds())};Date.prototype.movePrev=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate()-1,this.getHours(),this.getMinutes(),this.getSeconds())};if(typeof(js)=="undefined")js=function(){};if(!js.str);js.validate=function(){alert("validate.js")};var validate_G=new Object();validate_G.CHECK_FLOAT="$1 \u4e0d\u662f\u6570\u5b57";validate_G.CHECK_POSITIVE_FLOAT="$1 \u4e0d\u662f\u6b63\u7684\u6570\u5b57";validate_G.CHECK_FLOAT_MAX_LENGTH="$1 \u8d85\u8fc7\u6700\u5927\u957f\u5ea6";validate_G.CHECK_FLOAT_OVERFLOW_PRECISION="$1 \u8d85\u8fc7\u7cbe\u5ea6\u957f\u5ea6";validate_G.CHECK_FLOAT_OVERFLOW_MAX_VALUE="$1 \u8d85\u8fc7\u6700\u5927\u503c";validate_G.CHECK_NO_SPEC_CHAR="$1 \u5305\u542b\u975e\u6cd5\u5b57\u7b26";validate_G.CHECK_NOT_EMPTY="$1 \u4e0d\u80fd\u4e3a\u7a7a";validate_G.CHECK_INT="$1 \u4e0d\u662f\u6574\u6570";validate_G.CHECK_INT_OVERFLOW="$1 \u8d85\u51fa\u6574\u6570\u8868\u793a\u8303\u56f4";validate_G.CHECK_LENGTH="$1 \u957f\u5ea6\u8fc7\u957f";validate_G.CHECK_MIN_LENGTH="$1 \u957f\u5ea6\u4e0d\u5e94\u5c0f\u4e8e $2 \u4f4d";validate_G.CHECK_ONLY_DIGIT="$1 \u53ea\u80fd\u8f93\u5165\u6570\u5b57";validate_G.CHECK_NOT_BLANK="$1 \u4e0d\u80fd\u4e3a\u7a7a";validate_G.CHECK_EMAIL="$1 \u4e0d\u662femail\u5730\u5740";validate_G.CHECK_LT="$1 \u5e94\u5c0f\u4e8e $2";validate_G.CHECK_GT="$1 \u5e94\u5927\u4e8e $2";validate_G.CHECK_LE="$1 \u5e94\u5c0f\u4e8e\u6216\u7b49\u4e8e $2";validate_G.CHECK_GE="$1 \u5e94\u5927\u4e8e\u6216\u7b49\u4e8e $2";validate_G.CHECK_EQ="$1 \u5e94\u7b49\u4e8e $2";validate_G.CHECK_NE="$1 \u5e94\u4e0d\u7b49\u4e8e $2";validate_G.CHECK_INT_LT="$1 \u5e94\u5c0f\u4e8e $2";validate_G.CHECK_INT_GT="$1 \u5e94\u5927\u4e8e $2";validate_G.CHECK_INT_LE="$1 \u5e94\u5c0f\u4e8e\u6216\u7b49\u4e8e $2";validate_G.CHECK_INT_GE="$1 \u5e94\u5927\u4e8e\u6216\u7b49\u4e8e $2";validate_G.CHECK_INT_EQ="$1 \u5e94\u7b49\u4e8e $2";validate_G.CHECK_INT_NE="$1 \u5e94\u4e0d\u7b49\u4e8e $2";validate_G.CHECK_YEAR_VALID="$1 \u4e0d\u662f\u5408\u6cd5\u5e74\u4efd ";validate_G.CHECK_AFTER_DATE="$1 \u4e0d\u5e94\u5927\u4e8e\u5f53\u524d\u65e5\u671f";validate_G.CHECK_IS_DATE="$1 \u4e0d\u662f\u65e5\u671f";validate_G.CHECK_LAYERCODE="$1 \u4e0d\u662f\u5408\u6cd5\u7684\u5c42\u6b21\u7801";validate_G.CHECK_INVALID="$1 \u4e0d\u662f\u5408\u6cd5\u8f93\u5165";validate_G.ErrorMessage=null;function _addMsg(A){if(validate_G.ErrorMessage)validate_G.ErrorMessage[validate_G.ErrorMessage.length]=(validate_G.ErrorMessage.length+1)+". "+A;else alert(A)}function _show(E,F,D,G,C,B,A){if(typeof(F)=="undefined"){alert("js.validate.err_no_default_message");return}if(typeof(D)=="undefined")D=E;if(!G)G=F;var H=js.str.format(G,D,C,B,A);_addMsg(H)}js.validate.validElement=function(elm){if(!elm){alert("js.validate.err_invalid_element");return false}if(!elm.getAttribute("validator"))return true;if(elm.disabled||elm.getAttribute("disabled")=="true")return true;var value=null;if(elm.value)value=elm.value;try{return eval(elm.getAttribute("validator"))}catch(e){alert(e.message+":"+elm.getAttribute("validator"));return false}};js.validate.validForm=function(A){return js.validate.validContainer(A);if(typeof A=="string")A=document.getElementById(A);if(A.tagName!="FORM"){alert("js.validate.err_frm_arg_is_not_form::"+A.tagName);return false}validate_G.ErrorMessage=new Array();var C,E,D=A.length;for(E=0;E<D;E++){elm=A.elements[E];if(!js.validate.validElement(elm))if(!C)C=elm}if(C){alert("\u8868\u5355\u9a8c\u8bc1\u5931\u8d25:\n"+validate_G.ErrorMessage.join("\n"));try{if(C.focus)C.focus();if(C.select)C.select()}catch(B){}validate_G.ErrorMessage=null;return false}validate_G.ErrorMessage=null;return true};js.validate.validContainer=function(D){var C=D;if(typeof D=="string")C=document.getElementById(D);if(!C){alert("err_no_element"+D);return false}validate_G.ErrorMessage=new Array();var E={};validate_G.elmHolder=E;_validate_container(C,E);var B=E.firstElm;if(B){alert("\u8868\u5355\u9a8c\u8bc1\u5931\u8d25:\n"+validate_G.ErrorMessage.join("\n"));try{if(B.focus)B.focus();if(B.select)B.select()}catch(A){}validate_G.ErrorMessage=null;return false}validate_G.ErrorMessage=null;return true};function _validate_container(B,D){D=D||(validate_G.elmHolder||{});if(B.nodeType!=1||!B.getAttribute)return true;if(B.disabled||B.getAttribute("disabled")=="true"||B.getAttribute("disabled")==true)return true;var E=true;if(!js.validate.validElement(B)){if(!D.firstElm)D.firstElm=B;E=false}if(B.getAttribute("noChildValidation")=="true")return true;var F,C=B.childNodes.length;for(F=0;F<C;F++){var A=B.childNodes[F];if(!_validate_container(A,D))E=false}return E}js.validate.validBlock=function(C){if(typeof(C)=="string")C=document.getElementById(C);validate_G.ErrorMessage=new Array();var B,E,D=frm.length;for(E=0;E<D;E++){C=frm.elements[E];if(!js.validate.validElement(C))if(!B)B=C}if(B){alert("\u8868\u5355\u9a8c\u8bc1\u5931\u8d25:\n"+validate_G.ErrorMessage.join("\n"));try{if(B.focus)B.focus;if(B.select)B.select()}catch(A){}validate_G.ErrorMessage=null;return false}validate_G.ErrorMessage=null;return true};js.validate.onsubmit=function(A){if(arguments.length<1){alert("usage: js.validate.onsubmit(formName)");return false}if(js.validate.validForm(A))A.submit()};js.validate.check=function(B,A,C){if(B)return true;_show(B,validate_G.CHECK_INVALID,A,C);return false};js.validate.checkOnlyDigit=function(B,A,C){if(js.str.onlyDigit(B))return true;_show(B,validate_G.CHECK_ONLY_DIGIT,A,C);return false};js.validate.checkNotEmpty=function(B,A,C){if(!js.str.isEmpty(B))return true;_show(B,validate_G.CHECK_NOT_EMPTY,A,C);return false};js.validate.checkOneNotBlank=function(C,D){if(C&&C.length>0)for(var A in C){var B=C[A];if(B&&!js.str.isBlank(B))return true}_addMsg(D);return false};js.validate.checkNotBlank=function(B,A,C){if(!js.str.isBlank(B))return true;_show(B,validate_G.CHECK_NOT_BLANK,A,C);return false};js.validate.checkNoSpecChar=function(C,B,A,D){if(!js.str.hasSpecChar(C,B))return true;_show(C,validate_G.CHECK_NO_SPEC_CHAR,A,D);return false};js.validate.checkEmail=function(B,A,C){if(js.str.isEmail(B))return true;_show(B,validate_G.CHECK_EMAIL,A,C);return false};js.validate.checkEmailOrEmpty=function(B,A,C){if(js.str.isEmpty(B))return true;return js.validate.checkEmail(B,A,C)};js.validate.checkInt=function(C,A,D){if(!C)return false;var B=/^-?\d+$/.test(C);if(!B){_show(C,validate_G.CHECK_INT,A,D);return false}if(parseInt(C)>2147483647||parseInt(C)<-2147483648){_show(C,validate_G.CHECK_INT_OVERFLOW,A,D);return false}return true};js.validate.checkPoInt=function(C,A,D){if(!C||js.str.isBlank(C)){_show(C,validate_G.CHECK_NOT_BLANK,A,D);return false}var B=/^\d+$/.test(C);if(!B){_show(C,validate_G.CHECK_INT,A,D);return false}if(parseInt(C)>2147483647){_show(C,validate_G.CHECK_INT_OVERFLOW,A,D);return false}return true};js.validate.checkPoIntOrEmpty=function(B,A,C){if(js.str.isEmpty(B))return true;return js.validate.checkPoInt(B,A,C)};js.validate.checkIntOrEmpty=function(B,A,C){if(js.str.isEmpty(B))return true;return js.validate.checkInt(B,A,C)};js.validate.checkFloat=function(E,C,H,D,B){if(!js.str.isFloat(E)){_show(E,validate_G.CHECK_FLOAT,C,H);return false}if(B>=0){E=js.str.trim(E);var F=null,G=null,A=E.indexOf(".");if(A>=0){F=E.substring(0,A);G=E.substring(A+1)}else{F=E;G=null}if(G!=null&&G.length>B){_show(E,validate_G.CHECK_FLOAT_OVERFLOW_PRECISION,C,H);return false}if(F.length>(D-B)){_show(E,validate_G.CHECK_FLOAT_OVERFLOW_MAX_VALUE,C,H);return false}}return true};js.validate.checkFloatOrEmpty=function(D,B,E,C,A){if(js.str.isEmpty(D))return true;return js.validate.checkFloat(D,B,E,C,A)};js.validate.checkPoFloat=function(E,B,F,D,A){if(!E||js.str.isBlank(E)){_show(E,validate_G.CHECK_NOT_BLANK,B,F);return false}var C=!(/^(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(E)||/^\d+\.?\d*[E|e]{1}[+]?\d+$/.test(E));if(C){_show(E,validate_G.CHECK_POSITIVE_FLOAT,B,F);return false}return js.validate.checkFloat(E,B,F,D,A)};js.validate.checkPoFloatOrEmpty=function(D,B,E,C,A){if(js.str.isEmpty(D))return true;return js.validate.checkPoFloat(D,B,E,C,A)};js.validate.checkIsYear=function(B,A,C){if(js.str.isYear(B))return true;_show(B,validate_G.CHECK_YEAR_VALID,A,C);return false};js.validate.checkLT=function(A,C,B,D){if(js.num.isLT(A,C))return true;_show(A,validate_G.CHECK_LT,B,D,C);return false};js.validate.checkGT=function(A,C,B,D){if(js.num.isGT(A,C))return true;_show(A,validate_G.CHECK_GT,B,D,C);return false};js.validate.checkLE=function(A,C,B,D){if(js.num.isLE(A,C))return true;_show(A,validate_G.CHECK_LE,B,D,C);return false};js.validate.checkGE=function(A,C,B,D){if(js.num.isGE(A,C))return true;_show(A,validate_G.CHECK_GE,B,D,C);return false};js.validate.checkNE=function(A,C,B,D){if(js.num.isNE(A,C))return true;_show(A,validate_G.CHECK_NE,B,D,C);return false};js.validate.checkEQ=function(A,C,B,D){if(js.num.isEQ(A,C))return true;_show(A,validate_G.CHECK_EQ,B,D,C);return false};js.validate.checkIntLT=function(A,C,B,D){if(!js.validate.checkInt(A,B))return false;if(js.num.isIntLT(A,C))return true;_show(A,validate_G.CHECK_INT_LT,B,D,C);return false};js.validate.checkIntGT=function(A,C,B,D){if(!js.validate.checkInt(A,B))return false;if(js.num.isIntGT(A,C))return true;_show(A,validate_G.CHECK_INT_GT,B,D,C);return false};js.validate.checkIntLE=function(A,C,B,D){if(!js.validate.checkInt(A,B))return false;if(js.num.isIntLE(A,C))return true;_show(A,validate_G.CHECK_INT_LE,B,D,C);return false};js.validate.checkIntGE=function(A,C,B,D){if(!js.validate.checkInt(A,B))return false;if(js.num.isIntGE(A,C))return true;_show(A,validate_G.CHECK_INT_GE,B,D,C);return false};js.validate.checkIntNE=function(A,C,B,D){if(!js.validate.checkInt(A,B))return false;if(js.num.isIntNE(A,C))return true;_show(A,validate_G.CHECK_INT_NE,B,D,C);return false};js.validate.checkIntEQ=function(A,C,B,D){if(!js.validate.checkInt(A,B))return false;if(js.num.isEQ(A,C))return true;_show(A,validate_G.CHECK_INT_EQ,B,D,C);return false};js.validate.checkIsDate=function(B,A,C){if(js.str.isDate(B))return true;_show(B,validate_G.CHECK_IS_DATE,A,C);return false};js.validate.checkIsDateOrEmpty=function(B,A,C){if(!js.str.isBlank(B))return true;return js.validate.checkIsDate(B,A,C)};js.validate.checkTwoDates=function(C,B,A,D){if(B==null||B.length==0)return true;if(js.date.validDuration(C,B))return true;_show(C,validate_G.CHECK_GE,A,D,B);return false};js.validate.checkDate=function(C,B,A,D){if(B==null||B.length==0)return true;if(B.substring(0,10)>js.date.toFormatString(new Date(),"yyyy-MM-dd")){alert(A+"\u4e0d\u80fd\u5927\u4e8e\u5f53\u524d\u65e5\u671f!!");return false}if(js.date.validDuration(C,B))return true;_show(C,validate_G.CHECK_GE,A,D,B);return false};js.validate.checkDateAfterNow=function(C,A){if(C==null||C.length==0)return true;var B=js.date.toFormatString(new Date(),"yyyy-mm-dd");if(C.substring(0,10)<=B)return true;alert(A+"\u4e0d\u80fd\u5927\u4e8e\u5f53\u524d\u65e5\u671f!!");return false};js.validate.checkDateAfterNowAndNotBlank=function(C,A){if(C==null||C.length==0){alert(A+"\u4e0d\u80fd\u4e3a\u7a7a!!");return false}var B=js.date.toFormatString(new Date(),"yyyy-mm-dd");if(C.substring(0,10)<=B)return true;alert(A+"\u4e0d\u80fd\u5927\u4e8e\u5f53\u524d\u65e5\u671f!!");return false};js.validate.checkMonthOrDateAndNotBlank=function(B,A){if(B==null||B.length==0){alert(A+"\u4e0d\u80fd\u4e3a\u7a7a!!");return false}js.validate.checkMonthOrDate(B,A)};js.validate.checkMonthOrDate=function(F,A){if(F==null||F.length==0)return true;var E=F.split("-");if(E.length!=2&&E.length!=3){alert(A+"\u5fc5\u987b\u4e3a2010-01\u6216\u80052010-01-12\u8f93\u5165\u5f62\u5f0f");return false}for(var G=0;G<E.length;G++)if(isNaN(E[G])){alert(A+"\u5e74\u6708\u65e5\u5fc5\u987b\u90fd\u4e3a\u6574\u6570");return false}var C=parseInt(E[0],10);if(C<1900||C>3000){alert(A+"\u5e74\u4efd\u5fc5\u987b\u4e3a1900-3000\u4e4b\u95f4\u7684\u6574\u6570");return false}var B=parseInt(E[1],10);if(B<1||B>12){alert(A+"\u6708\u4efd\u5fc5\u987b\u4e3a1-12\u4e4b\u95f4\u7684\u6574\u6570");return false}if(E.length==2)return true;var D=parseInt(E[2],10);if(D<1||D>31){alert(A+"\u65e5\u671f\u5fc5\u987b\u4e3a1-31\u4e4b\u95f4\u7684\u6574\u6570");return false}return true};js.validate.checkDateBeforeNowAndNotBlank=function(C,A){if(C==null||C.length==0){alert(A+"\u4e0d\u80fd\u4e3a\u7a7a!!");return false}var B=js.date.toFormatString(new Date(),"yyyy-mm-dd");if(C.substring(0,10)>=B)return true;alert(A+"\u4e0d\u80fd\u5c0f\u4e8e\u5f53\u524d\u65e5\u671f!!");return false};js.validate.checkDateBeforeNowAndNotBlankGtBegin=function(C,B,A,D){if(B==null||B.length==0){alert(A+"\u4e0d\u80fd\u4e3a\u7a7a");return false}if(B.substring(0,10)<=js.date.toFormatString(new Date(),"yyyy-MM-dd")){alert(A+"\u4e0d\u80fd\u5c0f\u4e8e\u5f53\u524d\u65e5\u671f!!");return false}if(C<B)return true;_show(C,validate_G.CHECK_GE,A,D,B);return false};js.validate.checkTimeBeforeNowAndNotBlank=function(C,A){if(C==null||C.length==0){alert(A+"\u4e0d\u80fd\u4e3a\u7a7a!!");return false}var B=js.date.toFormatString(new Date(),"yyyy-mm-dd hh:mm");if(C.substring(0,16)>B)return true;alert(A+"\u4e0d\u80fd\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4!!");return false};js.validate.checkTimeBeforeNowAndNotBlankGtBegin=function(C,B,A,D){if(B==null||B.length==0){alert(A+"\u4e0d\u80fd\u4e3a\u7a7a");return false}if(B.substring(0,16)<=js.date.toFormatString(new Date(),"yyyy-MM-dd HH:mm")){alert(A+"\u4e0d\u80fd\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4!!");return false}if(C<B)return true;_show(C,validate_G.CHECK_GE,A,D,B);return false};js.validate.checkLen=function(B,C,A,D){if(B==null)return true;if(B.length<=C)return true;_show(B,validate_G.CHECK_LENGTH,A,D);return false};js.validate.checkOnlyCharAndDigit=function(B,A){if(js.str.isBlank(B))return true;if(!js.str.onlyCharAndDigit(B)){_show(B,A+" \u53ea\u80fd\u5305\u542b\u82f1\u6587\u548c\u6570\u5b57",A);return false}return true};js.validate.checkPassword=function(A,C,B){if(js.str.isBlank(A)){_show(A,validate_G.CHECK_NOT_EMPTY,B);return false}if(A!=C){_addMsg("\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4\uff01");return false}return true};js.validate.checkIdCardNo=function(E,H,B,G){if(isNaN(E.value))alert("\u8bf7\u586b\u5199\u8eab\u4efd\u8bc1\u53f7\u7801\uff01");else if(trim(E.value).length==18){var A=E.value,D=A.substring(6,10),C=A.substring(10,12),F=A.substring(12,14);if(H.selectedIndex==D-1950&&B.selectedIndex==C-1&&G.selectedIndex==F-1)return true;alert("\u51fa\u751f\u5e74\u6708\u65e5\u4e0e\u8eab\u4efd\u8bc1\u53f7\u7801\u4e0d\u7b26\uff01")}else if(trim(E.value).length==15){A=E.value,D="19"+A.substring(6,8),C=A.substring(8,10),F=A.substring(10,12);if(H.selectedIndex==D-1950&&B.selectedIndex==C-1&&G.selectedIndex==F-1)return true;alert("\u51fa\u751f\u5e74\u6708\u65e5\u4e0e\u8eab\u4efd\u8bc1\u53f7\u7801\u4e0d\u7b26\uff01")}else alert("\u8eab\u4efd\u8bc1\u53f7\u7801\u957f\u5ea6\u5e94\u8be5\u4e3a15\u4f4d\u621618\u4f4d");return false};js.validate.checkLenAndNotBlank=function(B,C,A,D){if(js.str.isBlank(B)){_addMsg(A+"\u4e0d\u53ef\u4ee5\u662f\u7a7a\u503c");return false}if(js.str.calcByteLen(B)<=C)return true;_show(B,validate_G.CHECK_LENGTH,A,D);return false};js.validate.checkLayerCode=function(B,D,A,C){if(js.str.isLayerCode(B,D))return true;_show(B,validate_G.CHECK_LAYERCODE,A,C);return false};js.validate.checkURILenAndNotBlank=function(B,A,D){if(js.str.isBlank(B)){_show(B,validate_G.CHECK_NOT_EMPTY,A,D);return false}var C=90,E=B.substring(B.lastIndexOf("\\")+1,B.lastIndexOf("."));if(js.str.hasSpecChar(E,"\\/*:?\"<>|")){_show(B,validate_G.CHECK_NO_SPEC_CHAR,A,D);return false}if(js.str.calcByteLen(E)<=C)return true;_show(B,validate_G.CHECK_LENGTH,A,D);return false};js.validate.checkNumInRange=function(C,D,F,B,E){if(!js.validate.checkFloat(C,B))return false;if(!C)return true;var A=parseFloat(C);if(A<D||A>F){_addMsg(B+E);return false}return true};js.validate.checkUserPass=function(B,A,C,D){if(!C)C=12;if(js.str.calcByteLen(B)<C){_show(B,validate_G.CHECK_MIN_LENGTH,A,D,C);return false}if(B.match(/\d+/)&&B.match(/[^\d]+/))return true;else{_addMsg("\u5bc6\u7801\u590d\u6742\u5ea6\u4e0d\u591f\uff0c\u5e94\u5305\u542b\u5b57\u6bcd\u6570\u5b57\u7b49");return false}};js.validate.checkLetterOrDigit=function(B,A,C){if(/^[a-z|0-9]+$/i.test(B))return true;else{_show(B,"\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u548c\u82f1\u6587\u5b57\u7b26",A,C);return false}};if(typeof(js)=="undefined")js=function(){alert("js")};js.form=function(){alert("form.js")};var form_G=new Object();form_G.MSG_REMOVE_NO_SELECTION="\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u6761\u76ee";form_G.MSG_CONFIRM_REMOVE="\u786e\u8ba4\u8981\u5220\u9664\u5417";form_G.MSG_NO_SELECTION="\u6ca1\u6709\u9009\u62e9\u6761\u76ee";form_G.MSG_SELECTION_MORE_THAN_ONE="\u4e00\u6b21\u53ea\u80fd\u64cd\u4f5c\u4e00\u6761\u8bb0\u5f55\uff0c\u662f\u5426\u7ee7\u7eed";js.form.selectAll=function(A){var B=document.getElementsByName(A),C;for(C=0;C<B.length;C++)B[C].checked=true};js.form.unselectAll=function(A){var B=document.getElementsByName(A),C;for(C=0;C<B.length;C++)B[C].checked=false};js.form.getContainerForm=function(A){while(A&&"FORM"!=A.tagName)A=A.parentNode;return A};js.form.getEventForm=function(B){var A;if(B&&B.srcElement)A=B.srcElement.form?B.srcElement.form:js.form.getContainerForm(B.srcElement);else if(B&&B.target)A=B.target.form?B.target.form:js.form.getContainerForm(B.target);return A};js.form.getForm=function(B){if(!B)return null;if(typeof(B)=="string"){var A=B;B=document.getElementById(B);if(!B)B=document.forms[A];if(!B){alert("err_not_form"+A);return null}}if(B.tagName=="FORM")return B;alert("CAN_err_not_form::"+B.tagName);return B};js.form.hasSelected=function(B,A){A=js.form.getForm(A);var D;if(!A)D=document.getElementsByName(B);else D=$Name(B,A);if(!D)return 0;var C=0;if(!D.length){if(D.checked==true)C++}else{var E;for(E=0;E<D.length;E++)if(D[E].checked==true)C++}if(C==0)return 0;else return C};js.form.getSelectedValue=function(A,D){var C=$Name(A,D),B,E;for(E=0;E<C.length;E++){if(C[E].disabled)continue;if(C[E].checked==true){B=C[E].value;return B}}return 0};js.form.getSelectedValues=function(A,D){var C=$Name(A,D),B=new Array(),E;for(E=0;E<C.length;E++){if(C[E].disabled)continue;if(C[E].checked==true)B[B.length]=C[E].value}return B};js.form.postForm=function(A,B,C){var A=js.form.getForm(A);A.action=B;if(!C)C="post";A.method=C;A.submit()};js.form.postSelect=function(A,C,B){if(!C)alert("not_valid_select::"+A);if(typeof(A)=="string")A=document.forms[A];if(!js.form.hasSelected(C,A)){alert(form_G.MSG_NO_SELECTION);return false}js.form.postForm(A,B);return true};js.form.postRemove=function(A,C,B){if(!C)alert("not_valid_select::"+A);if(typeof(A)=="string")A=document.forms[A];if(!js.form.hasSelected(C,A)){alert(form_G.MSG_REMOVE_NO_SELECTION);return false}if(!confirm(form_G.MSG_CONFIRM_REMOVE))return false;js.form.postForm(A,B);return true};js.form.postUniqueSelect=function(A,D,C){if(!D)alert("not_valid_select::"+A);if(typeof(A)=="string")A=document.forms[A];var B=js.form.hasSelected(D,A);if(B<=0){alert(form_G.MSG_NO_SELECTION);return false}if(B>1)if(!window.confirm(form_G.MSG_SELECTION_MORE_THAN_ONE))return false;js.form.postForm(A,C);return true};js.form.limitTextAreaLength=function(A,B){if(!A||A.tagName!="TEXTAREA"){alert("form.err_invalid_textarea");return}alert("length::"+B);alert(A.innerText.length)};js.form.getParentByTagName=function(B,C){if(!B||!B.tagName){alert("err_not_element");return}C=C.toLowerCase();var A=B.parentNode;while(A!=null){if(A.tagName.toLowerCase()==C)return A;A=A.parentNode}return null};js.form.toggleDisabled=function(D){if(!D)return;if(!D.length){var B=D.getAttribute("enabled");if(B!="true")D.disabled=!D.disabled}var E,C=D.length;for(E=0;E<C;E++){var A=D[E],B=A.getAttribute("enabled");if(B!="true")A.disabled=!A.disabled}};js.form.appendHiddenInput=function(A,D,C){var A=js.form.getForm(A),B=document.createElement("INPUT");B.type="hidden";B.name=D;B.id=D;B.value=C;A.appendChild(B)};js.form.appendHiddenInputs=function(B,A){var B=js.form.getForm(B),C;for(C in A)js.form.appendHiddenInput(B,C,A[C])};js.form.rename=function(G,D,B){var E=document.getElementsByName(G);if(B)var A=js.form.getForm(B);var C=new Array();for(var F=0;F<E.length;F++)if(!A||E[F].form==A)C[F]=E[F];for(F=0;F<C.length;F++)C[F].name=D};function _dom_value_changed(elm){if(elm.getAttribute("data-wx-for-view")=="true")return false;var onsync=elm.getAttribute("onsync");if(onsync)eval(onsync);var value=elm.value,defaultValue=elm.defaultValue;if(elm.type=="checkbox"||elm.type=="radio"){if(elm.checked!=elm.defaultChecked)return true;return false}if(elm.type=="select-one"||elm.type=="select-multiple"){defaultValue=elm.getAttribute("defaultvalue");if(defaultValue==null)return false}if(typeof(value)!="undefined"&&typeof(defaultValue)!="undefined"&&value!=defaultValue)return true;return false}js.form.hasChanged=function(B){var A=js.form.getForm(B),C=A.elements;for(var D=0;D<C.length;D++)if(_dom_value_changed(C[D]))return true;return false};function _dom_disable_unchanged(B){var D=B.value,F=B.defaultValue;if(typeof(D)!="undefined"&&typeof(F)!="undefined"&&D!=F)B.disabled=true;var E=B.childNodes,G,C=E.length;for(G=0;G<C;G++){var A=E[G];_dom_disable_unchanged(A)}}js.form.disableUnchanged=function(B){var A=js.form.getForm(B);_dom_disable_unchanged(A)};js.form.getSelectedIdsAndShowNames=function(B,E){var F=$Name(B,E),C=[],H=[],A=[],G,D=F.length;for(G=0;G<D;G++)if(F[G].checked){C[C.length]=F[G].value;H[H.length]=F[G].getAttribute("showName");A.push({value:F[G].value,text:F[G].getAttribute("showName")})}A.ids=C;A.showNames=H;return A};js.form.markSelectedByIds=function(E,A,D){E=E||[];var F=$Name(A,D),G,C=F.length;for(G=0;G<C;G++){var B=F[G];if(E.include(B.value))B.checked=true}};js.form.clearSelected=function(A,C){var D=$Name(A,C),E,B=D.length;for(E=0;E<B;E++)D[E].checked=false};js.form.confirmClear=function(A,B){if(!confirm(js.string("std.confirm_clear_selected")))return;js.form.clearValue(A,B);js.syncWxValue(A)};js.form.markSelected=function(B,A,E,I){B=B||[];if(!I&&B.length<=0)return;var H=$Name(A,E),J,D=H.length,F=B.length;for(J=0;J<D;J++){var C=H[J];for(var G=0;G<F;G++)if(B[G].value==C.value){C.checked=true;break}if(I&&G==F)C.checked=false}};js.form.getIdsAndShowNames=function(B,E){var F=$Name(B,E),C=[],H=[],A=[],G,D=F.length;for(G=0;G<D;G++){C[C.length]=F[G].value;H[H.length]=F[G].getAttribute("showName");A.push({value:C[G],text:H[G]})}A.ids=C;A.showNames=H;return A};js.form.onreset=function(A,B){js.form.resetForm(A,B);return false};js.form.resetForm=function(B,E){E=E||[];var A=js.form.getForm(B),H=[],I,D=A.length;for(I=0;I<D;I++)H[I]=A.elements[I];for(I=0;I<D;I++){elm=H[I];var C=elm.name,G,F=E.length;for(G=0;G<F;G++)if(E[G]==C)break;if(G>=F)js.form.resetElement(elm)}js.form.resetFileElements(A)};js.form.clearForm=function(B,E){E=E||[];var A=js.form.getForm(B),H=[],I,D=A.length;for(I=0;I<D;I++)H[I]=A.elements[I];for(I=0;I<D;I++){elm=H[I];var C=elm.name;if(elm.type=="button")continue;var G,F=E.length;for(G=0;G<F;G++)if(E[G]==C)break;if(G>=F)js.form.clearElement(elm)}js.form.clearFileElements(A)};js.form.clearFileElements=function(A){var D=$Class("input_upload_file",A),E,C=D.length;for(E=0;E<C;E++){var B=D[E];B.value=""}};js.form.clearElement=function(elm){elm=$(elm);if(elm.tagName=="INPUT"){if(elm.type.toLowerCase()=="radio"||elm.type.toLowerCase()=="checkbox")elm.checked=false;else if(elm.type.toLowerCase()=="hidden"&&typeof(elm.getAttribute("defaultValue"))!="undefined")elm.value="";else elm.value=""}else if(elm.tagName=="TEXTAREA")elm.value="";else if(elm.tagName=="SELECT")if(elm.getAttribute("selectAll")=="true")js.select.removeAll(elm);else{var opts=elm.options,p,q=opts.length;for(p=0;p<q;p++)opts[p].selected=false}if(elm.getAttribute("onClearValue"))eval(elm.getAttribute("onClearValue"))};js.form.resetElement=function(elm){if(elm.tagName=="INPUT"){if(elm.type.toLowerCase()=="radio"||elm.type.toLowerCase()=="checkbox")elm.checked=elm.defaultChecked;else if(elm.type.toLowerCase()=="hidden"&&typeof(elm.getAttribute("defaultValue"))!="undefined")elm.value=elm.getAttribute("defaultValue");else elm.value=elm.defaultValue}else if(elm.tagName=="TEXTAREA")elm.value=elm.defaultValue;else if(elm.tagName=="SELECT"){var opts=elm.options,p,q=opts.length;for(p=0;p<q;p++)opts[p].selected=opts[p].defaultSelected}if(elm.getAttribute("onreset"))eval(elm.getAttribute("onreset"))};js.form.resetFileElements=function(par){var elms=$Class("holder_upload_file_list",par),i,n=elms.length;for(i=0;i<n;i++){var elm=elms[i];if(elm.getAttribute("onreset"))eval(elm.getAttribute("onreset"))}elms=$Class("input_upload_file",par),i,n=elms.length;for(i=0;i<n;i++){elm=elms[i];elm.value=""}};js.form.getElementDefaultValue=function(B){if(B.tagName=="INPUT"&&B.type.toLowerCase()=="hidden"&&typeof(B.getAttribute("defaultValue"))!="undefined")return B.getAttribute("defaultValue");else if(B.tagName=="SELECT"){var A=B.options,D,C=A.length;for(D=0;D<C;D++)if(A[D].defaultSelected)return A[D].value}return B.defaultValue};js.form.hasParent=function(B,A){A=typeof(A)=="string"?document.getElementById(A):A;while(B!=null&&B.parentNode!=A)B=B.parentNode;return B?true:false};js.form.getElementsByName=function(B,C){var E=document.getElementsByName(C),A=[],F,D=E.length;for(F=0;F<D;F++)if(js.form.hasParent(E[F],B))A[A.length]=E[F];return A};js.form.clearValue=function(){var i,n=arguments.length;for(i=0;i<n;i++){var argValue=arguments[i],elm=$(argValue);if(elm){elm.value="";if(elm.getAttribute("onClearValue"))eval(elm.getAttribute("onClearValue"))}}};js.form.disable=function(B){if(typeof(B.disabled)!="undefined")B.disabled=true;var D,C=B.childNodes.length;for(D=0;D<C;D++){var A=B.childNodes[D];js.form.disable(A)}};js.form.enable=function(B){if(typeof(B.disabled)!="undefined")B.disabled=false;var D,C=B.childNodes.length;for(D=0;D<C;D++){var A=B.childNodes[D];js.form.enable(A)}};js.form.disableAndHide=function(A){if(!$(A))return;Element.hide(A);js.form.disable(A)};js.form.enableAndShow=function(A){if(!$(A))return;Element.show(A);js.form.enable(A)};js.form.switchDiv=function(B,A){B.each(function(A){js.form.disableAndHide($(A))});js.form.enableAndShow($(A))};if(typeof(js)=="undefined")js=function(){alert("js")};js.select=function(){alert("select.js")};function _get_select(B){var A=B;if(typeof(A)=="string")A=document.getElementById(B);if(!A){alert("missing element :: "+B);return}if(A.tagName!="SELECT")alert("not select element :: "+B);return A}function _ary_contains(C,B){if(!C)return false;var D,A=C.length;for(D=0;D<A;D++)if(C[D]==B)return true;return false}js.select.contains=function(C,E){var B=_get_select(C),A=B.options,F,D=A.length;for(F=0;F<D;F++)if(A[F].value==E)return true;return false};function _select_get(C,E){var B=_get_select(C),A=B.options,F,D=A.length;for(F=0;F<D;F++)if(A[F].value==E)return A[F];return null}function _select_add(C,D,B){var E=_select_get(C,D);if(E)return E;var A=C.options,F=new Option(B,D);A[A.length]=F;return F}function _select_clone(B){var A=new Option(B.text,B.value);A.setAttribute("fieldName",B.getAttribute("fieldName"));A.setAttribute("op",B.getAttribute("op"));return A}js.select.moveAll=function(G,C){var D=_get_select(G),A=_get_select(C),F=D.options,B=A.options;if(D.tagName.toLowerCase()!="select")alert("copy from items which is not a select");var E;for(E=0;E<F.length;E++)if(F[E].text!=null)B[B.length]=_select_clone(F[E]);while(F.length>0)F[0]=null};js.select.moveSelected=function(G,C){var D=_get_select(G),A=_get_select(C),F=D.options,B=A.options,E;for(E=0;E<F.length;E++)if(F[E].text!=null)if(F[E].selected){B[B.length]=_select_clone(F[E]);F[E]=null;E--}};js.select.bind=function(E,J,C){var D=_get_select(E),A=D.options,K,H=J.length;for(K=0;K<H;K++){var F=J[K],G,B;G=F[0];B=F[1];if(js.select.contains(D,G))continue;var I=new Option(B,G);if(_ary_contains(C,G))I.selected="selected";A[A.length]=I}};js.select.bindTwo=function(A,D,I,C){var K=_get_select(A),H=_get_select(D),J,G=I.length;for(J=0;J<G;J++){var E=I[J],F=E[0],B=E[1];if(_ary_contains(C,F))_select_add(H,F,B);else _select_add(K,F,B)}};js.select.moveSelectedUp=function(C){var B=_get_select(C),A=B.options,G,D=A.length;if(D<=1)return;for(G=0;G<D;G++)if(!A[G].selected)break;for(;G<D;G++){var E=A[G];if(E.selected){var F=A[G-1];A[G-1]=null;A.add(F,G)}}};js.select.moveSelectedDown=function(C){var B=_get_select(C),A=B.options,G,E=A.length;if(E<=1)return;for(G=E-1;G>=0;G--)if(!A[G].selected)break;for(;G>=0;G--){var F=A[G];if(F.selected){var D=A[G+1];A[G+1]=null;A.add(D,G)}}};js.select.removeByValueList=function(C,E){var B=$(C),A=B.options,F,D=A.length;for(F=0;F<D;F++)if(E.include(A[F].value)){A[F]=null;F--;D--}};js.select.removeSelected=function(C){var B=_get_select(C),A=B.options,E,D=A.length;for(E=0;E<D;E++)if(A[E].selected){A[E]=null;E--;D--}};js.select.add=function(D,E,B){var C=_get_select(D),A=C.options;A[A.length]=new Option(B,E)};js.select.sort=function(B){var A=_get_select(B),F=A.options,D,G,H,C=F.length;for(H=0;H<C;H++){G=false;for(var E=F.length-2;E>=H;E--)if(F[E+1].text<F[E].text){D=F[E+1];F[E+1]=null;F.add(D,E);G=true}if(!G)break}};js.select.markSelected=function(D,F){var C=_get_select(D),A=C.options,G,E=A.length,B=false;for(G=0;G<E;G++)if(A[G].value==F){A[G].selected=true;B=true}return B};js.select.getSelectedValues=function(D){var C=_get_select(D),B=C.options,F,E=B.length,A=[];for(F=0;F<E;F++)if(B[F].selected)A[A.length]=B[F].value;return A};js.select.getSelectedTexts=function(D){var C=_get_select(D),B=C.options,F,E=B.length,A=[];for(F=0;F<E;F++)if(B[F].selected)A[A.length]=B[F].text;return A};js.select.hasSelected=function(A){return js.select.getSelectedValues(A).length>0};js.select.selectAll=function(C){var B=_get_select(C),A=B.options,E,D=A.length;for(E=0;E<D;E++)A[E].selected=true};js.select.getAllValues=function(D){var C=_get_select(D),B=C.options,F,E=B.length,A=[];for(F=0;F<E;F++)A[A.length]=B[F].value;return A};js.select.getAllValuesAndTexts=function(E){var D=_get_select(E),C=D.options,H,G=C.length,B=[],F=[],A=[];for(H=0;H<G;H++){F[F.length]=C[H].value;A[A.length]=C[H].text}B[0]=F;B[1]=A;return B};js.select.getAllValueAndTextObjects=function(C){var B=_get_select(C),A=B.options,D=[];for(var E=0;E<A.length;E++)D.push({value:A[E].value,text:A[E].text});return D};js.select.getSelectedValueAndTextObjects=function(C){var B=_get_select(C),A=B.options,D=[];for(var E=0;E<A.length;E++)if(A[E].selected)D.push({value:A[E].value,text:A[E].text});return D};js.select.setAllValueAndTextObjects=function(C,D){if(!D)return;var B=_get_select(C),A=B.options;A.length=0;for(var E=0;E<D.length;E++)A.add(new Option(D[E].text,D[E].value))};js.select.setValueAndTextObjects=function(C,D){var B=_get_select(C),A=B.options;for(var E=0;E<D.length;E++)if(!($A(A).pluck("value").include(D[E].value)))A.add(new Option(D[E].text,D[E].value))};js.select.removeAll=function(C){var B=_get_select(C),A=B.options,E,D=A.length;for(E=0;E<D;E++){A[E]=null;E--;D--}};js.select.remove=function(C,E){var B=_get_select(C),A=B.options,G,D=A.length;for(G=0;G<D;G++){var F=A[G];if(F.value==E){A[G]=null;G--;D--}}};js.select.removeContained=function(C,H){var B=_get_select(C),E=_get_select(H),A=B.options,G,D=A.length;for(G=0;G<D;G++){var F=A[G];if(js.select.contains(E,F.value)){A[G]=null;G--;D--}}};js.select.addNotContained=function(C,H){var B=_get_select(C),E=_get_select(H),A=E.options,G,D=A.length;for(G=0;G<D;G++){var F=A[G];if(js.select.contains(B,F.value))continue;B.options[B.options.length]=_select_clone(F)}};js.select.addNotContains=function(A,E){var B=E.ids||E[0],D=E.showNames||E[1];for(var C=0;C<B.length;C++){if(this.contains(A,B[C]))continue;this.add(A,B[C],D[C])}};js.checkbox=function(){alert("select.js")};js.checkbox.getSelectedValueAndTextObjects=function(B){var D=$Name(B),C=[];for(var E=0;E<D.length;E++){var A=D[E];if(A.checked)C.push({value:A.value,text:A.getAttribute("text")||A.getAttribute("showName")})}return C};js.checkbox.getAllValueAndTextObjects=function(B){var D=$Name(B),C=[];for(var E=0;E<D.length;E++){var A=D[E];C.push({value:A.value,text:A.getAttribute("text")||A.getAttribute("showName")})}return C};js.checkbox.getFirstSelectedValueAndTextObject=function(B){var D=$Name(B),C=[];for(var E=0;E<D.length;E++){var A=D[E];if(A.checked)return{value:A.value,text:A.getAttribute("text")}}};js.checkbox.checkCheckboxByCheckeds=function(C,D){var B=C.pluck("value"),A;if(D.data)A=D.data.id||null;if(B.indexOf(A)!=-1)D.checked=true};js.checkbox.getAllCheckedCheckboxJson=function(){return g_checkItems};if(typeof(js)=="undefined")js=new Object;if(!js.global){js.global=new Object;if(!js.global.browser)js.global.browser=new Object;if(!js.global.browser.getType)js.global.browser.getType=function(){return navigator.appName};if(!js.global.browser.oab)js.global.browser.oab=false;if(!js.global.browser.ie)js.global.browser.ie=js.global.browser.getType()=="Microsoft Internet Explorer";if(!js.global.browser.nn)js.global.browser.nn=js.global.browser.getType()=="Netscape";if(!js.global.browser.w3c)js.global.browser.w3c=!js.global.browser.ie}(function(){var B=document.getElementsByTagName("script");js.CONTEXT_PATH="";var A="/_js/z_share";for(i=0;i<B.length;i++)if(B[i].src.indexOf(A)>=0){var C=B[i].src,D=0;if(C.indexOf("http://")==0||C.indexOf("https://")==0)D=C.indexOf("/","https://".length);js.CONTEXT_PATH=B[i].src.substring(D,B[i].src.indexOf(A))}})();var wx_dialog_uid=1,wx_dialogs={};function _wx_close_dialog(){document.body.removeChild(this.dom);delete wx_dialogs[this.dialogId]}function wx_fullscreen_dialog(I){var G="wx-dialog-"+(wx_dialog_uid++),F=document.createElement("div"),H=Prototype.Browser.IE,B;if(H)var D="(document).documentElement",B="position:absolute;left:expression("+D+".scrollLeft);top:expression("+D+".scrollTop);width:expression("+D+".clientWidth);height:expression("+D+".clientHeight);";else B="position:fixed;width:100%;height:100%;top:0px;left:0px;";B+="background:#666;padding:20px";F.style.cssText=B;var C=document.createElement("iframe");C.style.cssText="border:3px solid black;padding:0px;margin:0px;width:100%;height:100%;background-color:white;";var E=WindowUtilities.getPageSize();C.style.width=(E.windowWidth-40)+"px";C.style.height=(E.windowHeight-40)+"px";C.setAttribute("wx-dialog-id",G);C.src=I.url;F.appendChild(C);document.body.appendChild(F);var A={options:I,dom:F,dialogId:G,close:_wx_close_dialog};wx_dialogs[G]=A}function wx_get_dialog_id(){try{return window.frameElement&&window.frameElement.getAttribute("wx-dialog-id")}catch(A){}}function wx_invoke_dialog_ok(C){var B=wx_get_dialog_id();if(B){var A=window.parent.window.wx_dialogs[B];A.options.onOk&&A.options.onOk(C);A.close()}}js.get_pop_dialog_id=wx_get_dialog_id;js.invoke_pop_dialog_ok=wx_invoke_dialog_ok;js.invoke_pop_dialog_cancel=wx_invoke_dialog_cancel;function wx_invoke_dialog_cancel(C){var B=wx_get_dialog_id();if(B){var A=window.parent.window.wx_dialogs(B);A.config.onCancel&&A.config.onCancel(C);A.close()}}if(typeof(js)=="undefined")js=function(){};js.win=function(){alert("win.js")};js.win.DIALOG_FEATURES="width=500px,height=500px,status=no,center=yes";js.win.WINDOW_FEATURES={toolbar:"no",menubar:"no",location:"no",status:"no",resizable:"yes"};js.win.getExtById=function(B){if(!window.ext)return null;var C;for(C in window.ext){var A=window.ext[C];if(A.id&&A.id==B)return A}return null};function _setExt(D){if(!D)return;if(!D.length){alert("extAry="+D);window.ext[0]=D;return}var E,B=D.length;for(E=0;E<B;E++){var C=D[E];window.ext[E]=C}if(false)for(var A in D)alert(D[A].id)}js.win._dialogUseOpen=window.__autotest_hook||Prototype.Browser.WebKit||Prototype.Browser.Gecko||!window.showModalDialog;js.win.init=function(){ window.ext=new Array();if(!js.win._dialogUseOpen&&window.dialogArguments){window.extOpener=window.dialogArguments[0];_setExt(window.dialogArguments[1])}else if(window.opener&&window.opener.extArgs){_setExt(window.opener.extArgs);}else if(window.dialogArguments){window.extOpener=window.dialogArguments[0];_setExt(window.dialogArguments[1]);}};js.win._dialog=function(F,C,E,G){if(C!=null&&!C.length){alert("err_args_not_array");return}var D=js.win._dialogUseOpen;if(D)window.extArgs=C;if(!E)E=js.win.DIALOG_FEATURES;if(!G)G="__dialog__"+parseInt(Math.random()*1200000);if(D){if(Prototype.Browser.WebKit){if(!E)E="width=500px,height=500px,status=no,toolbar=no,menubar=no,location=no,center=yes";var A=window.open(F,G,E);try{A.focus()}catch(B){}}else{E+=",modal";E=E.replace("center","centerscreen");window.open(F,G,E)}}else{E=E.replace("width","dialogWidth");E=E.replace("height","dialogHeight");E=E.replace("left","dialogLeft");E=E.replace("top","dialogTop");E=E.replace(/,/g,";");if(E.toLowerCase().indexOf("status")<0){if(E.length>0)E+=";";E+="status:no"}try{return window.showModalDialog(F,[window,C],E)}catch(B){js.win.getOpener().showModalDialog(F,[window,C],E)}}};js.win.dialog=function(D,A,B,F){if(!D)alert("CAN_err_dialog_no_url_arg");if(D.indexOf("/")!=0&&D.indexOf("://")<0){var C=window.location.href,E=C.indexOf("?");if(E>=0)C=C.substring(0,E);E=C.lastIndexOf("/");if(E>0)D=C.substring(0,E+1)+D}js.win._dialog((js.CONTEXT_PATH||"")+"/_js/dialog_frame.jsp?dlgUrl="+encodeURIComponent(D),A,B,F)};js.win.Notification=Class.create();Object.extend(js.win.Notification.prototype,{initialize:function(){this.queue=[]},show:function(B,A){if(this.popObj){var B=B||300,A=A||94,C=js.dimTool.getWinWidth()-B,D=js.dimTool.getWinHeight()-A;this.popObj.show(C,D,B,A,document.body);this._onshow();if(window.createPopup)setTimeout(function(){if(this.shown)this.show(B,A)}.bind(this),50000)}},cancel:function(){if(this.popObj)if(this.popObj.cancel)this.popObj.cancel();else if(this.popObj.hide){this.popObj.hide();this._onclose()}},_onshow:function(){this.shown=true},_onclick:function(){window.focus();if(this.onclick)this.onclick();this.shown=false;this.cancel()},_onclose:function(){this.queue.shift();if(this.shown){this.shown=false;if(this.onclose)this.onclose()}this.next()},add:function(A){this.queue.push(A);if(!this.shown)this.next()},remove:function(A){for(var B=0;B<this.queue.length;B++)if(this.queue[B].id==A){this.queue.splice(B,1);if(B==0){this.onclose=null;this.cancel()}}},next:function(){var A=this.queue[0];if(A)this.open(A.imgUrl,A.title,A.content,A.onclick,A.onclose)},reopen:function(B,C,A,E,D){if(this.shown){this.onclose=this.open.bind(this,B,C,A,E,D);this.cancel()}else this.open(B,C,A,E,D)},open:function(B,D,A,G,F){if(window.webkitNotifications){if(window.webkitNotifications.checkPermission()==1){var E=document.getElementById("js.win.notificationPermissionDiv");if(!E){E=document.createElement("div");E.id="js.win.notificationPermissionDiv";E.style.cssText="background-color:#F9EDBE;border:1px solid #F0C36D;color:#222;font-weight:bold;padding: 9px 15px;font-size:12px;width:150px;height:40px;position:absolute;bottom:100px;right:50px;background-color:";E.innerHTML="\u4e3a\u4e86\u65b9\u4fbf\u60a8\u7684\u4f7f\u7528\uff0c\u8bf7<a href=\"javascript:window.webkitNotifications.requestPermission(function(){document.getElementById('js.win.notificationPermissionDiv').style.display='none';})\" style=\"font-size:14px;cursor:pointer;color:#15C\">\u70b9\u51fb\u6b64\u5904</a>\u5e76\u4e14\u5141\u8bb8\u672c\u7f51\u7ad9\u663e\u793a\u684c\u9762\u901a\u77e5";document.body.appendChild(E)}else E.style.display="block";return}if(this.shown)return;this.popObj=window.webkitNotifications.createNotification(B,D,A);this.onclick=G;this.onclose=F;this.popObj.ondisplay=this._onshow.bind(this);this.popObj.onclick=this._onclick.bind(this);this.popObj.onerror=this.onerror||Prototype.emptyFunction;this.popObj.onclose=this._onclose.bind(this)}else if(window.createPopup){this.popObj=this.popObj||window.createPopup();var C=this.popObj.document;this.onclick=G;this.onclose=F;C.parentWindow.opener=window;C.write("<html><head><style>div{position:absolute;}</style></head>");C.write("<body style=\"padding:0px;border:1px solid;margin:0px;overflow:hidden;\">");C.write("<div style=\"width:300px;height:94px;\">");C.write("<div style=\"position:relative;width:100%;height:18px;background-color:rgb(245,245,245);text-align:right;\">");C.write("  <div style=\"right:6px;top:-6px;cursor:default;font-size:28px;font-family:Arial;color:gray;\" onmouseover=\"this.style.color='black'\" onmouseout=\"this.style.color='gray'\" onclick=\"window.opener.js.win.notification.cancel()\">&times;</div>");C.write("</div>");C.write("<div style=\"position:relative;width:100%;height:3px;font-size:0px;background-color:rgb(228,228,228);\"></div>");C.write("<div style=\"cursor:pointer;position:relative;width:100%;height:73px;\" onclick=\"window.opener.js.win.notification._onclick();\">");C.write("<img src=\""+B+"\" style=\"width:36px;height:36px;position:absolute;left:14px;top:14px;\" />");C.write("<div style=\"left:65px;height:15px;width:235px;padding-top:3px;font-size:13px;font-weight:bold;\">"+D+"</div>");C.write("<div style=\"left:65px;top:20px;width:235;font-size:13px;\">"+A+"</div>");C.write("</div>");C.write("</div>");C.write("</body>");C.write("</html>");C.close()}this.show()}});js.win.notification=new js.win.Notification();Event.observe(document,"keypress",function(A){var B=A.keyCode;if(B==116){js.win.notification.onclose=null;js.win.notification.cancel()}});Event.observe(window,"unload",function(){js.win.notification.onclose=null;js.win.notification.cancel()});js.win.popup=function(C,B,D){if(!window.createPopup)return{hide:function(){},show:function(){}};if(!B)B=window.createPopup();D=D||{};D.width=D.width||203;D.height=D.height||135;D.left=D.left||js.dimTool.getWinWidth()-D.width;D.top=D.top||js.dimTool.getWinHeight()-D.height;var A=B.document;A.parentWindow.opener=window;new js.Ajax().setUrl(C).setOnComplete(function(){B.show(D.left,D.top,D.width,D.height,document.body)}).updateContent(A.body);return B};js.win.prompt=function(D,A,B,C){if(!C)C="big";if(C=="small"){var E=js.CONTEXT_PATH+"/_js/prompt_dialog_small.jsp?promptMsg="+encodeURIComponent(D)+"&defaultMsg="+encodeURIComponent(A)+"&UTF8Request=true";js.win.dialog(E,[B])}else{E=js.CONTEXT_PATH+"/_js/prompt_dialog.jsp?promptMsg="+encodeURIComponent(D)+"&defaultMsg="+encodeURIComponent(A)+"&UTF8Request=true";js.win.dialog(E,[B])}};js.win.getElements=function(){var A=new Array(),D,C=arguments.length;for(D=0;D<C;D++){var B=arguments[D];if(typeof(B)=="string")B=document.getElementById(arguments[D]);if(!B)alert("err_missing_element::"+arguments[D]);A[A.length]=B}return A};js.win.getOpener=function(A){if(!A)A=window.top;if(A.opener&&!A.opener.closed)return A.opener;if(A.extOpener&&!A.extOpener.closed)return A.extOpener;return null};js.win._optionsToFeature=function(B){var A="";for(key in B)A+=key+"="+B[key]+",";return A};js.win.open=function(D,B,E){B=B||"_blank";E=(E=="W")?"resizable=yes,width=750px,height=470px,status=no,center=yes":E;if(E&&typeof(E)!="string")features=js.win._optionsToFeature(E);else features=E;var A=js.win.getSessionWindow(),C;if(B&&features)C=A.open(D,B,features);else if(B)C=A.open(D,B);else C=A.open(D);if(C)C.opener=window;return C};js.win.getSessionWindow=function(){if(!window.showModalDialog)return window;if(!window.top.ext)return window;var A=js.win.getOpener(window.top);if(!A)return window.top;while(A.top.ext)A=js.win.getOpener(A.top);return A};js.win.clear=function(){window.ext=[]};js.win.reload=function(A){A=A||window;A.location.replace(A.location)};js.win.refreshTopOpener=function(){var A=js.win.getOpener(window.top);if(A)js.win.reload(A)};js.win.BASE_WINDOW_NAME="baseWindow"+(js.CONTEXT_PATH||"").replace("/","_");js.win.getBaseWindow=function(B){if(!B)var B=window;var A;while(B!=null&&!B.closed){if(B.top.name&&B.top.name.indexOf(js.win.BASE_WINDOW_NAME)==0)return B.top;A=B;B=js.win.getOpener(B.top)}return A.top};js.win.setBaseWindow=function(A){if(!A)var A=window;A.top.name=js.win.BASE_WINDOW_NAME+new Date().getTime()};js.win.isBaseWindow=function(A){if(!A)var A=window;return A.name.indexOf(js.win.BASE_WINDOW_NAME)==0};js.win.fixPage=function(A){var B=window.top.document.body;if(typeof(window.top.dialogHeight)!="undefined"){window.top.dialogHeight=(parseInt(window.top.dialogHeight)+A.clientHeight-B.clientHeight)+"px";window.top.dialogWidth=(parseInt(window.top.dialogWidth)+A.clientWidth-B.clientWidth)+"px"}else window.top.resizeBy(A.clientWidth-B.clientWidth,A.clientHeight-B.clientHeight);A.style.width="100%";A.style.height="100%"};js.win.resizeTop=function(B,A){window.top.resizeTo(B,A)};js.win.setBodyHeight=function(A){if(typeof(window.top.dialogHeight)!="undefined")window.top.dialogHeight=A+"px";else window.top.resizeTo(window.top.width,A)};function _wx_get_dialog_id(){try{return window.frameElement&&window.frameElement.getAttribute("wx-dialog-id")}catch(A){}}js.win.getDialog=function(){var A=window.frameElement;if(A&&A.id&&A.id.endsWith("_content")){var B=A.id.substring(0,A.id.length-"_content".length);return window.parent.Windows.getWindow(B)}var C=_wx_get_dialog_id();if(C)return window.parent.window.js.win.wx_dialogs[C];return null};js.win.getDialogArgs=function(){var A=js.win.getDialog();if(A)return A.dialogArgs;return window.top.ext};js.win.invokeCallback=function(B,A){var C=js.win.getDialogArgs();if(!A)A=0;if(C&&C[A])return C[A](B)};js.win.clickDialogOk=function(B,A){var C=js.win.getDialogArgs();if(C&&C[0])if(C[0](B,A)!==true)js.win.close()};js.win.clickDialogCancel=function(A){if(js.win.invokeCallback(A,1)!==true)js.win.close()};var _wx_seq=0;function wx_gen_id(){var A="wx_win_"+_wx_seq;while($(A)){_wx_seq++;A="wx_win_"+_wx_seq}return A}js.win.dialogEx=function(C,A,D){var B=new Window(wx_gen_id(),Object.extend({className:"std",url:C,width:400,height:400},D||{}));B.dialogArgs=A;B.setDestroyOnClose();B.showCenter(true)};js.win.close=function(){var A=js.win.getDialog();if(A)A.hide();else window.top.close()};if(typeof(js)=="undefined")js=function(){alert("js")};js.xml=function(){alert("xml.js")};js.xml.encode=function(A){if(A==null)return null;if(A.toString)A=A.toString();else return A;A=A.replace(/&/g,"&amp;");A=A.replace(/"/g,"&quot;");A=A.replace(/</g,"&lt;");A=A.replace(/>/g,"&gt;");A=A.replace(/'/g,"&#146;");return A};function getDomDocumentPrefix(){if(getDomDocumentPrefix.prefix)return getDomDocumentPrefix.prefix;var C=["MSXML2","Microsoft","MSXML","MSXML3"],B;for(var D=0;D<C.length;D++){try{B=new ActiveXObject(C[D]+".DomDocument");return getDomDocumentPrefix.prefix=C[D]}catch(A){}}throw new Error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301XML\u89e3\u6790")}js.xml.createXmlDocument=function(){try{if(document.implementation&&document.implementation.createDocument){var B=document.implementation.createDocument("","",null);if(B.readyState==null){B.readyState=1;B.addEventListener("load",function(){B.readyState=4;if(typeof B.onreadystatechange=="function")B.onreadystatechange()},false)}return B}if(window.ActiveXObject)return new ActiveXObject(getDomDocumentPrefix()+".DomDocument")}catch(A){}throw new Error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301XML\u89e3\u6790")};js.xml.loadXML=function(A){var B=js.xml.createXmlDocument();B.loadXML(A);return B};if(window.DOMParser&&window.XMLSerializer&&window.Node&&Node.prototype&&Node.prototype.__defineGetter__&&!XMLDocument.prototype.loadXML){XMLDocument.prototype.loadXML=Document.prototype.loadXML=function(A){var B=(new DOMParser()).parseFromString(A,"text/xml");while(this.hasChildNodes())this.removeChild(this.lastChild);for(var C=0;C<B.childNodes.length;C++)this.appendChild(this.importNode(B.childNodes[C],true));return this};XMLDocument.prototype.__defineGetter__("xml",function(){try{return(new XMLSerializer()).serializeToString(this)}catch(A){alert("not supported xml getter")}});Document.prototype.__defineGetter__("xml",function(){return(new XMLSerializer()).serializeToString(this)});XMLDocument.prototype.selectSingleNode=function(B){var A=this.evaluate(B,this,null,0,null);return A.iterateNext()};function __XMLNodes(A){this.length=0;this.pointer=0;this.array=new Array();var B=0;while((this.array[B]=A.iterateNext())!=null)B++;this.length=this.array.length}__XMLNodes.prototype.nextNode=function(){this.pointer++;return this.array[pointer-1]};__XMLNodes.prototype.reset=function(){this.pointer=0};XMLDocument.prototype.selectNodes=function(C){var A=this.evaluate(C,this,null,0,null),B=new __XMLNodes(A);return B}}js.xml.serialize=function(A){if(!A)return"";if(window.XMLSerializer)return(new XMLSerializer()).serializeToString(A);else return A.xml};js.xml.getInnerXml=function(C){if(!C)return"";switch(C.nodeType){case 3:return C.nodeValue;case 4:return C.nodeValue}var D,B=C.childNodes.length,A=[];for(D=0;D<B;D++)A[A.length]=js.xml.serialize(C.childNodes[D]);return A.join("")};function getXmlHttpPrefix(){if(getXmlHttpPrefix.prefix)return getXmlHttpPrefix.prefix;var C=["MSXML2","Microsoft","MSXML","MSXML3"],B;for(var D=0;D<C.length;D++){try{B=new ActiveXObject(C[D]+".XmlHttp");return getXmlHttpPrefix.prefix=C[D]}catch(A){}}throw new Error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301XmlHttp")}js.xml.createXmlHttp=function(){try{if(window.XMLHttpRequest){var B=new XMLHttpRequest();if(B.readyState==null){B.readyState=1;B.addEventListener("load",function(){B.readyState=4;if(typeof B.onreadystatechange=="function")B.onreadystatechange()},false)}return B}if(window.ActiveXObject)return new ActiveXObject(getXmlHttpPrefix()+".XmlHttp")}catch(A){}throw new Error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301XmlHttp")};function _xml_http_get(){return js.xml.createXmlHttp()}function _xml_http_recycle(A){}js.xml.syncCall=function(F,E,D){if(!E)E=null;var C=_xml_http_get();C.open("POST",F,false);try{C.send(E)}catch(B){alert(B.description);_xml_http_recycle(C);return null}if(D){var A=D(C);if(typeof(A)!="undefined"){_xml_http_recycle(C);return A}}return{status:C.status,responseText:C.responseText}};js.xml.asyncCall=function(F,D,C,E){if(!D)D=null;if(!E)E="POST";var B=_xml_http_get();B.open(E,F,true);if(typeof(D)=="string")B.setRequestHeader("Content-Type","application/x-www-form-urlencoded");else if(D){B.setRequestHeader("Content-Type","text/xml");D=js.xml.serialize(D)}B.onreadystatechange=function(){if(B.readyState==4){C({status:B.status,responseText:B.responseText});_xml_http_recycle(B)}};try{B.send(D)}catch(A){alert(A.description)}void(0)};js;if(!js)js=new Object;if(!js.ajax)js.ajax=new Object;function wx_json_decode(s){if(!s)return s;if(s.indexOf("for(;;);")==0)s=s.substring("for(;;);".length);if(window.JSON)return JSON.parse(s);return eval("("+s+")")}var PROPS_SEPARATOR="<div style='display:none'>@@@!edu.thu.web.UiProps!@@@";js.ajaxExceptionHandlers=[];function ajax_xmlhttp_wrap(A){var B=(A.responseText||"").split(PROPS_SEPARATOR);this.responseText=B[0];this.props=A.props||{};if(B[1])this.props=wx_json_decode(B[1]);this.getResponseHeader=function(B){return A.getResponseHeader(B)};this.updateProps=function(){};if(this.props&&window.set_props)this.updateProps=function(){window.set_props(this.props)}}var WxClass=Class;js.Ajax=Class.create();Object.extend=function(B,A){for(property in A)B[property]=A[property];return B};Function.prototype.bind=function(){var A=this,B=$A(arguments),C=B.shift();return function(){return A.apply(C,B.concat($A(arguments)))}};Object.extend(js.Ajax.prototype,{initialize:function(A){this.params="";this.options={evalScripts:true,method:"post",okMessage:"",failMessage:"",failFatal:true,loadingPane:new js.ajax.InfoPane("ajax-loading-pane"),failPane:new js.ajax.InfoPane("ajax-fail-pane"),persistParams:[]};this.options.onException=this.handleException.bind(this);Object.extend(this.options,A||{});this.loadingPane=this.options.loadingPane;this.valid=true;this.failPane=this.options.failPane;this.contextPath="";this.isAjaxObj=true},copy:function(A){var B=new js.Ajax();Object.extend(B,this);B.options=Object.extend({},this.options);if(A)B.options.persistParams=[];else B.options.persistParams=this.options.persistParams.findAll(function(){return true});B.valid=true;return B},handleException:function(C,B){try{var D="ERROR:"+B.message;if(B.lineNumber)D+="<br/>["+B.lineNumber+"]"+B.fileName;this.options.failPane.setContent(D)}catch(A){}throw B},setOkMessage:function(A){this.options.okMessage=A;return this},setFailMessage:function(A){this.options.failMessage=A;return this},setFailFatal:function(A){this.options.failFatal=A;return this},setLoadingPaneId:function(A){this.loadingPane=new js.ajax.InfoPane(A);return this},setLoadingPane:function(A){this.loadingPane=A||new js.ajax.InfoPane();return this},setFailPaneId:function(A){this.failPane=new js.ajax.InfoPane(A);return this},setFailPane:function(A){this.failPane=failPane||new js.ajax.InfoPane();return this},setContextPath:function(A){this.contextPath=A;return this},setUrl:function(A){this.url=A;return this},setTpl:function(A){this.url=js.CONTEXT_PATH+"/tpl.jsp?tpl="+encodeURIComponent(A);return this},setTplPart:function(A){if(!A)return this;this.tplPart=$A(arguments).join(",");return this},setObjectName:function(A){this.objectName=A;return this},setObjectEvent:function(A){this.objectEvent=A;return this},setEventTarget:function(A){this.eventTarget=A;return this},setBizAction:function(A){this.setObjectEvent("BizAction");this.addParam("_bizActionId",A);return this},addParam:function(B,A){if(this.params.length>0)this.params+="&";this.params+=encodeURIComponent(B)+"="+encodeURIComponent(A);return this},addParamList:function(B,C){if(!C)return this;var D,A=C.length;for(D=0;D<A;D++)this.addParam(B,C[D]);return this},addParamAsList:function(B){if(!B)return this;var C,A=B.length;for(C=0;C<A;C++)this.addParam(B[C][0],B[C][1]);return this},q:function(A,B){this.addParam("queryField",A);this.addParam("queryValue",B);return this},p:function(A){return this.addParamMap(A)},addParamMap:function(A){if(!A)return this;for(key in A)this.addParam(key,A[key]);return this},addParamsMap:function(A){if(!A)return this;for(key in A)this.addParamList(key,A[key]);return this},addParams:function(A){if(A)if(A.constructor==Array)this.appendQueryString(A.map(function(A){return encodeURIComponent(A[0])+"="+encodeURIComponent(A[1])}).join("&"));else this.appendQueryString($H(A).toQueryString());return this},addElement:function(B){var C=$(B);if(!C||C.disabled)return this;if(!js.validate.validElement(C)){this.valid=false;return this}var A=Form.Element.serialize(C);if(this.params.length>0)this.params+="&";this.params+=A;return this},addForm:function(A,C){return this.addContainer(A,C);if(!A)return this;_form_onsync(A);if(!C)if(!js.validate.validForm(A)){this.valid=false;return this}var B=_form_serialize(A);if(!B)return this;if(this.params.length>0)this.params+="&";this.params+=B;return this},addContainer:function(C,D,B){if(!C)return this;C=$(C);if(!C)return this;_container_onsync(C);if(!D)if(!js.validate.validContainer(C)){this.valid=false;return this}var A=_container_serialize(C,[],B).join("&");if(!A)return this;if(this.params.length>0)this.params+="&";this.params+=A;return this},addTableWithValue:function(A,D,F,G){if(!$(A)){alert("err_missing_element"+A);return}A=$(A);_container_onsync(A);var J=A.tBodies[0].rows,I,E=J.length;for(I=0;I<E;I++){var H=J[I],C=$Name(D,H)[0];if(!C)continue;if(!F.include($F(C)))continue;if(!G)if(!js.validate.validContainer(H)){this.valid=false;return this}var B=_container_serialize(H).join("&");if(B){if(this.params.length>0)this.params+="&";this.params+=B}}return this},addProps:function(A){if(A&&window.get_props)this.addParam("!edu.thu.web.UiProps",window.get_props(A));return this},_parseParams:function(B){var A={};B.split("&").each(function(D){var B=D.split("="),C=decodeURIComponent(B[0]),E=A[C];if(!E){E=[];A[C]=E}E.push(decodeURIComponent(B[1]))});return A},_parseParamsAsList:function(B,A){B.split("&").each(function(D){var B=D.split("="),C=decodeURIComponent(B[0]);if(C)A.push([C,decodeURIComponent(B[1])])});return A},getParamsAsList:function(){var C=this.buildUrl(),B=C.indexOf("?")>0?C.substring(C.indexOf("?")+1):"",A=[];this._parseParamsAsList(this.params,A);if(B)this._parseParamsAsList(B,A);return A},getParamsAsMap:function(C){var D=this.buildUrl(),B=D.indexOf("?")>0?D.substring(D.indexOf("?")+1):"",A={};Object.extend(A,this._parseParams(this.params));if(B&&!C)Object.extend(A,this._parseParams(B));return A},getParamsAsJson:function(){var C=this.getParamsAsMap();if(!C)return null;var A={};for(var D in C){var B=C[D];if(D.indexOf("placeholder_")==0)continue;if(C["placeholder_"+D])A[D]=B;else A[D]=B[0]}return A},getParamsAsJsonString:function(){return JSON.stringify(this.getParamsAsJson())},appendQueryString:function(A){if(!A)return this;if(this.params.length>0)this.params+="&";this.params+=A;return this},setOptions:function(A){Object.extend(this.options,A||[]);return this},setCacheId:function(A){this.cacheId=A;return this},setOnComplete:function(A){this.onComplete=A;return this},setOnSuccess:function(A){this.onSuccess=A;return this},setOnFailure:function(A){this.onFailure=A;return this},buildUrl:function(){if(!this.url)this.url="";var A=this.url;if(A.indexOf("?")<0)A+="?";if(this.tplPart)A+="&tplPart="+this.tplPart;if(this.objectName)A+="&objectName="+this.objectName;if(this.objectEvent)A+="&objectEvent="+this.objectEvent;if(this.eventTarget)A+="&eventTarget="+this.eventTarget;return A},buildOptions:function(){var G=Object.extend(new Object(),this.options),D=G.onLoading||Prototype.emptyFunction,C=this.loadingPane;G.onLoading=function(A){if(A.readyState!=1)return;D(A)};var B=this.onComplete||Prototype.emptyFunction;G.onComplete=function(A){C.hide();B(A)};var E=this.onFailure||Prototype.emptyFunction,F=this.failPane;G.onFailure=function(A){var B=A.getResponseHeader("WX-ERRORCODE");if(B&&js.ajaxExceptionHandlers)for(var C=0;C<js.ajaxExceptionHandlers.length;C++)if(js.ajaxExceptionHandlers[C](B)==true)return;F.setContent(A.responseText);E(A)};if(this.onSuccess)G.onSuccess=this.onSuccess;if(this.params){var A=this.params;if(this.options.encoder)A=this.options.encoder.transformQueryString(this.params,this.options.cryptFields);G.parameters=A}G.failPane=this.failPane;return G},preSend:function(){if(typeof(ajax_clear_err)!="undefined")ajax_clear_err();var A=new Date((new Date()).getTime()+1000);document.cookie="wxlib=wxlib;"},request:function(B){if(!this.valid){void(0);return}this.preSend();var E=this.buildOptions();if(B){var C=E.onSuccess||Prototype.emptyFunction;E.onSuccess=function(D){D=new ajax_xmlhttp_wrap(D);var A=D.responseText;B(D.responseText);D.updateProps();C(D)};E.asynchronous=true;this.loadingPane.show();return new Ajax.Request(this.buildUrl(),E)}else{E.asynchronous=false;this.loadingPane.show();var D=new Ajax.Request(this.buildUrl(),E);this.loadingPane.hide();var A=new ajax_xmlhttp_wrap(D.transport);A.updateProps();if(D.responseIsSuccess()){(E.onSuccess||Prototype.emptyFunction)(A);(E.onComplete||Prototype.emptyFunction)(A);return A.responseText}else{(E.onFailure||Prototype.emptyFunction)(A);(E.onComplete||Prototype.emptyFunction)(A);void(0)}}},updateContent:function(B){if(!this.valid)return;this.preSend();var A=this.buildOptions(),C=$A(arguments);this.loadingPane.show();return new js.ajax.Updater(C,this.buildUrl(),A,this.cacheId)},callRemote:function(A){if(!this.valid){void(0);return}this.preSend();if(!this.url)this.url=js.CONTEXT_PATH+"/json.jsp";var F=this.buildOptions(),B=F.onSuccess||Prototype.emptyFunction,C=this,E=function(G){var J=G.getResponseHeader("Content-type");if(J!=null&&J.indexOf("text/json")>=0){try{var E=new ajax_xmlhttp_wrap(G),H,I=js.str.trim(E.responseText);H=wx_json_decode(I);if(window.__autotest_ajaxCallbackFunc)window.__autotest_ajaxCallbackFunc(C,H);if(C.options.okMessage&&!C.inAjaxPipe)alert(C.options.okMessage);E.updateProps();A(H);B();return H}catch(D){C.loadingPane.hide();throw D}}else{(F.onFailure||Prototype.emptyFunction)(G);void(0)}};if(A){F.onSuccess=E;F.asynchronous=true;this.loadingPane.show();return new Ajax.Request(this.buildUrl(),F)}else{F.asynchronous=false;this.loadingPane.show();var D=new Ajax.Request(this.buildUrl(),F);this.loadingPane.hide();A=Prototype.emptyFunction;return E(D.transport)}},openWin:function(){if(!this.valid)return;var A=this.buildUrl();if(A.indexOf("?")<0)A+="?";A+="&UT8Request=true&"+this.params;return js.win.open(A)},postForm:function(E){if(!this.valid){void(0);return}this.preSend();var A=document.createElement("form"),H=this.buildUrl();A.action=H;A.method="post";if(E)A.target=E;var F=this.getParamsAsMap(true);for(var C in F){var G=F[C],I,D=G.length;for(I=0;I<D;I++){var B=document.createElement("input");B.name=C;B.type="hidden";B.value=G[I];A.appendChild(B)}}document.body.appendChild(A);A.submit()},updateWindow:function(B){if(!this.valid)return;this.preSend();var C=this.buildOptions(),A=C.onComplete||Prototype.emptyFunction;C.onComplete=function(C){Element.show(B);A(C)};return new js.ajax.Updater(B,this.buildUrl(),C,this.cacheId)},replace:function(A){}});js.AjaxPipe=Class.create();Object.extend(js.AjaxPipe.prototype,{initialize:function(A){this.options=A||{};this.commands=[];this.vars={};this.resultMessage=[]},setFailMessage:function(A){this.options.failMessage=A;return this},setSuccessMessage:function(A){this.options.successMessage=A;return this},add:function(A,B){if(A.isAjaxObj)A.inAjaxPipe=true;if(B)this.commands.push(function(A){if(this.commands[0].isAjaxObj)this.commands[0].addParam(B,A)}.bind(this));this.commands.push(A);return this},addList:function(A){A.each(function(A){this.add(A)}.bind(this));return this},keepReturnValue:function(A){this.add(function(B){this.vars[A]=B}.bind(this));return this},getFirstAjax:function(){return this.commands.find(function(A){return A.isAjaxObj})},useVar:function(A,B){this.add(function(){var C=this.getFirstAjax();if(!C)alert("CAN_err_not_ajax_obj::"+this.commands.inspect());C.addParam(B,this.vars[A])}.bind(this));return this},copy:function(){var A=new js.AjaxPipe();A.options=Object.extend({},options||{});A.commands=this.commands.toArray();return A},execute:function(){this._execute()},_execute:function(D){if(this.commands.length<=0){var C=this.options.successMessage;if(!C)C=this.resultMessage.join("\r\n");if(C)alert(C);return}for(var E=0;E<this.commands.length;E++){var A=this.commands[E];if(A.isAjaxObj)if(!A.valid){void(0);return}}if(!this.shouldStop){A=this.commands[0];this.commands=this.commands.slice(1);if(A.isAjaxObj){var B=A.options.onFailure;A.setOnFailure(function(C){if(A.options.failFatal){this.shouldStop=true;var E=(A.options.failMessage||this.options.failMessage);if(E){this.resultMessage.push(E);E=this.resultMessage.join("\r\n")}if(E)alert(E);if(B)B(C)}else{if(A.options.failMessage)this.resultMesssage.push(A.options.failMessage);this._execute(D)}}.bind(this));A.callRemote(function(B){if(A.options.okMessage)this.resultMessage.push(A.options.okMessage);this._execute(B)}.bind(this))}else{A(D,this.vars,this);this._execute(D)}}}});var AjaxBo={log:function(A){if($("debug_msg"))$("debug_msg").value=A+"\n"+$("debug_msg").value},mixin:function(B){var A=this.options;if(B.prototype)Object.extend(this.prototype,B.prototype);Object.extend(this,B);if(B.options)Object.extend(A,B.options);this.options=A;return this},getPersistParam:function(B){var A=this.options.persistParams.find(function(A){if(A[0]==B)return true});if(A)return A[1];return null},copy:function(A){var B=new Object();Object.extend(B,this);B.prototype=this.prototye;B.options={};Object.extend(B.options,this.options);if(A)B.options.persistParams=[];else B.options.persistParams=this.options.persistParams.findAll(function(){return true});return B},removePersistParams:function(A){if(typeof(A)=="string")A=[A];this.options.persistParams=this.options.persistParams.findAll(function(B){return!A.include(B[0])});return this},replacePersistParam:function(B,A){this.removePersistParams(B);this.options.persistParams.push([B,A]);return this},getPersistArgStr:function(){return this.options.persistParams.map(function(A){return encodeURIComponent(A[0])+"="+encodeURIComponent(A[1])}).join("&")},buildAjax:function(A,C){var E=this.options.persistParams;if(C){var B=$H(C).keys();E=E.findAll(function(A){return!B.include(A[0])})}var D=new js.Ajax(this.options).setContextPath(js.CONTEXT_PATH).setObjectName(A||this.options.objectName).addParams(C).addParamAsList(E);if(window._btn_text)D.addParam("_action_button_text",window._btn_text);return D},buildTopUrl:function(B,E,C){var F=this.options.persistParams;if(E&&!E[0]){var D=$H(E).keys();F=F.findAll(function(A){return!D.include(A[0])})}var A=F.map(function(A){return encodeURIComponent(A[0])+"="+encodeURIComponent(A[1])}).join("&"),G=js.CONTEXT_PATH+(this.options[B]||B)+"&objectName="+encodeURIComponent(C||this.options.objectName)+"&UTF8Request=true";if(A)G+="&"+A;if(E)if(E[0]&&E[0].length==2)G+="&"+E.map(function(A){return encodeURIComponent(A[0])+"="+encodeURIComponent(A[1])}).join("&");else G+="&"+$H(E).toQueryString();return G},buildUrl:function(A,C,B){return this.buildTopUrl(A,C,B)},makeUrlBuilder:function(A,C,B){var D=new js.Url({path:js.CONTEXT_PATH+this.options[A]});this.options.persistParams.each(function(A){D.append(A[0],A[1])});D.objectName(B||this.options.objectName);if(C)alert("not implmented eventArgs param");return D}};js.ajax.InfoPane=Class.create();Object.extend(js.ajax.InfoPane.prototype,{initialize:function(A){this.id=A},exists:function(){return $(this.id)!=null},show:function(){var A=$(this.id);if(A)Element.show(A)},hide:function(){var A=$(this.id);if(A)Element.hide(A)},setContent:function(content,show){var elm=$(this.id);if(!elm)return;var contentElm=$(this.id+"-content");if(contentElm)Element.update(contentElm,content);else Element.update(elm,content);if(elm.getAttribute("onchange"))eval(elm.getAttribute("onchange"));if(show)this.show()}});js.ajax.FakeXmlHttpRequest=Class.create();Object.extend(js.ajax.FakeXmlHttpRequest.prototype,{initialize:function(A,B){this.responseText=A;this.responseXml=B},setRequestHeader:function(){},open:function(){},send:function(){if(this.onreadystatechange){this.readyState=2;this.onreadystatechange();this.readyState=3;this.onreadystatechange();this.status=200;this.readyState=4;this.onreadystatechange()}}});js.ajax.MultiUpdater=Class.create();Object.extend(js.ajax.MultiUpdater.prototype,{initialize:function(E,D){try{var C=this._getInnerHtml(D),F,B=C.length;if(B!=E.length)return;for(F=0;F<B;F++)if(E[F].setContent)E[F].setContent(C[F]);else Element.update(E[F],C[F])}catch(A){alert(A)}},_getInnerHtml:function(B){var A=[],G=0,D=B.indexOf(">")+1,E=B.lastIndexOf("</"),C=B.substring(D,E);while(C.length>0){var F=this._getTplNodeInfo(C);if(!F)break;A[G++]=F[0];C=F[1]}return A},_getTplNodeInfo:function(C){var B=[],F=C.indexOf("<tplPart");if(F==-1)return null;var C=C.substring(F),D=C.indexOf(">")+1,E=C.indexOf("</tplPart>"),A=C.substring(D,E);B[0]=A;B[1]=C.substring(E+"</tplPart>".length);return B}});js.ajax.Updater=Class.create();Object.extend(Object.extend(js.ajax.Updater.prototype,Ajax.Updater.prototype),{initialize:function(C,D,E,A){E=E||{};if(C.constructor==Array)if(C.length<=1)C=C[0];else E.insertion=js.ajax.MultiUpdater;this.containers={success:C,failure:C};this.transport=this._getTransport(A);this.setOptions(E);var B=this.options.onComplete||Prototype.emptyFunction;this.options.onComplete=(function(){this.updateContent();B(this.transport)}).bind(this);this.request(D)},updateContent:function(){if(this.transport.readyState!=4)return;var B=this.responseIsSuccess()?this.containers.success:this.containers.failure,C=new ajax_xmlhttp_wrap(this.transport),A=C.responseText;if(!this.options.evalScripts)A=A.stripScripts();if(this.responseIsSuccess()||!this.options.failPane.exists()){if(B)if(this.options.insertion)new this.options.insertion(B,A);else if(B.setContent)B.setContent(A);else Element.update(B,A)}C.updateProps();if(js.controlManager)js.controlManager.callInits();if(this.responseIsSuccess())if(this.onComplete)setTimeout(this.onComplete.bind(this),10)},_getTransport:function(A){return Ajax.getTransport()}});function _form_onsync(form){var elements=Form.getElements($(form));for(var i=0;i<elements.length;i++){var elm=elements[i],onsync=elm.getAttribute("onsync");if(onsync)eval(onsync)}}function _form_serialize(C){var E=Form.getElements($(C)),D=new Array();for(var F=0;F<E.length;F++){var B=E[F];if(B.disabled)continue;var A=Form.Element.serialize(B);if(A)D.push(A)}return D.join("&")}function iframe_serialize(B){var A=[],C=(B.contentDocument||B.Document);if(C.body)_container_serialize(C.body,A);return A.join("&")}function json_serialize(B,A){return encodeURIComponent(B)+"="+encodeURIComponent(new js.Ajax().addContainer(A,false,true).getParamsAsJsonString())}function list_serialize(D,C){var F=[],G,E=C.childNodes.length;for(G=0;G<E;G++){var B=C.childNodes[G];if(B.nodeType!=1)continue;var A=container_to_json(B);F.push(A)}return encodeURIComponent(D)+"="+encodeURIComponent(JSON.stringify(F))}function container_to_json(B,C){B=$(B);if(!B)return;_container_onsync(B);if(!C)if(!js.validate.validContainer(B))return;var A=_container_serialize(B).join("&");return new js.Ajax().appendQueryString(A).getParamsAsJson()}function table_to_json(C,B){C=$(C);if(!C)return;var A=[],D=C.tBodies[0],G=D.rows,I,F=G.length;for(I=0;I<F;I++){var E=G[I];if(E.disabled||E.getAttribute("disabled")=="true")continue;var H=container_to_json(E,true);if(B&&(!H||!H[B]))continue;A.push(H)}return A}function table_serialize(B,A){return encodeURIComponent(B)+"="+JSON.stringify(table_to_json(A))}function _container_serialize(container,ret,skipRoot){if(!ret)ret=[];if(container.nodeType!=1||!container.getAttribute)return ret;var elm=container;if(elm.disabled||elm.getAttribute("disabled")=="true")return ret;if(!skipRoot){var serializer=container.getAttribute("serializer");if(serializer){ret.push(eval(serializer));return ret}}var i,n=container.childNodes.length;for(i=0;i<n;i++){elm=container.childNodes[i];if(elm.nodeType!=1||!elm.getAttribute)continue;if(elm.getAttribute("autoSerialize")=="false")continue;if(!Form.Element.Serializers[elm.tagName.toLowerCase()])_container_serialize(elm,ret);else{if(elm.disabled||elm.getAttribute("disabled")=="true")continue;var s=Form.Element.serialize(elm);if(s)ret.push(s)}}return ret}function _container_onsync(container){var elm=container;if(container.nodeType!=1||!container.getAttribute)return true;var onsync=elm.getAttribute("onsync");if(onsync)eval(onsync);var i,n=container.childNodes.length;for(i=0;i<n;i++){elm=container.childNodes[i];_container_onsync(elm)}}function aop_around(C,B,F){function A(){var A=function B(){return E.jp.apply(A.object,A.args)};A.args=arguments;A.object=this;return F.call(this,A)}var E=A;E.jp=C[B];E.jp.aspect$wrapper=E;C[B]=E;return function D(){var A=E.aspect$wrapper,F=E.jp;if(A){A.jp=F;F.aspect$wrapper=A}else{C[B]=F;delete F.aspect$wrapper}}}function aop_after(C,B,A){aop_around(C,B,function(B){B();A.apply(window,B.args)})}if(!this.JSON)this.JSON={};(function(){function f(A){return A<10?"0"+A:A}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(A){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(A){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\"":"\\\"","\\":"\\\\"},rep;function quote(A){escapable.lastIndex=0;return escapable.test(A)?"\""+A.replace(escapable,function(B){var A=meta[B];return typeof A==="string"?A:"\\u"+("0000"+B.charCodeAt(0).toString(16)).slice(-4)})+"\"":"\""+A+"\""}function str(H,B){var I,G,A,D,E=gap,F,C=B[H];if(C&&typeof C==="object"&&typeof C.toJSON==="function")C=C.toJSON(H);if(typeof rep==="function")C=rep.call(B,H,C);switch(typeof C){case"string":return quote(C);case"number":return isFinite(C)?String(C):"null";case"boolean":case"null":return String(C);case"object":if(!C)return"null";gap+=indent;F=[];if(Object.prototype.toString.apply(C)==="[object Array]"){D=C.length;for(I=0;I<D;I+=1)F[I]=str(I,C)||"null";A=F.length===0?"[]":gap?"[\n"+gap+F.join(",\n"+gap)+"\n"+E+"]":"["+F.join(",")+"]";gap=E;return A}if(rep&&typeof rep==="object"){D=rep.length;for(I=0;I<D;I+=1){G=rep[I];if(typeof G==="string"){A=str(G,C);if(A)F.push(quote(G)+(gap?": ":":")+A)}}}else for(G in C)if(Object.hasOwnProperty.call(C,G)){A=str(G,C);if(A)F.push(quote(G)+(gap?": ":":")+A)}A=F.length===0?"{}":gap?"{\n"+gap+F.join(",\n"+gap)+"\n"+E+"}":"{"+F.join(",")+"}";gap=E;return A}}if(typeof JSON.stringify!=="function")JSON.stringify=function(B,A,C){var D;gap="";indent="";if(typeof C==="number"){for(D=0;D<C;D+=1)indent+=" "}else if(typeof C==="string")indent=C;rep=A;if(A&&typeof A!=="function"&&(typeof A!=="object"||typeof A.length!=="number"))throw new Error("JSON.stringify");return str("",{"":B})};if(typeof JSON.parse!=="function")JSON.parse=function(text,reviver){var j;function walk(B,E){var D,A,C=B[E];if(C&&typeof C==="object")for(D in C)if(Object.hasOwnProperty.call(C,D)){A=walk(C,D);if(A!==undefined)C[D]=A;else delete C[D]}return reviver.call(B,E,C)}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(A){return"\\u"+("0000"+A.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}());if(!js.widget)js.widget={};js.widget.getById=function(A){return dojo.widget.getWidgetById(A)};js.SubmitPane=Class.create();Object.extend(js.SubmitPane.prototype,{initialize:function(A){this.id=A},show:function(){center_element(this.id)},hide:function(){Element.hide(this.id);window_enable(this.id)}});if(!js.Dialog)js.Dialog=js.SubmitPane;var RicoUtil={getElementsComputedStyle:function(A,C,D){if(arguments.length==2)D=C;var B=$(A);if(B.currentStyle)return B.currentStyle[C];else return document.defaultView.getComputedStyle(B,null).getPropertyValue(D)},createXmlDocument:function(){if(document.implementation&&document.implementation.createDocument){var A=document.implementation.createDocument("","",null);if(A.readyState==null){A.readyState=1;A.addEventListener("load",function(){A.readyState=4;if(typeof A.onreadystatechange=="function")A.onreadystatechange()},false)}return A}if(window.ActiveXObject)return Try.these(function(){return new ActiveXObject("MSXML2.DomDocument")},function(){return new ActiveXObject("Microsoft.DomDocument")},function(){return new ActiveXObject("MSXML.DomDocument")},function(){return new ActiveXObject("MSXML3.DomDocument")})||false;return null},getContentAsString:function(A){return A.xml!=undefined?this._getContentAsStringIE(A):this._getContentAsStringMozilla(A)},_getContentAsStringIE:function(B){var A="";for(var D=0;D<B.childNodes.length;D++){var C=B.childNodes[D];if(C.nodeType==4)A+=C.nodeValue;else A+=C.xml}return A},_getContentAsStringMozilla:function(C){var A=new XMLSerializer(),B="";for(var E=0;E<C.childNodes.length;E++){var D=C.childNodes[E];if(D.nodeType==4)B+=D.nodeValue;else B+=A.serializeToString(D)}return B},toViewportPosition:function(A){return this._toAbsolute(A,true)},toDocumentPosition:function(A){return this._toAbsolute(A,false)},_toAbsolute:function(A,B){if(navigator.userAgent.toLowerCase().indexOf("msie")==-1)return this._toAbsoluteMozilla(A,B);var G=0,F=0,D=A;while(D){var E=0,C=0;if(D!=A){E=parseInt(this.getElementsComputedStyle(D,"borderLeftWidth")),C=parseInt(this.getElementsComputedStyle(D,"borderTopWidth"));E=isNaN(E)?0:E;C=isNaN(C)?0:C}G+=D.offsetLeft-D.scrollLeft+E;F+=D.offsetTop-D.scrollTop+C;D=D.offsetParent}if(B){G-=this.docScrollLeft();F-=this.docScrollTop()}return{x:G,y:F}},_toAbsoluteMozilla:function(A,B){var E=0,D=0,C=A;while(C){E+=C.offsetLeft;D+=C.offsetTop;C=C.offsetParent}C=A;while(C&&C!=document.body&&C!=document.documentElement){if(C.scrollLeft)E-=C.scrollLeft;if(C.scrollTop)D-=C.scrollTop;C=C.parentNode}if(B){E-=this.docScrollLeft();D-=this.docScrollTop()}return{x:E,y:D}},docScrollLeft:function(){if(window.pageXOffset)return window.pageXOffset;else if(document.documentElement&&document.documentElement.scrollLeft)return document.documentElement.scrollLeft;else if(document.body)return document.body.scrollLeft;else return 0},docScrollTop:function(){if(window.pageYOffset)return window.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)return document.documentElement.scrollTop;else if(document.body)return document.body.scrollTop;else return 0}};function ui_extend_card(B){var C=$PTag(B,"TR"),A=$PTag(C,"TABLE");Element.remove(C);var G=A.tBodies[0].rows,F,D=G.length;for(F=0;F<D;F++){var E=G[F];E.style.display=""}}function xml_parse(A){if(window.ActiveXObject){var B=Try.these(function(){return new ActiveXObject("MSXML2.DomDocument")},function(){return new ActiveXObject("Microsoft.DomDocument")},function(){return new ActiveXObject("MSXML.DomDocument")},function(){return new ActiveXObject("MSXML3.DomDocument")})||false;B.loadXML(A);return B}else{B=(new DOMParser()).parseFromString(A,"text/xml");return B}}var useNativeByClass=!!document.getElementsByClassName;if(!js)js={};js.byClass=function(N,I,D){I=$(I);if(D)D=D.toUpperCase();var B=[];if(useNativeByClass){var J=(I||document).getElementsByClassName(N);for(var H=0;I=J[H++];)if(!D||I.tagName===D)B.push(I);return B}else{I=I||document;D=D||"*";var A=N.split(" "),M=(D==="*"&&I.all)?I.all:I.getElementsByTagName(D),C=[],K,L,H=A.length;while(--H>=0)C.push(new RegExp("(^|\\s)"+A[H]+"(\\s|$)"));var E=M.length;while(--E>=0){K=M[E];L=false;for(var G=0,F=C.length;G<F;G++){L=C[G].test(K.className);if(!L)break}if(L)B.push(K)}return B}};$Class=js.byClass;js;if(!js)js={};js.Control=Class.create();Object.extend(js.Control.prototype,{initialize:function(A,C,B){if(B)Object.extend(this,B);this.options={};this.options=Object.extend(this.options,C||{});this.elm=$(A);this.children=[];if(this.attr("wx:type"))this.initFromDom();this.cssPrefix=this.getWxClass()||this.type||"wx";this.bindEvents()},bindEvents:function(){},unbindEvents:function(){},css:function(A){return this.cssPrefix+"-"+A},f:function(A){return this[A]||Prototype.emptyFunction},attr:function(A){return this.elm.getAttribute(A)},evalStr:function(v){if(v){var elm=this.elm,ctl=this,args=arguments[1];return eval(v)}},getWxClass:function(){var A=Element.classNames(this.elm);return A.find(function(A){return A.indexOf("wx-")==0})},_setProp:function(B,C,A){this[B.substring(C.length).camelize()]=A},initFromDom:function(){var attrs=this.elm.attributes;for(var i=0;i<attrs.length;i++){var name=attrs[i].name;if(name.indexOf("wx:")!=0)continue;var v=attrs[i].value;if(name.indexOf("wx:f-")==0){if(v)this._setProp(name,"wx:f-",this.evalStr.bind(this,v))}else if(name.indexOf("wx:j-")==0)this._setProp(name,"wx:j-",!v?null:eval("("+v+")"));else this._setProp(name,"wx:",v)}if(this.elm.getAttribute("wx:init-children")=="true"){var i,n=this.elm.childNodes.length;for(i=0;i<n;i++){var cld=this.elm.childNodes[i];if(cld.nodeType==1){var ctl=js.$(cld.id);ctl.parentCtl=this;this.children.push(ctl)}}}},childIndexById:function(A){var C,B=this.children.length;for(C=0;C<B;C++)if(this.children[C].getId()==A)return C;return-1},childById:function(A){var B=this.childIndexById(A);return B<0?null:this.children[B]},getSelectedIndex:function(){var B,A=this.children.length;for(B=0;B<A;B++)if(this.children[B].selected)return B;return-1},getSelected:function(){var A=this.getSelectedIndex();return this.children[A]},getSelectedData:function(){var A=this.getSelected();return A?A.data:null},activateSelected:function(){var A=this.getSelectedIndex();return this.activateByIndex(A<0?0:A)},activateByIndex:function(A){if(A<0||A>=this.children.length)return;var D,C=this.children.length;for(D=0;D<C;D++){var B=this.children[D];B.onDeactivate()}B=this.children[A];B.onActivate();if(this.onChildActive)this.onChildActive(B)},activateById:function(A){var B=this.childIndexById(A);this.activateByIndex(B)},onMouseOver:function(){Element.addClassName(this.elm,this.css("hover"))},onMouseOut:function(){Element.removeClassName(this.elm,this.css("hover"))},onDeactivate:function(){this.selected=false;if(this.pageId)Element.hide(this.pageId);Element.removeClassName(this.elm,this.css("active"));Element.addClassName(this.elm,this.css("inactive"))},onActivate:function(){this.selected=true;if(this.pageId)Element.show(this.pageId);Element.removeClassName(this.elm,this.css("inactive"));Element.addClassName(this.elm,this.css("active"))},markFocus:function(A){if(A)Element.addClassName(this.elm,this.css("focus"));else Element.removeClassName(this.elm,this.css("focus"))},updateDynamicArgs:function(A){this.dynamicArgs=Object.extend(this.dynamicArgs||{},A||{})},buildUrl:function(){var B=this.options.popUrl,A=js.controlManager.pages[this.options.popUrl];if(A)B=A;if(this.options.ops)B+="&$ops="+this.options.ops;if(this.options.rootId)B+="&rootId="+this.options.rootId;if(this.options.relation)B+="&relation="+this.options.relation;if(this.options.params)B+="&"+$H(this.options.params).toQueryString();if(this.options.extArgs)B+="&"+this.options.extArgs;if(this.dynamicArgs)B+="&"+$H(this.dynamicArgs).toQueryString();if(B.indexOf("objectName=")<0&&this.options.objectName)B+="&objectName="+this.options.objectName;if(B.indexOf("objectEvent=")<0)if(this.options.popUrl=="lookupOne")B+="&objectEvent=Query";else B+="&objectEvent=None";return js.CONTEXT_PATH+B},popDialog:function(){var B=this.onPopCallback.bind(this),C=this.options.getSelectedFunc||js.$F.bind(null,this.elm),A=this.options.winFeatures||"width=1000px,height=600px,status=no,center=yes";if(this.options.useDialogEx)js.win.dialogEx(this.buildUrl(),[B,C],A);else js.win.dialog(this.buildUrl(),[B,C],A)},onPopCallback:function(B,C){if(this.options.popCallbackFunc)this.options.popCallbackFunc(B,C);else if(this.options.forSelectOne){var A=this.transformRetValue(B,C);B=A[0];C=A[1];wx_on_select_one(this.elm,this.options.callbackFunc,B,C)}else wx_on_select(this.elm,this.options.callbackFunc,B,C)},transformRetValue:function(A,B){if(this.options.transformFunc)return this.options.transformFunc(A,B);return[A,B]},getId:function(){return this.elm.id},getDom:function(){return this.elm},disable:function(){if(this.elm.tagName=="INPUT"&&this.elm.type=="hidden"&&this.elm.getAttribute("textId"))js.form.disable($(this.elm.getAttribute("textId")));js.form.disable(this.elm)},enable:function(){if(this.elm.tagName=="INPUT"&&this.elm.type=="hidden"&&this.elm.getAttribute("textId"))js.form.enable($(this.elm.getAttribute("textId")));js.form.enable(this.elm)},toggleOnCheck:function(A){if(A.checked)this.enable();else this.disable()},disableAndHide:function(){this.disable();this.hide()},enableAndShow:function(){this.enable();this.show()},hide:function(){Element.hide(this.elm);if(this.elm.tagName=="INPUT"&&this.elm.type=="hidden"&&this.elm.getAttribute("textId"))Element.hide($(this.elm.getAttribute("textId")));var A=$("btn_"+this.elm.id);if(A)Element.hide(A)},show:function(){Element.show(this.elm);if(this.elm.tagName=="INPUT"&&this.elm.type=="hidden"&&this.elm.getAttribute("textId"))Element.show($(this.elm.getAttribute("textId")));var A=$("btn_"+this.elm.id);if(A)Element.show(A)},getContentElm:function(){var A=this.elm;if(A.getAttribute("getWxValue")||A.getAttribute("setWxValue"))return A;var B=$Class("fieldContent",A)[0];if(B)return B;if(A.tagName=="TD")A=this._getFirstElm(A);return A},_getFirstElm:function(B){var D,C=B.childNodes.length;if(C>3||C<=0)return B;if(B.childNodes[0].nodeType!=3&&B.childNodes[0].nodeType!=4){if(C==1)return B.childNodes[0];return B}var A=js.str.trim(B.childNodes[0].nodeValue);if(A.length>0)return B;if(B.childNodes[1].nodeType==3||B.childNodes[1].nodeType==4)return B;if(C==2)return B.childNodes[1];if(B.childNodes[1].nodeType==3||B.childNodes[1].nodeType==4){A=js.str.trim(B.childNodes[1].nodeValue);if(A.length>0)return B}return B.childNodes[1]},getWxValue:function(){var elm=this.getContentElm();if(elm.getAttribute("getWxValue"))return eval(elm.getAttribute("getWxValue"));if(elm.tagName=="SPAN"&&Element.hasClassName(elm,"overflowSpan")){if(elm.title)return elm.title;return elm.innerHTML}if(elm.tagName=="SPAN"||elm.tagName=="TD")return elm.innerHTML;if(elm.tagName=="DIV")return elm.innerHTML;if(elm.tagName=="TEXTAREA")return elm.value;if(elm.tagName=="INPUT"&&elm.getAttribute("multiple"))return wx_input_get_multi(elm);else if(elm.tagName=="INPUT"&&(elm.type=="text"||elm.type=="hidden")){if(elm.type=="hidden"&&elm.getAttribute("textId"))return{value:this.elm.value,text:$(elm.getAttribute("textId")).value};return elm.value}else if(elm.tagName=="INPUT"&&elm.type=="radio")return js.form.getSelectedValue(elm.name);else if(elm.tagName=="INPUT"&&elm.type=="checkbox")return js.form.getSelectedValues(elm.name);else if(elm.tagName=="SELECT"){if(elm.multiple&&elm.getAttribute("selectAll"))return js.select.getAllValueAndTextObjects(elm);else if(elm.multiple)return js.select.getSelectedValues(this.getId());else{if(elm.getAttribute("wxText")=="true"){var opt=elm.options[elm.selectedIndex];if(!opt)return opt;return{value:opt.value,text:opt.text}}return elm.value}}else alert("error_type_of_elm")},_getText:function(A){if(!A)A="";if(A.value||A.text)A=A.text;return A==null?"":A.toString()},setWxValue:function(value){var elm=this.getContentElm();if(elm.getAttribute("setWxValue"))eval(elm.getAttribute("setWxValue"));else if(elm.tagName=="SPAN"){if(Element.hasClassName(elm,"overflowSpan")){value=this._getText(value);elm.title=value||"";var len=elm.getAttribute("len");if(value.length>len)value=value.substring(0,len)+"...";elm.innerHTML=(value||"").escapeXML()}else{value=this._getText(value);elm.innerHTML=(value||"").escapeXML()}}else if(elm.tagName=="DIV"||elm.tagName=="TD")elm.innerHTML=(this._getText(value)||"").escapeXML();else if(elm.tagName=="TEXTAREA")elm.value=this._getText(value);else if(elm.tagName=="INPUT"){if(elm.getAttribute("multiple"))wx_input_set_multi(elm,value);else if(elm.type=="hidden"&&elm.getAttribute("textId")){elm.value=value?(value.value||""):"";$(elm.getAttribute("textId")).value=value?(value.text||""):""}else if(elm.type=="text"||elm.type=="hidden")elm.value=this._getText(value);else if(elm.type=="radio")this._setRadioValue(value);else alert("error_type_of_elm")}else if(elm.tagName=="SELECT"){if(elm.multiple)this._setMultiSelectTagValues(value);else this._setSelectTagValue(value)}else alert("error_type_of_elm")},addSelectOption:function(B,A){if(!js.select.contains(this.elm,B))js.select.add(this.elm,B,A)},_setRadioValue:function(D){var C=this.elm.name,B=this.elm,A=$A(document.getElementsByName(C));A.each(function(A){if(A.value==D&&A.parentNode==B.parentNode)A.checked="true"})},_setSelectTagValue:function(B){if(!B)B="";var A=B;if(typeof(B)=="object")A=B.value;if(typeof(B)=="object"&&B.text&&this.elm.getAttribute("allowAdd")=="true")this.addSelectOption(B.value,B.text);js.select.markSelected(this.elm.id,A||"")},_setMultiSelectTagValues:function(B){var A=$A(this.elm.options);A.each(function(A){if(B.include(A.value))A.selected=true;else A.selected=false})},getW:function(){return parseInt((this.elm.style.width||0),10)},getH:function(){return parseInt((this.elm.style.height||0),10)},getX:function(){return parseInt((this.elm.style.left||0),10)},getY:function(){return parseInt((this.elm.style.top||0),10)},setW:function(A){if(A<0)A=0;return this.elm.style.width=A+"px"},setH:function(A){if(A<0)A=0;return this.elm.style.height=A+"px"},setX:function(A){if(A<0)A=0;return this.elm.style.left=A+"px"},setY:function(A){if(A<0)A=0;return this.elm.style.top=A+"px"},child:function(A){return js.$($Name(A,this.elm)[0])},childValue:function(A){return this.child(A).getWxValue()},parent:function(){var A=this.elm.parentNode;do{if(!A)return null;if(A.id)return js.$(A);A=A.parentNode}while(true)},toJson:function(){var elm=this.elm;if(elm.getAttribute("to_json"))return eval("("+elm.getAttribute("to_json")+")");if(elm.tagName=="TABLE")return table_to_json(elm);if(!elm.name)return container_to_json(elm);return this.getWxValue()}});js.EventListener=Class.create();Object.extend(js.EventListener.prototype,{initialize:function(){this.listeners=[];this.firing=false},fire:function(){if(this.firing)return;this.firing=true;try{var C=this.listeners,D,B=C.length;for(D=0;D<B;D++)C[D].apply(null,arguments)}catch(A){this.firing=false;throw A}this.firing=false},addListener:function(A){if(this.firing)this.listeners=this.listeners.slice(0);this.listeners.push(A)}});js.ControlManager=Class.create();Object.extend(js.ControlManager.prototype,{initialize:function(A){this.controls={};this.listenerManager={};this.options={};this.options=Object.extend(this.options,A||{});this.inits=[];this.initElmIds=[];this.initControls=[];this.dimTool=new js.DimTool({cm:this});this.pages={};this.controlTypes={}},regControlType:function(A,B){this.controlTypes[A]=B},makeControl:function(B,F){var E=this.getControl(B);if(E)return E;var C=$(B);if(!C||!C.tagName){alert("elm_not_element:"+B);return}var D=C.getAttribute("wx:type");if(D){var A=this.controlTypes[D];if(A){E=new A(C,Object.extend({autoInit:true},F||{}));if(E.getId())this.regControl(E.getId(),E);return E}}if(C.id){E=this.getControl(C.id);if(E)return E}E=new js.Control(C,F);return E},getControl:function(A){if(!A){alert("err_id");return}return this.controls[A]},regControl:function(A,B){this.controls[A]=B;if(B.afterInit)this.initControls.push(B)},regEventListener:function(A,B,C){A=typeof(A)=="string"?A:this.makeControl(A).getId();var D=this.listenerManager[A];if(!D){D={};this.listenerManager[A]=D}if(!D[B])D[B]=new js.EventListener();D[B].addListener(C)},regListener:function(A,B,C){this.regEventListener(A,"wxChange",B);if(C)this.addOnInit(A)},unRegListener:function(A){A=typeof(A)=="string"?A:this.makeControl(A).getId();this.listenerManager[A]={}},removeControl:function(A){A=this.makeControl(A).getId();delete this.controls[A]},connectControl:function(A,B){A=this.makeControl(A);B=this.makeControl(B);this.regControl(A.getId(),A);this.regControl(B.getId(),B);B.setWxValue(A.getWxValue());this.regListener(A.getId(),js.setWxValue.bind(js,B.getId()));this.regListener(B.getId(),js.setWxValue.bind(js,A.getId()))},maskControl:function(A,B){this.connectControl(A,B);this.makeControl(A).hide()},fireEvent:function(A,D){var C=this.makeControl(A);if(!C)return;var E=this.listenerManager[C.getId()]||{},B=E[D];if(B)B.fire.apply(B,$A(arguments).slice(2))},setWxValue:function(A,C){var B=this.makeControl(A);if(!B)return;var D=B.getWxValue();B.setWxValue(C);this.fireEvent(A,"wxChange",C,D,false,B)},setWxValues:function(A){A=$H(A);A.each(function(A){this.setWxValue(A.key,A.value)}.bind(this))},getWxValue:function(A){var B=this.makeControl(A);if(B)return B.getWxValue()},syncWxValue:function(A,D){var B=this.makeControl(A),C=B.getWxValue();this.fireEvent(A,"wxChange",C,null,D,B)},addOnInit:function(B){if(typeof(B)=="function")this.inits.push(B);else{var A=B;if(typeof(B)!="string")A=this.makeControl(B).getId();if(!this.initElmIds.include(A))this.initElmIds.push(A)}},callInits:function(){this.inits.each(function(A){A()});this.inits=[];this.initElmIds.each(function(A){this.syncWxValue(A,true)}.bind(this));this.initElmIds=[];var A=this.initControls;this.initControls=[];A.each(function(A){if(!A._wx_inited&&A.afterInit)A.afterInit();A._wx_inited=true})},setPropValue:function(A,D,C){var B=this.makeControl(A);if(!B)return;var E=(B["get"+D]||Prototype.emptyFunction)();B["set"+D](C);this.fireEvent(A,"set"+D,C,E)},getPropValue:function(A,C){var B=this.makeControl(A);if(B)return B["get"+C]()}});js.DimTool=Class.create();Object.extend(js.DimTool.prototype,{initialize:function(A){this.controls={};this.listenerManager={};this.inits=[];this.initIds=[];this.options={diffHeight:0,diffWidth:0,cm:js.controlManager};Object.extend(this.options,A||{});this.cm=this.options.cm},makeControl:function(A,B){return this.cm.makeControl(A,B)},getBodyMargin:function(){return parseInt(document.body.style.margin,10)||0},getAlignElms:function(C){var B=function(F,A){if(!F)return;if(F.id=="contentWrapper")return;var E=F.getAttribute("layoutAlign");if(E){if(E==C)A.push(F);return}var H,G=F.childNodes.length;for(H=0;H<G;H++){var D=F.childNodes[H];if(D.nodeType!=1)continue;B(D,A)}},A=[];B(document.body,A);return A},getWinWidth:function(){if(document.compatMode=="BackCompat"||document.documentElement.clientWidth==0)return document.body.clientWidth;else return document.documentElement.clientWidth},getWinHeight:function(){if(document.compatMode=="BackCompat"||document.documentElement.clientHeight==0)return document.body.clientHeight;else return document.documentElement.clientHeight},getClientHeight:function(){var A=this.getWinHeight();this.getAlignElms("top").each(function(B){if(B.clientHeight>0||B.firstChild)A-=parseInt(B.offsetHeight,10)});this.getAlignElms("bottom").each(function(B){if(B.clientHeight>0||B.firstChild)A-=parseInt(B.offsetHeight,10)});A-=this.options.diffHeight;A-=this.getBodyMargin()*2;if(A<0)A=0;return A},getClientWidth:function(){var A=parseInt(document.body.clientWidth,10);this.getAlignElms("right").each(function(B){A-=parseInt(B.style.width,10)});this.getAlignElms("left").each(function(B){A-=parseInt(B.style.width,10)});A-=this.options.diffWidth;A-=this.getBodyMargin()*2;if(A<0)A=0;return A},getClientLeft:function(){var A=parseInt(document.body.offsetLeft,10);this.getAlignElms("left").each(function(B){A+=parseInt(B.style.width,10)});return A},getClientTop:function(){var A=parseInt(document.body.offsetTop,10);this.getAlignElms("top").each(function(B){A+=parseInt(B.style.height,10)});return A},getClientDim:function(){return{left:this.getClientLeft(),top:this.getClientTop(),width:this.getClientWidth(),height:this.getClientHeight()}},bindClient:function(B,C){var A=function(){$(B).style.height=this.getClientHeight()+"px";$(B).style.width=this.getClientWidth()+"px";if(C)C()}.bind(this);Event.observe(window,"resize",A);Event.observe(window,"load",A)},bindClientHeight:function(B){var A=function(){$(B).style.height=this.getClientHeight()+"px"}.bind(this);Event.observe(window,"resize",A);Event.observe(window,"load",A)},bindClientWidth:function(B){var A=function(){$(B).style.width=this.getClientWidth()+"px"}.bind(this);Event.observe(window,"resize",A);Event.observe(window,"load",A)},bindWidth:function(C,B){var A=function(){$(C).style.width=$(B).style.width}.bind(this);Event.observe(window,"resize",A);Event.observe(window,"load",A)}});if(!js.controlManager){js.controlManager=new js.ControlManager();Event.observe(window,"load",js.controlManager.callInits.bind(js.controlManager))}js.dimTool=js.controlManager.dimTool;js.setWxValue=js.controlManager.setWxValue.bind(js.controlManager);js.setWxValues=js.controlManager.setWxValues.bind(js.controlManager);js.getWxValue=js.controlManager.getWxValue.bind(js.controlManager);js.syncWxValue=js.controlManager.syncWxValue.bind(js.controlManager);js.regListener=js.controlManager.regListener.bind(js.controlManager);js.regControl=js.controlManager.regControl.bind(js.controlManager);js.makeControl=js.controlManager.makeControl.bind(js.controlManager);js.addOnInit=js.controlManager.addOnInit.bind(js.controlManager);js.maskControl=js.controlManager.maskControl.bind(js.controlManager);js.$=js.makeControl;js.$F=js.getWxValue;js.seq=1;js.controlManager.pages["byTree"]="/_tpl/app/select_multi/select_multi_by_tree.jsp?";js.controlManager.pages["oneByTree"]="/_tpl/app/select_one/select_one_by_tree.jsp?";js.controlManager.pages["lookupOne"]="/_tpl/app/select_one/lookup_win.jsp?";js.controlManager.pages["tree"]="/_tpl/app/select_tree.jsp?objectEvent=QueryTree";js.pages=js.controlManager.pages;function wx_on_select_one(B,D,C,A){if(C&&C.value){C=C.value;A=C.text}setTimeout(function(){js.setWxValue(B,{value:C,text:A});if(D)D(C,A)},10)}function wx_on_select(A,C,B){setTimeout(function(){js.setWxValue(A,B);if(C)C(B)},10)}function wx_input_get_multi(D){var C=$(D);if(!C.value)return[];var G=(C.value||"").split(","),F=C.getAttribute("textId");if(!F)return G;var B=$(F).value.split(","),A=[],H,E=G.length;for(H=0;H<E;H++)A.push({value:G[H],text:B[H]});return A}function wx_input_set_multi(D,A){var C=$(D),E=C.getAttribute("textId");if(!E){C.value=(A||[]).join(",");return}var F=(A||[]).pluck("value"),B=(A||[]).pluck("text");C.value=F.join(",");$(E).value=B.join(",")}js.LayoutManager=Class.create();Object.extend(js.LayoutManager.prototype,{initialize:function(A){this.options=A||{};this.resizeElmIds=[];Event.observe(window,"resize",this.onResize.bind(this));Event.observe(window,"load",this.onResize.bind(this))},regResizeElmId:function(A){if(!this.resizeElmIds.include(A))this.resizeElmIds.push(A)},unregResizeElmId:function(B){var A=this.resizeElmIds.indexOf(B);if(A>=0)this.resizeElmIds.splice(A,1)},_onResize:function(){this.resizeElmIds.each(function(B){var A=$(B);if(A){A.style.width=A.parentNode.offsetWidth+"px";A.style.height=A.parentNode.offsetHeight+"px"}})},onResize:function(){this._onResize();setTimeout(this._onResize.bind(this),10)}});js.lm=new js.LayoutManager();js.TabMenu=Class.create();Object.extend(js.TabMenu.prototype,js.Control.prototype);Object.extend(js.TabMenu.prototype,{afterInit:function(){this.activateSelected()},onItemClick:function(B){var A=Event.element(B);if(A.parentNode!=this.elm){A=A.parentNode;if(A.parentNode!=this.elm)return}this.activateById(A.id)},bindEvents:function(){var C=this.onItemClick.bindAsEventListener(this),D,B=this.children.length;for(D=0;D<B;D++){var A=this.children[D];Event.observe(A.elm,"mouseover",A.onMouseOver.bind(A));Event.observe(A.elm,"mouseout",A.onMouseOut.bind(A));Event.observe(A.elm,"click",C)}}});js.controlManager.regControlType("TabMenu",js.TabMenu);if(typeof(js)=="undefined")js=function(){};js.query=function(){alert("query.js")};var query_G=new Object();query_G.E_NO_QUERY_CONDITION="\u8bf7\u9009\u62e9\u67e5\u8be2\u6761\u4ef6";js.query.postForm=function(A){if(typeof(A)=="string")A=document.forms[A];if(!A||A.tagName!="FORM"){alert("js.form.err_frm_arg_is_not_form");return false}var B=js.query.buildCondition(A);if(B==null)return null;A.condition.value=B;A.submit();return true};
//js.query.buildCondition=function(M,Q){if(typeof(M)=="string")M=document.forms[M];if(!M||M.tagName!="FORM"){alert("js.form.err_frm_arg_is_not_form");return null}var J="",L,F=M.length;for(L=0;L<F;L++){elm=M.elements[L];var C=elm.getAttribute("op");if(!C||js.str.isBlank(C))continue;if(elm.type=="radio"&&!elm.checked)continue;var H=elm.getAttribute("fieldName");if(!H||js.str.isBlank(H))H=elm.name;if(!H||js.str.isBlank(H))continue;var N=elm.value,B=null,G=elm.getAttribute("textId");if(G)B=js.$F(G);if(elm.tagName=="SELECT"){var O=elm.getAttribute("selectAll"),D=[],A=[];for(var I=0;I<elm.options.length;I++){var V=elm.options[I];if(O){D.push(V.value);A.push(V.text)}else if(V.selected)D.push(V.value)}if(D.length<=0)continue;N=D.join(",");if(A.length>0)B=A.join(",")}else if(C=="in"&&elm.type=="hidden"&&elm.getAttribute("forSelect")=="true")N=$Name(H,M).findAll(function(A){return A.checked}).pluck("value").join(",");if(C=="between"||C=="betweenDate"||C=="betweenYear"){var T=elm.getAttribute("lowId"),S=T?document.getElementById(T):null,E=S?S.value:null,R=elm.getAttribute("highId"),P=R?document.getElementById(R):null,K=P?P.value:null;if(js.str.isBlank(E)&&js.str.isBlank(K))continue;if(!js.str.isBlank(E))if(!js.validate.validElement(S))return null;if(!js.str.isBlank(K))if(!js.validate.validElement(P))return null;if(C=="betweenDate"||C=="betweenYear"){if(!E)E="";if(!K)K="";var U="<"+C+" name=\""+H+"\" lowValue=\""+E.escapeXML()+"\" highValue=\""+K.escapeXML()+"\" ";if(H.indexOf("dummy.")>=0)U+=" identity=\"true\" ";U+=" />";J+=U;continue}else if(js.str.isBlank(E)){C="le";N=K}else if(js.str.isBlank(K)){C="ge";N=E}else{U="<between name=\""+H+"\" lowValue=\""+E.escapeXML()+"\" highValue=\""+K.escapeXML()+"\" ";if(H.indexOf("dummy.")>=0)U+=" identity=\"true\" ";U+=" />";J+=U;continue}}else{if(!N||js.str.isBlank(N))continue;if(!js.validate.validElement(elm))return null}U="<"+C+" name=\""+H+"\" value=\"";if(C=="like")U+="%"+N.escapeXML()+"%\" ";else U+=N.escapeXML()+"\" ";if(B)U+=" text=\""+B.escapeXML()+"\" ";if(H.indexOf("dummy.")>=0)U+=" identity=\"true\" ";U+="/>";J+=U}if(J.length<=0)return"";Q=Q||"and";J="<"+Q+">"+J+"</"+Q+">";return J};


js.query.buildCondition=function(M,Q){
    if(typeof(M)=="string")
	    M=document.forms[M];
	    
	if(!M||M.tagName!="FORM"){
	    alert("js.form.err_frm_arg_is_not_form");
		return null
	}
	
	var J="",L,F=M.length;
	
	//checked checkbox count and the number of checkbox currently handled in for loop below
	var cbCount=0, cbNumber=0;
	for(L=0;L<F;L++){
	    elm=M.elements[L];
	    if(elm.type=="checkbox"&&elm.checked){
	        cbCount++;
		    continue;
		}
	}
	
	for(L=0;L<F;L++){
	    elm=M.elements[L];
		var C=elm.getAttribute("op");
		if(!C||js.str.isBlank(C))
		    continue;
			
		if(elm.type=="radio"&&!elm.checked)
		    continue;
		
		//skip unchecked checkbox
		if(elm.type=="checkbox"&&!elm.checked)
		    continue;
			
		var H=elm.getAttribute("fieldName");
		if(!H||js.str.isBlank(H))
		    H=elm.name;
		if(!H||js.str.isBlank(H))
		    continue;
			
		var N=elm.value,B=null,G=elm.getAttribute("textId");
		
		if(G)
		    B=js.$F(G);
		    
		if(elm.tagName=="SELECT"){
		    var O=elm.getAttribute("selectAll"),D=[],A=[];
		    
		    for(var I=0;I<elm.options.length;I++){
		        var V=elm.options[I];
		        if(O){
		            D.push(V.value);
		            A.push(V.text)
		        }else if(V.selected)
		            D.push(V.value)
		    }
		        
		    if(D.length<=0)
		        continue;
		            
		    N=D.join(",");
		        
		    if(A.length>0)
		        B=A.join(",")
		
		}else if(C=="in"&&elm.type=="hidden"&&elm.getAttribute("forSelect")=="true")
		    N=$Name(H,M).findAll(function(A){return A.checked}).pluck("value").join(",");
		    
		if(C=="between"||C=="betweenDate"||C=="betweenYear"){
		    var T=elm.getAttribute("lowId"),
		        S=T?document.getElementById(T):null,
		        E=S?S.value:null,
		        R=elm.getAttribute("highId"),
		        P=R?document.getElementById(R):null,
		        K=P?P.value:null;
		        
		    if(js.str.isBlank(E)&&js.str.isBlank(K))
		        continue;
		        
		    if(!js.str.isBlank(E))
		        if(!js.validate.validElement(S))
		            return null;
		            
		    if(!js.str.isBlank(K))
		        if(!js.validate.validElement(P))
		            return null;
		            
		    if(C=="betweenDate"||C=="betweenYear"){
		        if(!E)
		            E="";
		        if(!K)
		            K="";
		        
		        var U="<"+C+" name=\""+H+"\" lowValue=\""+E.escapeXML()+"\" highValue=\""+K.escapeXML()+"\" ";
		        if(H.indexOf("dummy.")>=0)
		            U+=" identity=\"true\" ";
		        
		        U+=" />";
		        J+=U;
		        
		        continue
		    }else if(js.str.isBlank(E)){
		        C="le";
		        N=K
		    }else if(js.str.isBlank(K)){
		        C="ge";
		        N=E
		    }else{
		        U="<between name=\""+H+"\" lowValue=\""+E.escapeXML()+"\" highValue=\""+K.escapeXML()+"\" ";
		        if(H.indexOf("dummy.")>=0)
		            U+=" identity=\"true\" ";
		        U+=" />";
		        J+=U;
		        continue
		    }
		}else{
		    if(!N||js.str.isBlank(N))
		        continue;
		    if(!js.validate.validElement(elm))
		        return null
		}
		
		//<or>
		U="";
		if(elm.type=="checkbox") {
		    cbNumber++;
		    if (cbNumber == 1)
		        U+="<or>";
		}
		
		//U="<"+C+" name=\""+H+"\" value=\"";
		U+="<"+C+" name=\""+H+"\" value=\"";
		
		if(C=="like")
		    U+="%"+N.escapeXML()+"%\" ";
		else
		    U+=N.escapeXML()+"\" ";
		    
		if(B)
		    U+=" text=\""+B.escapeXML()+"\" ";
		    
		if(H.indexOf("dummy.")>=0)
		    U+=" identity=\"true\" ";
		    
		U+="/>";
		
		//</or>
		if(elm.type=="checkbox"&&cbNumber==cbCount) {
		    U+="</or>";
		}
		
		J+=U
	}
	
	if(J.length<=0)
	    return"";
	    
	Q=Q||"and";
	J="<"+Q+">"+J+"</"+Q+">";
	return J
};


js.query.getCnIdxCondition=function(E,B){if(!E)alert("err_invalid_fld_name");var F="";if(!B||B.length<=0){F="";return F}B=B.toLowerCase();var A=[["a","\u5416","\u93ca"],["b","\u516b","\u7c3f"],["c","\u62c6","\u9519"],["d","\u642d","\u6387"],["e","\u8bb9","\u8d30"],["f","\u53d1","\u8986"],["g","\u560e","\u8fc7"],["h","\u54c8","\u970d"],["j","\u8ba5","\u9a8f"],["k","\u5580","\u9614"],["l","\u5783","\u7565"],["m","\u5988","\u7a46"],["n","\u90a3","\u7cef"],["o","\u54e6","\u6ca4"],["p","\u556a","\u7011"],["q","\u671f","\u7fa4"],["r","\u7136","\u5f31"],["s","\u6492","\u6240"],["t","\u4ed6","\u553e"],["w","\u6316","\u52a1"],["x","\u6614","\u900a"],["y","\u4e2b","\u97f5"],["z","\u6742","\u5750"]],D,H,G,C=A.length;for(G=0;G<C;G++)if(A[G][0]==B){D=A[G][1];H=A[G][2];break}if(G==C){D=A[0][1];H=A[C-1][2];F="<or><lt name=\""+E+"\" value=\""+D+"\"/><gt name=\""+E+"\" value=\""+H+"\" /> </or>";return F}F="<between name=\""+E+"\" lowValue=\""+D+"\" highValue=\""+H+"\" />";return F};js.query.getEnIdxCondition=function(E,C,I){if(!E)alert("err_invalid_fld_name");if(!C||C.length<=0)return"";C=C.substr(0,1);if(!I||I=="false")I=true;if(I)C=C.toLowerCase();var J="",H="<or><and><lt name=\""+E+"\" value=\"a\"/><gt name=\""+E+"\" value=\"z\"/>"+"</and><and><lt name=\""+E+"\" value=\"A\" /><gt name=\""+E+"\" value=\"Z\"/></and></or>";if((C<"a")&&(C>"z")||C<"A"&&C>"Z"){J=H;return J}var B=[["a","b","A","B"],["b","c","B","C"],["c","d","C","D"],["d","e","D","E"],["e","f","E","F"],["f","g","F","G"],["g","h","G","H"],["h","i","H","I"],["i","j","I","J"],["j","k","J","K"],["k","l","K","L"],["l","m","L","M"],["m","n","M","N"],["n","o","N","O"],["o","p","O","P"],["p","q","P","Q"],["q","r","Q","R"],["r","s","R","S"],["s","t","S","T"],["t","u","T","U"],["u","v","U","V"],["v","w","V","W"],["w","x","W","X"],["x","y","X","Y"],["y","z","Y","Z"],["z","{","Z","["]],G,A;if(C<"a"||C>"z"){var K,D=B.length;for(K=0;K<D;K++)if(B[K][2]==C)break;if(K==D)return H;var F=B[K][3];J="<and><ge name=\""+E+"\" value=\""+C+"\" /> <lt name=\""+E+"\" value=\""+F+"\" /></and>";return J}K,D=B.length;for(K=0;K<D;K++)if(B[K][0]==C)break;if(K==D)return H;F=B[K][1];J="<and><ge name=\""+E+"\" value=\""+C+"\" /> <lt name=\""+E+"\" value=\""+F+"\" /></and>";if(I){J="<or>"+J;F=B[K][3];J+="<and><ge name=\""+E+"\" value=\""+C.toUpperCase()+"\" /> <lt name=\""+E+"\" value=\""+F+"\" /></and>";J+="</or>"}return J};js.query.spliceCondition=function(J){var G=document.getElementById(J);if(!G){alert("CAN_err_invalid_select_element::"+J);return""}var F="",I="and",A=G.options,K,D=A.length;for(K=0;K<D;K++){var H=A[K],B=H.getAttribute("op");if(!B)B="eq";var E=H.getAttribute("fieldName");if(!E)alert("CAN_err_option_no_field_name::"+J);var C=H.value;if(!C)C="";F+="<"+B+" name='"+E+"' value='"+js.xml.encode(C)+"' />"}if(F!="")F="<"+I+">"+F+"</"+I+">";return F};js;if(!js)js={};js.Table=Class.create();Object.extend(js.Table.prototype,{initialize:function(A,B){this.options={direction:"v",excludeCols:[],autoAddRow:true,autoRoot:false};this.options=Object.extend(this.options,B||{});this.elmId=A;this.onMouseOverFunc=this.onMouseOver.bind(this);this.onMouseOutFunc=this.onMouseOut.bind(this);this.curRowIdx=0;this.curColIdx=0;this.fldColBeginIdx=0;this.handleTableKeyPress=this.onTableKeyPress.bind(this);this.handleTableClick=this.onTableClick.bind(this)},setContainerWidth:function(A){var B=$(this.elmId),C=B.parentNode;if(C.getAttribute("wxType")=="wx_table_container")C.style.width=A},bindKeyPress:function(){Event.observe(this.elmId,"keydown",this.handleTableKeyPress);Event.observe(this.elmId,"click",this.handleTableClick)},getCols:function(){return TableOps.getCols(this.elmId)},showCols:function(B){var A=this.getCols(),D,C=B.length;for(D=0;D<C;D++)A[D].style.display=B[D]?"":"none"},showCol:function(C,B){var A=this.getCols();A[C].style.display=B?"":"none"},getTheadHeight:function(){var A=$(this.elmId),C=0,D,B=A.tHead.rows.length;for(D=0;D<B;D++)C+=A.tHead.rows[D].offsetHeight},getTheadOffset:function(){var A=$(this.elmId);return{left:A.tHead.offsetLeft+A.offsetLeft,top:A.tHead.offsetTop+A.offsetTop}},getElement:function(){var A=$(this.elmId);if(!A)alert("err_no_element::"+this.elmId);return A},getDom:function(){return this.getElement()},getTBody:function(){return this.getElement().tBodies[0]},getRows:function(){return this.getTBody().rows},getRowCount:function(){return this.getTBody().rows.length},getRow:function(A){return this.getTBody().rows[A]},getRowIndex:function(B){var D=this.getTBody().rows,C,A=D.length;for(C=0;C<A;C++)if(D[C]==B)return C;return-1},getNextRow:function(B){if(!B)return null;var A=this.getRowIndex(B);if(A<0)return null;if(A>=this.getRowCount()-1)return null;return this.getRow(A+1)},getPrevRow:function(B){if(!B)return null;var A=this.getRowIndex(B);if(A<=0)return null;return this.getRow(A-1)},hideRow:function(A){Element.hide(this.getRow(A))},showRow:function(A){Element.show(this.getRow(A))},toggleRow:function(A){Element.toggle(this.getRow(A))},removeRow:function(A){Element.remove(this.getRow(A))},removeRowObj:function(A){this.removeRow(this.getRowIndex($(A)))},moveRow:function(D,A){var C=this.getRowCount();if(A<0)A=0;else if(A>C)A=C;if(D==C-1&&A==C)return;if(D==0&&A<0)return;if(D<0||D>=C||D==A)return;var B=this.getTBody();if(B.moveRow)B.moveRow(D,A);else{var E=this.getRow(D);if(A>=C-1)B.insertBefore(E,null);else if(D>A)B.insertBefore(E,this.getRow(A));else B.insertBefore(E,this.getRow(A+1))}},toRowObjs:function(E){var A=[],D,B=E.length;for(D=0;D<B;D++){var C=typeof(E[D])=="object"?E[D]:this.getRow(E[D]);A.push(C)}return A},toRowObj:function(A){return typeof(A)=="object"?A:this.getRow(A)},moveRowsUp:function(E){var A=this.toRowObjs(E),D,B=A.length;for(D=0;D<B;D++){var C=this.getRowIndex(A[D]);if(C==0)return;this.moveRow(C,C-1)}},moveRowUp:function(A){this.moveRowsUp([A])},moveRowsDown:function(F){var B=this.getRowCount(),A=this.toRowObjs(F),E,C=A.length;for(E=C-1;E>=0;E--){var D=this.getRowIndex(A[E]);if(D==B-1)return;this.moveRow(D,D+1)}},moveRowDown:function(A){this.moveRowsDown([A])},swapRow:function(C,D){var B=this.getRowCount();if(C<0||C>=B)return;if(D<0||D>=B)return;if(C==D)return;if(C>D){var G=D;C=D;D=G}var A=this.getTBody();if(A.moveRow){A.moveRow(C,D);A.moveRow(D-1,C)}else{var E=this.getRow(C),F=this.getRow(D);A.insertBefore(F,E);if(D==B)A.insertBefore(E);else if(D!=C-1)A.insertBefore(E,this.getRow(D+1))}},_getRow:function(B,A){if(typeof(B)=="string"||typeof(B)=="number")return this.getTBody().rows[B];return B},getCellCount:function(A){return this._getRow(A).cells.length},getCell:function(B,A){return this._getRow(B).cells[A]},sortRow:function(A){},addRow:function(G,A){var C=document.createElement("tr"),B=G.idx,H,D=G.length;for(H=0;H<D;H++){var F=document.createElement("td");C.appendChild(F);F.innerHTML=G[H]?G[H]:"&nbsp;";if(B){F.rowSpan=B[H][0]||1;F.colSpan=B[H][1]||1;if(B[H][2])F.className=B[H][2];if(B[H][3])F.title=B[H][3]}}if(this.options.markDataTr)C.setAttribute("dataTr","true");var E=this.toRowObj(A);this.getTBody().insertBefore(C,E?E:null);return C},setRow:function(A,C){var E,B=C.length;for(E=0;E<B;E++){var D=A.cells[E];D.innerHTML=C[E]?C[E]:"&nbsp;"}},makeArray:function(C){var H=new Array(),A=C.getElementsByTagName("td"),B=[],I,E=A.length;for(I=0;I<E;I++){var D=A[I];if(D.parentNode!=C)continue;var F=D.innerHTML,G=F?F:RicoUtil.getContentAsString(D);H[H.length]=G;B[B.length]=[D.getAttribute("rowspan"),D.getAttribute("colspan"),D.getAttribute("class"),D.getAttribute("title")]}H.idx=B;return H},makeEmptyList:function(B){var A=[],C;for(C=0;C<B;C++)A.push("");return A},populateRow:function(B,C){var D,A=C.length;for(D=0;D<A;D++)B.cells[D].innerHTML=C[D]?C[D]:"&nbsp;"},clearRow:function(B){var C,A=B.cells.length;for(C=0;C<A;C++)B.cells[C].innerHTML="&nbsp;"},clearRows:function(){var C=this.getTBody().rows,B,A=C.length;for(B=0;B<A;B++)this.clearRow(C[B])},removeRows:function(){var A=this.getRowCount(),B;for(B=0;B<A;B++)this.removeRow(0)},updateTBody:function(A){this.removeRows();this.addTable(A)},addTplTrText:function(B,C,A){return this.addTrText(String.prototype.formatN.apply($F(B),C),A)},addTrText:function(C,A){var B=C.stripScripts(),D=Element._getContentFromAnonymousElement("TBODY",C)[0];this.getTBody().insertBefore(D,A?A:null);C.evalScripts.bind(C).defer();return D},setTrText:function(F,E){var A=E.stripScripts(),C=js.xml.loadXML(A).documentElement;if(!C){alert("CAN_err_no_tr");return}var D=this.makeArray(C),B=this.setRow(F,D);setTimeout(function(){E.evalScripts()},10)},addTable:function(C,D){var B=[],A=C.getElementsByTagName("tr"),I,G=A.length;for(I=0;I<G;I++){var E=A[I];if(E.parentNode!=C&&E.parentNode.parentNode!=C)continue;var H=this.makeArray(E),F=this.addRow(H,D);F.id=E.id||E.getAttribute("id");F.getXml=E.getAttribute("getXml");B.push(F)}return B},addTableText:function(E,A){var B=E.stripScripts(),G=wx_get_rows_from_text(E),C=this.getTBody(),F,D=G.length;for(F=0;F<D;F++)C.insertBefore(G[F],A?A:null);E.evalScripts.bind(E).defer();return G},updateTrContent:function(E,F,B){var C=html.stripScripts(),A=wx_get_rows_from_text(html)[0].cells,H,G=E.cells.length;for(H=0;H<G;H++){var D=E.cells[H];WxUtils.replaceChildren(D,A[H])}html.evalScripts.bind(html).defer();return rows},_getTBodyFromXmlNode:function(A){var C=A.childNodes,E,D=C.length;for(E=0;E<D;E++){var B=C[E];if(C[E].tagName&&C[E].tagName.toLowerCase()=="tbody")return B}return null},_getRowsFromXmlNode:function(B){var D=this._getTBodyFromXmlNode(B);if(D)B=D;var A=[],F,E=B.childNodes.length;for(F=0;F<E;F++){var C=B.childNodes[F];if(C.tagName=="tr")A.add(C)}return A},addColumn:function(D,C){var G=this.getTBody().rows,F,B=G.length;if(C.length<B)B=C.length;for(F=0;F<B;F++){var E=G[F],A=E.insertCell(D);A.innerHTML=C[F]}},addSeqNum:function(D,C){if(typeof(D)=="undefined")D=0;if(typeof(C)=="undefined")C=1;var A=this.getRowCount(),B=[];for(var E=0;E<=A;E++)B.push((E+C)+"");this.addColumn(D,B)},updateSeqNum:function(D,C){if(typeof(D)=="undefined")D=0;if(typeof(C)=="undefined")C=1;var A=this.getRowCount(),B=[];for(var E=0;E<=A;E++)B.push((E+C)+"");this.updateColumn(D,B)},updateColumn:function(D,C){var G=this.getTBody().rows,F,B=G.length;if(C.length<B)B=C.length;for(F=0;F<B;F++){var E=G[F],A=E.cells[D];A.innerHTML=C[F]}},initRowClass:function(){this.eachRow(function(B,C){B.className=C%2==0?"rowEven":"rowOdd";try{Event.stopObserving(B,"mouseover",this.onMouseOverFunc);Event.stopObserving(B,"mouseout",this.onMouseOutFunc)}catch(A){}Event.observe(B,"mouseover",this.onMouseOverFunc);Event.observe(B,"mouseout",this.onMouseOutFunc)}.bind(this))},getTrFromEvent:function(C){var B=C||window.event,A=Event.findElement(B,"tr");while(A&&this.getRowIndex(A)<0)A=$PTag(A,"tr");return A},getTdFromEvent:function(C){var D=Event.findElement(C,"td");if(D.tagName!="TD")return null;var A=this.getElement(),B=this.getTBody();while(D&&D.parentNode.parentNode!=B&&D.parentNode.parentNode!=A.tHead)D=$PTag(D,"td");if(D&&D.parentNode.parentNode==A.tHead)return null;return D},getTdByIdx:function(B,A){if(B<this.getRowCount()&&A<this.getColCount())return td=this.getRows()[B].cells[A];return null},onMouseOver:function(B){var A=this.getTrFromEvent(B);if(A)A.className="rowOver"},onMouseOut:function(B){var A=this.getTrFromEvent(B);if(A)A.className=this.getRowIndex(A)%2==0?"rowEven":"rowOdd"},getFirstEmptyRow:function(){var A=false;this.eachRow(function(B){if(B.getAttribute("_er")=="true")A=true;return A});return A},addEmptyRows:function(A,B){var F,D=B,E=this.makeEmptyList(A);for(F=0;F<D;F++){var C=this.addRow(E);C.setAttribute("_er","true")}},isEmptyRow:function(A){return A.getAttribute("_er")=="true"},getFieldNames:function(){var A=this.getElement(),B=A.tHead?A.tHead.rows:null;if(!B||B.length<=0)return null;return $A(B[0].cells).map(function(A){return A.getAttribute("fieldName")})},getHeaderCount:function(){var A=this.getElement(),B=A.tHead?A.tHead.rows:null;if(B&&B.length>0)return B[B.length-1].cells.length;return 0},getColCount:function(){var B=this.options.colCount;if(!B)B=this.getHeaderCount();if(B<=0){var A=this.getTBody(),C=A?A.rows:null;if(row&&C.length>0)B=C[0].cells.length}return B},fix:function(){if(!this.options.no_seq){var A=this.options.seqBase;this.updateSeqNum(this.options.no_check?0:1,A)}this.initRowClass()},enhance:function(){if(this.options.minRows){var A=this.options.minRows-this.getRowCount();if(A>0)this.addEmptyRows(this.getColCount(),A)}this.fix()},eachRow:function(A){var D=this.getRows(),C,B=D.length;for(C=0;C<B;C++)if(A(D[C],C))break},eachCell:function(B){var G=this.getRows(),F,C=G.length;for(F=0;F<C;F++){var A=G[F].cells,E,D=A.length;for(E=0;E<D;E++)if(B(A[E],F,E))return}},_getRowModification:function(J,B,H){var A={},F=0,E=$Tag("input",J),K,G=E.length;for(K=0;K<G;K++){var C=E[K];if(!C.name||C.name==B)continue;if(C.value!=C.defaultValue){A[C.name]=C.value;F++}}if(B){var I=$Name(B,J)[0];if(I&&!A[B])A[B]=I.value}if(H){K,G=H.length;for(K=0;K<G;K++){var D=$Name(H[K],J)[0];if(D)A[H[K]]=D.value}}return F>0?A:null},getModification:function(B,E){var A=[],H=this.getRows(),G,D=H.length;for(G=0;G<D;G++){var F=H[G],C=this._getRowModification(F,B,E);if(C)A.push(C)}return A},toJson:function(){var A=[];this.eachRow(function(C){var B=new js.Ajax().addContainer(C).getParamsAsJson();A.push(B)});return A},validate:function(A){_container_onsync(this.elmId);var E=this.getRows(),D,B=E.length;for(D=0;D<B;D++){if(A){var C=container_to_json(E[D],true);if(!C||!C[A])continue}if(!_validate_container(E[D]))return false}return true},toJsonString:function(){return JSON.stringify(this.toJson())},getRowObj:function(B){var A=this.getTBody();if(B.tagName=="TR"&&B.parentNode==A)return B;var C=$PTag(B,"tr");while(C&&C.parentNode!=A)C=$PTag(C,"tr");return C},getRowField:function(A,B){var A=this.getRowObj(A);return $Name(B,A)[0]},updateRowField:function(B,D,A){var C=this.getRowObj(B);if(!C)return;var E=this.getRowField(C,D);if(!E)return;js.$F(E).setWxValue(A)},moveToFront:function(A,I,K){I=I||[];var J=false,F=this.getColCount(),D=this.getRowCount(),B=this.curRowIdx,L=this.curColIdx,C=false,H;while(!H){J=false;if(A=="v"){this.curRowIdx++;if(D<=this.curRowIdx){this.curRowIdx=0;this.curColIdx++;while(!J){if(F<=this.curColIdx)if(K)this.curColIdx=this.fldColBeginIdx;else{this.curRowIdx=B;this.curColIdx=L;J=true;C=true;break}var G=this.getFieldNames()[this.curColIdx-this.fldColBeginIdx];if(!I.include(G)){J=true;break}this.curColIdx++}}}else while(!J){this.curColIdx++;if(F<=this.curColIdx){this.curColIdx=this.fldColBeginIdx;this.curRowIdx++;if(D<=this.curRowIdx)if(K)this.curRowIdx=0;else{this.curRowIdx=B;this.curColIdx=L;J=true;C=true;break}}G=this.getFieldNames()[this.curColIdx-this.fldColBeginIdx];if(!I.include(G))J=true}var E=this.getTdByIdx(this.curRowIdx,this.curColIdx);H=this.getInputInTd(E);if(C)break}this.focusOn(H)},moveToBack:function(A,I,K){I=I||[];var J=false,F=this.getColCount(),D=this.getRowCount(),B=this.curRowIdx,L=this.curColIdx,C=false,H;while(!H){J=false;if(A=="v"){this.curRowIdx--;if(this.curRowIdx<0){this.curRowIdx=D-1;this.curColIdx--;while(!J){if(this.curColIdx<this.fldColBeginIdx)if(K)this.curColIdx=F-1;else{this.curRowIdx=B;this.curColIdx=L;J=true;C=true;break}var G=this.getFieldNames()[this.curColIdx-this.fldColBeginIdx];if(!I.include(G)){J=true;break}this.curColIdx--}}}else while(!J){this.curColIdx--;if(this.curColIdx<this.fldColBeginIdx){this.curColIdx=F-1;this.curRowIdx--;if(this.curRowIdx<0)if(K)this.curRowIdx=D-1;else{this.curRowIdx=B;this.curColIdx=L;J=true;C=true;break}}G=this.getFieldNames()[this.curColIdx-this.fldColBeginIdx];if(!I.include(G))J=true}var E=this.getTdByIdx(this.curRowIdx,this.curColIdx);H=this.getInputInTd(E);if(C)break}this.focusOn(H)},moveToNextTd:function(A,B,C,D){if(this.getRowCount()==0)return 0;if(B==true)this.moveToFront(A,C,D);else this.moveToBack(A,C,D)},focusOn:function(A){if(A)if(A.type=="textarea"||A.type=="text"){A.focus();A.select()}},getInputInTd:function(E){if(!E)return null;var C=$Tag("input",E),A,B,G=0;for(G=0;G<C.length;G++){B=C[G];if(B.type=="text"){A=B;return A}}var F=$Tag("textarea",E);if(F.length>0)return F[0];var D=$Tag("select",E);if(D.length>0)return D[0];return null},_getIdx:function(C){if(!C)return[0,0];var B=this.getRowCount(),D=this.getColCount(),A=C.parentNode,E=this.getRowIndex(A);if(E>=0)for(j=0;j<D;j++)if(this.getRows()[E].cells[j]==C)return[E,j];return[0,0]},setCurIdx:function(B){var A=this._getIdx(B);this.curRowIdx=A[0];this.curColIdx=A[1]},onTableKeyPress:function(A){A=A||window.event;var C=this.getTdFromEvent(A);this.setCurIdx(C);var B=Event.element(A);if(B.type=="select-one"||B.type=="select-multiple")return;if(B.type=="textarea"&&(A.keyCode==Event.KEY_UP||A.keyCode==Event.KEY_DOWN))return;switch(A.keyCode){case Event.KEY_UP:this.moveToNextTd("v",false,this.options.excludeCols,this.options.autoRoot);return false;case Event.KEY_DOWN:this.moveToNextTd("v",true,this.options.excludeCols,this.options.autoRoot);return false;case Event.KEY_LEFT:break;case Event.KEY_RIGHT:break;default:break}},onTableClick:function(A){A=A||window.event;var B=this.getTdFromEvent(A);this.setCurIdx(B)}});function check_value_change(B){B=B?B:window.event;var A=Event.element(B);A.style.backgroundColor=A.value==A.defaultValue?"white":"yellow"}function observe_value_change(A){Event.stopObserving(A,"blur",check_value_change);Event.observe(A,"blur",check_value_change)}js.Selection=Class.create();Object.extend(js.Selection.prototype,{initialize:function(A){this.selected=[];this.selectedMark={}},clear:function(){this.selected=[];this.selectedMark={}},add:function(A){if(this.selectedMark[A.value])return;this.selected.push({value:A.value,text:A.text});this.selectedMark[A.value]=true},remove:function(A){this.selected=this.selected.findAll(function(B){return B.value!=A});delete this.selectedMark[A]},initSelected:function(B){this.selected=B||[];this.selectedMark={};for(var C=0;C<this.selected.length;C++){var A=this.selected[C];this.selectedMark[A.value]=true}}});js.AjaxTable=Class.create();Object.extend(Object.extend(Object.extend(js.AjaxTable.prototype,AjaxBo),js.Table.prototype),{initialize:function(A){this.options={loadingPane:new js.Dialog("ajax-submit-pane"),addPage:"/std/entity/pop_add.jsp?",updatePage:"/std/entity/pop_update.jsp?",viewPage:"/std/entity/pop_view.jsp?",pageView:"/std/entity/view.jsp?",pageUpdate:"/std/entity/update.jsp?",pageAddRow:"/std/entity/list_row.jsp?tplPart=add",pageUpdateRow:"/std/entity/list_row.jsp?tplPart=update",pageViewRow:"/std/entity/list_row.jsp?tplPart=view",pageAjaxRows:"/std/entity/ajax_rows.jsp?",pageView:"/std/entity/view.jsp?",pageUpdate:"/std/entity/update.jsp?",jsObj:"jsTable",queryEvent:"Query",persistParams:[],eventArgs:null,pkField:"id"};this.options=Object.extend(this.options,A);this.options.listId="table_"+this.options.ctlId;this.elmId=this.options.listId;this.delIds=[];this.selection=new js.Selection();this.onClickHandler=this.onClick.bindAsEventListener(this);Event.observe(this.options.ctlId,"click",this.onClickHandler)},enhanceFor:function(A){A=A||[];if(A.include("treeTable"))this.treeTable=new js.TreeTable(this.getTbl(),{fetchFunc:this.fetchRows.bind(this)})},toggleTreeTable:function(A){var B=this.getPersistParam("$treeTable");if(B){this.removePersistParams("$treeTable");this.requery();js.$(A).setWxValue(js.string("std.tree_table"))}else{this.replacePersistParam("$treeTable",true);this.requery();js.$(A).setWxValue(js.string("std.std_table"))}},fetchRows:function(B,C){B=Object.extend({objectEvent:"ViewDetail"},B||{});var A=B.objectName;delete B.objectName;this.buildAjax(A,B).setUrl(js.CONTEXT_PATH+this.options.pageAjaxRows).request(C)},getChks:function(){return $Name(this.options.pkField,this.elmId)},getTbl:function(){return $(this.options.listId).getElementsByTagName("table")[0]},initAfterFetch:function(){if(this.treeTable)this.treeTable.tbl=this.getTbl();this.initForSelected()},initForSelected:function(){if(!this.options.keepSelected)return;this.markSelected()},getSelected:function(){return this.selection.selected},clearSelected:function(){if(!confirm(js.string("std.confirm_clear_selected")))return;js.select.removeAll("selectedItems");this.selection.clear();js.form.clearSelected(this.options.pkField,this.elmId)},showSelected:function(){js.select.setValueAndTextObjects("selectedItems",this.selection.selected);window.selectedWin.show(true)},hideSelected:function(){window.selectedWin.hide()},removeSelectedInWin:function(){js.select.removeSelected("selectedItems");var A=js.select.getAllValueAndTextObjects("selectedItems");this.selection.initSelected(A);this.markSelected()},onClick:function(B){var A=Event.element(B);if(this.options.keepSelected&&A.type=="checkbox")if(A.getAttribute("t")=="p")this.onChkChange(A);else if(A.getAttribute("t")=="t"){var D=this.getChks(),E,C=D.length;for(E=0;E<C;E++)this.onChkChange(D[E])}},markSelected:function(){js.form.markSelected(this.selection.selected,this.options.pkField,this.options.listId,true);this.selection.initSelected(this.selection.selected)},onChkChange:function(B){var A=B.value;if(!A)return;if(B.checked)this.selection.add({value:A,text:B.getAttribute("showName")});else this.selection.remove(A)},setContainerWidth:function(A){var B=$(this.elmId),C=B.parentNode;if(C.getAttribute("wxType")=="wx_table_container")C.style.width=A},buildAjax:function(A,C){var E=this.options.persistParams;if(this.options.params){var B=$H(this.options.params).keys();E=E.findAll(function(A){return!B.include(A[0])})}var D=new js.Ajax(this.options).setContextPath(js.CONTEXT_PATH).setObjectName(A||this.options.objectName).addParamMap(this.options.params).addParamMap(C).addParamAsList(E);if(!this.getPersistParam("$jsObj"))D.addParam("$jsObj",this.options.jsObj);return D},getEventArgsAsList:function(B){var D=B;if(!D)return;var A=[],C=D.split("&");C.each(function(B){if(!B)return;var C=B.split("=");A.push(C)});return A},mergePersistArgs:function(B){if(!this.options.persistParams||!B)return;var C=this.getPersistEventArgs(B),E=[];C.each(function(A){E.push(A[0])});this.removePersistParams(E);C.each(function(A){this.options.persistParams.push(A)}.bind(this));var D=this.getNormalEventArgs(B),A="&"+D.map(function(A){return encodeURIComponent(A[0])+"="+encodeURIComponent(A[1])}).join("&");this.options.eventArgs=A},getPersistEventArgs:function(A){var C=this._toArgPairs(A),B=[];C.each(function(A){var C=A[0];if(C.charAt("0")=="$")B.push(A)});return B},getNormalEventArgs:function(A){var C=this._toArgPairs(A),B=[];C.each(function(A){var C=A[0];if(C.charAt("0")!="$")B.push(A)});return B},_toArgPairs:function(B){var C=B||[],A=Object.prototype.toString.apply(C);if(A=="[object String]")C=this.getEventArgsAsList(C);else if(A=="[object Object]"){C=[];for(var D in B)C.push([D,B[D]])}return C},getPersistParam:function(B){var A=this.options.persistParams.find(function(A){if(A[0]==B)return true});if(A)return A[1];return null},allowSwitchPage:function(){return true},_updateList:function(A){if(!this.allowSwitchPage())return;this.buildAjax().setUrl(this.options.url).addParam("objectEvent",A).updateContent(this.options.listId)},_updateDetail:function(A){this.buildAjax().setUrl(this.options.url).addParam("objectEvent",A).updateContent(this.options.detailId)},buildUrl:function(B,F,D){var E=this._toArgPairs(F),G={};E.each(function(B,A){G[B]=A});var A=this.options.persistParams.map(function(A){if(G[A[0]])return null;return encodeURIComponent(A[0])+"="+encodeURIComponent(A[1])}).compact().join("&"),H=js.CONTEXT_PATH+this.options[B]+"&objectName="+encodeURIComponent(D||this.options.objectName)+"&"+A+"&UTF8Request=true",C=this.getNormalEventArgs(E);if(C.length>0)H+="&"+C.map(function(A){return encodeURIComponent(A[0])+"="+encodeURIComponent(A[1])}).join("&");return H},popAddPage:function(){var A=this.buildUrl("addPage")+"&objectEvent=PreAdd";js.win.dialog(A,[this.requeryAfterAdd.bind(this,false)])},popViewPage:function(C,A){if(this.options.viewType=="fullscreen")this.popFullViewDlg(A);else{var B=this.buildUrl("viewPage")+"&objectEvent=ViewDetail&"+C+"="+A;js.win.dialog(B)}},popUpdatePage:function(C,A){if(this.options.viewType=="fullscreen")this.popFullUpdateDlg(A);else{var B=this.buildUrl("updatePage")+"&objectEvent=PreUpdate&"+C+"="+A;js.win.dialog(B,[this.requeryAfterChange.bind(this,true)])}},popFullUpdateDlg:function(C,B){var A={objectEvent:"PreUpdate"};A[this.options.pkField]=C;var D=this.buildUrl("pageUpdate",B)+"&"+$H(A).toQueryString(),E={"url":D,onOk:this.requeryAfterChange.bind(this,true)};wx_fullscreen_dialog(E)},popFullViewDlg:function(C,B){var A={objectEvent:"ViewDetail"};A[this.options.pkField]=C;var D=this.buildUrl("pageView",B)+"&"+$H(A).toQueryString(),E={"url":D};wx_fullscreen_dialog(E)},submitQueryAll:function(A){js.form.resetForm(A);this.buildAjax().setUrl(this.options.url).addParam("objectEvent","Query").updateContent(this.options.listId)},submitQuery:function(A){var B=js.query.buildCondition(A);if(!B){alert(js.string("std.please_select_condition"));return}this.buildAjax().setUrl(this.options.url).addParam("objectEvent","Query").addParam("condition",B).updateContent(this.options.listId)},pageMoveFirst:function(){this._updateList("PageMoveFirst")},pageMoveTo:function(A){if(!this.allowSwitchPage())return;this.buildAjax().setUrl(this.options.url).addParam("objectEvent","PageMoveTo").addParam("moveToPage",A).updateContent(this.options.listId)},pageMoveToEnter:function(B,A){if(A.keyCode==13){this.pageMoveTo(B);Event.stop(A)}},pageChangeSizeEnter:function(B,A){if(A.keyCode==13){this.buildAjax().setUrl(this.options.url).addParam("objectEvent","PageSizeAdjust").addParam("pageSize",B).updateContent(this.options.listId);Event.stop(A)}},pageChangeSize:function(A){if(!this.allowSwitchPage())return false;this.buildAjax().setUrl(this.options.url).addParam("objectEvent","PageSizeAdjust").addParam("pageSize",A).updateContent(this.options.listId)},pageMoveNext:function(){this._updateList("PageMoveNext")},pageMovePrev:function(){this._updateList("PageMovePrev")},pageMoveLast:function(){this._updateList("PageMoveLast")},itemMoveFirst:function(){this._updateDetail("ItemMoveFirst")},itemMoveNext:function(){this._updateDetail("ItemMoveNext")},itemMovePrev:function(){this._updateDetail("ItemMovePrev")},itemMoveLast:function(){this._updateDetail("ItemMoveLast")},pageFilter:function(B,A){if(!this.allowSwitchPage())return;this.buildAjax().setUrl(this.options.url).addParam("objectEvent","PageFilter").addParam("filterField",B).addParam("filterValue",A).updateContent(this.options.listId)},scrollToList:function(){Element.scrollTo(this.options.listId)},pageReorder:function(B,A){if(!this.allowSwitchPage())return;this.buildAjax().setUrl(this.options.url).addParam("objectEvent","PageReorder").addParam("orderField",B).addParam("orderValue",A).updateContent(this.options.listId)},removeOne:function(B,A){if(!confirm(js.string("std.confirm_remove")))return;this.buildAjax().addParam("objectEvent","Remove").addParam(B,A).callRemote(this.requery.bind(this,true))},removeMany:function(B,A){if(!A||A.length<=0)return;if(!confirm(js.string("std.confirm_remove")))return;this.buildAjax().addParam("objectEvent","Remove").addParamList(B,A).callRemote(this.requery.bind(this,true))},getSelectedPkValues:function(){var A=this.options.pkField||"id";return js.form.getSelectedValues(A,this.options.listId)},getSelectedIdsAndShowNames:function(){return js.form.getSelectedIdsAndShowNames(this.options.pkField||"id",this.options.listId)},removeManyRows:function(){var B=this.options.pkField||"id",A=js.form.getSelectedValues(B,this.options.listId);if(!A||A.length<=0){alert(js.string("std.no_selected"));return}if(!confirm(js.string("std.confirm_remove")))return;this.buildAjax().addParam("objectEvent","Remove").addParamList(B,A).callRemote(this.requery.bind(this,true))},initGrid:function(){this.buildAjax().setUrl(js.CONTEXT_PATH+"/_tpl/ui/table/ajax_grid_view.jsp?").addParam("$ajaxTableId",this.options.ctlId).addParam("objectEvent","Query").addParam("_init_",true).updateContent(this.options.ctlId)},initTable:function(){this.mergePersistArgs(this.options.eventArgs);this.buildAjax().setUrl(js.CONTEXT_PATH+"/_tpl/ui/table/ajax_table_view.jsp?tplPart=query,table&$ajaxTableId="+this.options.ctlId).addParam("objectEvent","Query").addParam("_init_",true).updateContent("query_"+this.options.ctlId,this.options.listId)},requeryAfterChange:function(A){if(this.options.needRefreshPageAfterChange){stdPage.refreshPage();return}return this.requery(A)},requeryAfterAdd:function(A){if(this.options.needRefreshPageAfterAdd){stdPage.refreshPage();return}return this.requery(A)},requery:function(A){setTimeout(function(){this.buildAjax().setUrl(this.options.url).addParam("objectEvent",this.options.queryEvent||"Query").addParam("noRequery",A?true:false).updateContent(this.options.listId)}.bind(this),10)},getPkValue:function(B){B=this.toRowObj(B);var A=$Name(this.options.pkField,B)[0];return A?$F(A):null},removeTableRow:function(A){var B=$PTag(A,"tr"),C=this.getPkValue(B);if(C)this.delIds.push(C);this.removeRowObj(B)},addTableRow:function(){this.buildAjax().setUrl(js.CONTEXT_PATH+this.options.pageAddRow).addParam("objectEvent","PreAdd").request(function(A){var B=$F(this.options.addTemplateId).formatN(A),C=this.getFirstEmptyRow();this.addTrText(B,C);if(C)this.removeRowObj(C);this.fix()}.bind(this))},preUpdateTableRow:function(A,C){var B=$PTag(A,"tr");if(!C)return;this.buildAjax().setUrl(js.CONTEXT_PATH+this.options.pageUpdateRow).setObjectEvent("PreUpdate").addParam(this.options.pkField,C).request(function(A){var D=$F(this.options.updateTemplateId).formatN(A,C);if(this.getRowIndex(B)>=0){this.addTrText(D);this.removeRowObj(B);this.fix()}}.bind(this))},submitUpdateTableRow:function(A){var B=$PTag(A,"tr"),C=this.getPkValue(B);if(!C)return;this.buildAjax().setUrl(js.CONTEXT_PATH+this.options.pageViewRow).setObjectEvent("Update").addParam(this.options.pkField,C).request(function(A){var D=$F(this.options.viewTemplateId).formatN(A,C);if(this.getRowIndex(B)>=0){this.addTrText(D);this.removeRowObj(B);this.fix()}}.bind(this))},submitCUD:function(){this.buildAjax().setObjectEvent("BatchCUD").addContainer(this.options.listId).addParamAsList("DEL_ID",this.delIds).callRemote(this.callbackForCUD.bind(this))},callbackForCUD:function(){alert(js.string("std.save_ok"))},popUpdateRow:function(A,B){var C=this.buildUrl("updatePage")+"&objectEvent=PreUpdate&_layoutName="+B+"&id="+A;js.win.dialog(C,[this.requery.bind(this,true)])}});var TableOps={getCols:function(A){var B=$(A).getElementsByTagName("colgroup")[0];if(!B)return null;return B.getElementsByTagName("col")},syncCol:function(B){B=$(B);var C=this.getCols(B),F,E=C.length,D=0;for(F=0;F<E;F++){var A=parseInt(C[F].style.width,10)||0;if(C[F].offsetWidth>A){C[F].style.width=C[F].offsetWidth+"px";A=C[F].offsetWidth}D+=A}B.style.width=D+"px"},getTableWidth:function(A){return $(A).offsetWidth},setColWidth:function(A,C,D){var B=this.getCols(A)[C];B.style.width=D+"px";if(B.offsetWidth>D)B.style.width=B.offsetWidth+"px"},setTableWidth:function(A,B){A=$(A);if(A.parentNode&&Element.hasClassName(A.parentNode,"container"))A.parentNode.width=B+"px";A.style.width=B+"px"},setTableHeight:function(A,B){A=$(A);A.style.height=B+"px";if(A.parentNode&&Element.hasClassName(A.parentNode,"container"))A.parentNode.height=B+"px"},syncWidth:function(G,B){G=$(G);B=$(B);G.style.width=G.offsetWidth+"px";B.style.width=G.offsetWidth+"px";var E=this.getCols(G),C=this.getCols(B),J,H=E.length,F=0;for(J=0;J<H;J++){if(!parseInt(E[J].style.width,10))E[J].style.width=E[J].offsetWidth+"px";var A=parseInt(E[J].style.width,10);C[J].style.width=A+"px";var D=C[J].offsetWidth,I=E[J].offsetWidth;if(D!=A||I!=A){A=Math.max(D,I);E[J].style.width=A+"px";C[J].style.width=A+"px"}F+=A}B.style.width=(F+1)+"px";G.style.width=(F+1)+"px"},getColsWidth:function(B){var C=this.getCols(B),A=[],E,D=C.length;for(E=0;E<D;E++)A.push(C[E].offsetWidth);return A},syncHeight:function(B,A){B=$(B);A=$(A);if(B.tHead){var C=B.tHead.rows,D=A.tHead.rows;this._syncRowsHeight(C,D)}if(B.tBodies&&B.tBodies[0]){C=B.tBodies[0].rows,D=A.tBodies[0].rows;this._syncRowsHeight(C,D)}if(B.tFoot)this._syncRowsHeight(C,D)},_syncRowsHeight:function(B,C){var E,A=B.length;for(E=0;E<A;E++){var D=Math.max(B[E].offsetHeight,C[E].offsetHeight);B[E].style.height=D+"px";C[E].style.height=D+"px"}},getFirstRowSize:function(A){try{return A.tBodies[0].rows[0].cells.length}catch(B){return-1}},getLastBodyColWidth:function(A){var B=this.getFirstRowSize(A);if(B<0)return-1;return A.tBodies[0].rows[0].cells[B-1].offsetWidth},initColIdx:function(B){B=$(B);if(B.getAttribute("colIdxInited")=="true")return;var H=B.tHead.rows,I=[],A=H[0].cells,J,D=A.length,K=0;for(J=0;J<D;J++){var C=A[J],F,E=C.colSpan;for(F=0;F<E;F++)I.push({rowSpan:C.rowSpan-1,pos:F,colSpan:C.colSpan,colIdx:K});C.setAttribute("colIdx",K);K+=C.colSpan}for(J=1;J<H.length;J++){var A=H[J].cells,F,G=0;for(F=0;F<I.length;F++){C=A[G];if(I[F].rowSpan>0)I[F].rowSpan--;else{C.setAttribute("colIdx",F);for(var L=0;L<C.colSpan;L++)I[F+L]={rowSpan:C.rowSpan-1,pos:L,colSpan:C.colSpan,colIdx:F};G++}}}B.setAttribute("colIdxInited","true")},getColByColIdx:function(E,C){C=parseInt(C);var A=E.cells,F,D=A.length;for(F=0;F<D;F++){var B=parseInt(A[F].getAttribute("colIdx"));if(B>C){if(F==0)return null;if(parseInt(A[F-1].getAttribute("colIdx"))+A[F-1].colSpan-1<C)return null;return A[F-1]}}return A[F-1]},getHeadColsByColIdx:function(D,C){this.initColIdx(D);D=$(D);var G=D.tHead.rows,F,E=G.length,A=[];for(F=0;F<E;F++){var B=this.getColByColIdx(G[F],C);if(B)A.push(B)}return A},getAlignedLeafHeaderCols:function(A){var C=$(A).tHead,B=this.getRowInfo(C.rows[0].cells);for(var E=0;E<(C.rows.length-1);E++)B=this.getNextRowInfo(C,E,B);var D=[];for(E=0;E<B.length;E++)D[E]=B[E].cell;return D},getLeafHeaderCols:function(A){var C=$(A).tHead,B=this.getRowInfo(C.rows[0].cells);for(var F=0;F<(C.rows.length-1);F++)B=this.getNextRowInfo(C,F,B);var E=[];for(var F=0,D=0;F<B.length;){E[D]=B[F].cell;D++;F+=B[F].cell.colSpan}return E},getTableOptWidth:function(B){var D=0,E=this.getLeafHeaderCols(B);for(var F=0;F<E.length;F++){var A=parseInt(E[F].style.width,10),C=Math.max(E[F].offsetWidth,isNaN(A)?0:A);D=D+C}return D},adjustTableOptWidth:function(A){var B=$(A).offsetWidth,C=this.getTableOptWidth(A);if(C>B)$(A).style.width=C+"px"},getRowInfo:function(A){var E=[],B=A.length;for(var F=0,C=0;F<B;F++)for(var D=0;D<A[F].colSpan;D++){E[C]={cell:A[F],rowSpan:A[F].rowSpan};C++}return E},getNextRowInfo:function(D,A,B){var C=[],G=this.getRowInfo(D.rows[A+1].cells);for(var H=0,E=0,F=0;H<(B.length);H++)if((B[H].rowSpan)>1){C[E]={cell:B[H].cell,rowSpan:B[H].rowSpan-1};E++}else if(B[H].rowSpan==1){C[E]=G[F];E++;F++}return C},lockHeader:function(E,B,C,A,F){E=$(E);B=B||400;C=C||"100%";A=A||E.tHead.rows.length;F=F||0;var D=document.createElement("div");D.style.cssText="height:"+B+"px;width:"+C+"px; overflow: auto;";E.parentNode.replaceChild(D,E);D.appendChild(E);D.onscroll=function(){var I=E.rows;for(var H=0;H<A;H++){var B=I[H].style;B.top=D.scrollTop;B.position="relative";B.backgroundColor="white";B.zIndex=H<F?30:20}for(H=0;H<I.length;H++){var G=I[H].cells;for(var C=0;C<F;C++){B=G[C].style;B.left=D.scrollLeft;B.position="relative";B.backgroundColor="white";B.zIndex=H<A?30:10}}}}},StdPagerAction=function(A){this.baseURL=A;this.allowSwitchPage=function(){return true},this.pageMoveFirst=function(){if(!this.allowSwitchPage())return false;window.location=this.baseURL+"&objectEvent=PageMoveFirst"};this.pageMoveLast=function(){if(!this.allowSwitchPage())return false;window.location=this.baseURL+"&objectEvent=PageMoveLast"};this.pageMovePrev=function(){if(!this.allowSwitchPage())return false;window.location=this.baseURL+"&objectEvent=PageMovePrev"};this.pageMoveNext=function(){if(!this.allowSwitchPage())return false;window.location=this.baseURL+"&objectEvent=PageMoveNext"};this.pageMoveTo=function(A){if(!this.allowSwitchPage())return false;window.location=this.baseURL+"&objectEvent=PageMoveTo&moveToPage="+A};this.pageMoveToEnter=function(B,A){if(A.keyCode==13){this.pageMoveTo(B);Event.stop(A)}};this.pageChangeSize=function(A,B){if(parseInt(A)>parseInt(B)){alert("\u6bcf\u9875\u663e\u793a\u6570\u636e\u884c\u6570\u6700\u5927\u4e3a"+B+",\u8bf7\u91cd\u65b0\u8bbe\u7f6e\uff01");return}if(!this.allowSwitchPage())return false;window.location=this.baseURL+"&objectEvent=PageMoveTo&pageSize="+A};this.pageChangeSizeEnter=function(B,A,C){if(A.keyCode==13){this.pageChangeSize(B,C);Event.stop(A)}}};function _ajax_toggle(B){var A=$("ajax-fail-pane");if(A.parentNode!=document.body){document.body.appendChild(A);A.style.left="0px";A.style.top="0px"}var C=B.getAttribute("status");if(C=="hide"){C="show";Element.show("ajax-fail-pane")}else{C="hide";Element.hide("ajax-fail-pane")}B.setAttribute("status",C)}function _ajax_err(){$("ajax-fail-img").src=js.CONTEXT_PATH+"/_tpl/ui/ajax/info_err.png"}function _ajax_hide(){Element.hide("ajax-fail-pane");$("ajax-fail-img").setAttribute("status","hide")}function ajax_clear_err(){if($("ajax-fail-img")){$("ajax-fail-img").src=js.CONTEXT_PATH+"/_tpl/ui/ajax/info.png";$("ajax-fail-pane").innerHTML=js.string("ajax.no_error");_ajax_hide()}}function _std_table_toggle_select(C,B){if(!B||B.length<=0)return;var A=$PTag(C,"table"),E=$Name(B,A),F,D=E.length;for(F=0;F<D;F++){if(E[F].disabled)continue;E[F].checked=C.checked}}var JsTable=Class.create();Object.extend(JsTable.prototype,{initialize:function(A,B){this.options={lockHeader:true,fixedColCount:0,toggleCols:false,useChk:false};this.options=Object.extend(this.options,B||{});this.dom=$(A);this.leafCols=TableOps.getLeafHeaderCols(A);this.colGroup=this.mkColGroup(this.dom,this.leafCols.length);this.enhance()},showSide:function(){if(this.options.fixedColCount){this.hdr.style.display="";this.side.style.display="";this.side.style.top=(-this.container.scrollTop+Prototype.Browser.IE?"-2":"-1")+"px"}},getElm:function(){return this.dom},setContainerWidth:function(A){if(this.container)this.container.style.width=A},enhance:function(){if(this.options.toggleCols){this.dom.style.tableLayout="fixed";this.enhanceToggleCols()}var A=Prototype.Browser.WebKit;if(A||this.dom.tBodies[0].rows.length<300){if(this.options.lockHeader)this.enhanceLockHeader();if(this.options.autoShow)this.showSide()}},mk:function(C,E,A,D){var B;if(A&&D&&A.nodeType==1&&A.getAttribute("wxType")==D)B=A;else B=document.createElement(C);for(var F in E||{})B.style[F]=E[F];if(D)B.setAttribute("wxType",D);return B},mkColGroup:function(A,D){var E=A.getElementsByTagName("colgroup")[0];if(!E){E=document.createElement("colgroup");var B=this.leafCols,F;for(F=0;F<D;F++){var C=document.createElement("col");C.span=B[F].colSpan;if(B[F].colSpan<=1)C.style.width=B[F].offsetWidth+"px";C.setAttribute("colIdx",F);E.appendChild(C)}A.insertBefore(E,A.tHead)}return $A(E.getElementsByTagName("col"))},syncWidth:function(){if(!this.hdr)return;this.hdr.style.width=(this.dom.offsetWidth-0)+"px";var C,B=this.leafCols.length;for(C=0;C<B;C++)if(this.leafCols[C].colSpan<=1)this.hdrColGroup[C].style.width=this.leafCols[C].offsetWidth+"px";var A=0;for(C=0;C<this.options.fixedColCount;C++){A+=this.leafCols[C].offsetWidth;if(this.leafCols[C].colSpan<=1)this.sideColGroup[C].style.width=this.leafCols[C].offsetWidth+"px"}this.side.style.width=(A+1)+"px"},syncHeight:function(){if(this.options.fixedColCount<=0)return;var D=this.dom.tBodies[0].rows,A=this.side.tBodies[0].rows,C,B=D.length;for(C=0;C<B;C++)A[C].style.height=D[C].offsetHeight+"px"},toggleCols:function(D,B){var A=B.value==">",E,C=Math.min(D,this.colGroup.length);for(E=this.options.fixedColCount;E<C;E++){this.colGroup[E].visibility="collapse";if(this.hdrColGroup)this.hdrColGroup[E].visibility="collapse"}this.syncWidth();B.value=A?"<":">"},onChkChange:function(C,B){B=B||window.event;var A=Event.element(B);C.checked=A.checked},fillSide:function(){var J=this.leafCols[this.options.fixedColCount].offsetLeft,H=this.side,D=this.dom.tBodies[0].rows,E,A=D.length,F=document.createElement("tbody");for(E=0;E<A;E++){var L=document.createElement("tr"),C=0;if(this.options.useChk){var B=document.createElement("td"),K=document.createElement("input");K.type="checkbox";var G=D[E].cells[0].getElementsByTagName("input")[0];K.checked=G.checked;if(G.disabled)K.disabled=true;B.appendChild(K);L.appendChild(B);Event.observe(K,"change",this.onChkChange.bind(this,G));Event.observe(G,"change",this.onChkChange.bind(this,K));C=1}for(C;C<D[E].cells.length;C++){var I=D[E].cells[C];if(I.offsetLeft<J)L.appendChild(I.cloneNode(true))}L.style.height=D[E].offsetHeight+"px";F.appendChild(L)}H.appendChild(F)},toggleAllChk:function(F,D){var B=Event.element(D?D:window.event),A=B.checked,C=this.side.tBodies[0].rows,H,E=C.length;for(H=0;H<E;H++){B=C[H].cells[0].getElementsByTagName("input")[0];if(!B.disabled)B.checked=A}if(F){var G=this.dom.tBodies[0].rows,H,E=G.length;for(H=0;H<E;H++){B=G[H].cells[0].getElementsByTagName("input")[0];if(!B.disabled)B.checked=A}}},enhanceLockHeader:function(){var A=this.dom,G=this.options.height||"90%",I=this.mk("div",{position:"relative",height:G,overflow:"auto"},A.parentNode,"wx_table_container"),B=this.mk("div",{position:"absolute",weight:"0px",height:"0px"},I.firstChild,"wx_ex_holder"),C=this.mk("table",{position:"relative",tableLayout:"fixed",display:"none",zIndex:100});C.className=A.className;if(Prototype.Browser.IE)Element.setStyle(C,{marginLeft:0,marginTop:0,marginRight:0,marginBottom:0,paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0});var H=this.mk("table",{position:"relative",tableLayout:"fixed",display:"none",zIndex:90});H.className=A.className+" sui_table1_side rpt_table_side";var E=A.tHead.cloneNode(true);C.appendChild(E);if(this.options.useChk){var L=A.tHead.getElementsByTagName("input")[0],F=E.getElementsByTagName("input")[0];Event.observe(F,"change",this.toggleAllChk.bind(this,true));Event.observe(L,"change",this.toggleAllChk.bind(this,false))}if(A.caption)C.appendChild(A.caption.cloneNode(true));this.container=I;this.hdr=C;this.hdrColGroup=this.mkColGroup(C,this.leafCols.length);this.side=H;this.sideColGroup=this.mkColGroup(H,this.options.fixedColCount);this.fillSide();this.sideOffsetTop=this.side.offsetTop;B.appendChild(C);B.appendChild(H);var D=A.parentNode;if(D!=I){I.appendChild(B);D.insertBefore(I,A);I.appendChild(A)}else I.insertBefore(B,A);this.syncWidth();var K=this,J=function(B){K.syncWidth();C.style.display="";C.style.top=I.scrollTop+"px";if(K.options.fixedColCount>0){H.style.display="";var A=(-I.scrollTop+Prototype.Browser.IE?"-2":"-1");H.style.top=A+"px";H.style.left=I.scrollLeft+"px"}};Event.observe(I,"scroll",this.guard_f(J,500));Event.observe(window,"resize",this.guard_f(J.bind(true),100))},guard_f:function(A,C){var B=this;return function(){if(!B.timer)B.timer=setTimeout(function(){B.timer=null;A()},C)}},enhanceToggleCols:function(){var C,B=this.leafCols.length;for(C=this.options.fixedColCount+1;C<B;C++){var A=document.createElement("input");A.type="button";A.value="<";Event.observe(A,"click",this.toggleCols.bind(this,C,A));this.leafCols[C].appendChild(document.createElement("br"));this.leafCols[C].appendChild(A)}}});js;if(!js)js={};if(!js.model)js.model={};js.model.Element=Class.create();Object.extend(js.model.Element.prototype,{initialize:function(){this.listenerMap={}},addListener:function(C,B){var A=this.listenerMap[C];if(!A){A=[];this.listenerMap[C]=A}A[A.length]=B},removeListener:function(C,B){var A=this.listenerMap[C];if(!A)return;A=A.reject(function(A){return B==A});this.listenerMap[C]=A},fireEvent:function(C,B){var A=this.listenerMap[C];if(A)A.each(function(A){A.onEvent(this,B)})}});js.model.Select=new Class.create();Object.extend(Object.extend(js.model.Select.prototype,js.model.Element.prototype),{initialize:function(A){js.model.Element.prototype.initialize.bind(this)();this.options=A||{};this.items=[]},wrap:function(A){return A},getOptions:function(){return this.items},getPosById:function(A){var B=this.getOptions(),D,C=B.length;for(D=0;D<C;D++)if(B[D].getId()==A)return D;return-1},removeById:function(A){this.items=this.items.reject(function(B){return B.getId()==A})},removeByPos:function(A){if(pos>=this.items.length)return;this.items=this.items.slice(0,A).concat(this.items.slice(A+1))},add:function(B,C){if(C>=0&&C<this.items.length){var A=this.items.slice(0,C);A.push(this.cloneOption(B));this.items=A.concat(this.items.slice(C+1))}else this.items.push(this.cloneOption(B))},addVT:function(A){return this.add(this.newOption(A.value,A.text,A.selected))},getVTList:function(){var A=[];this.getOptions().each(function(B){A.push({value:B.getValue(),text:B.getText()})});return A},setVTList:function(C){var B=this.getSelectedIds();this.removeAll();var A=false;(C||[]).each(function(D){var C=B.include(D.value),E=this.newOption(D.value,D.text,C);A=A||C;this.add(E)}.bind(this));if(!A)this.selectFirst()},addOption:function(A,C,B,D){this.add(this.newOption(A,C,B),D)},cloneOption:function(A){var A=new js.model.SelectOption({id:A.getId(),value:A.getValue(),selected:A.isSelected()});return A},newOption:function(A,C,B){return new js.model.SelectOption({id:A,value:C,selected:B})},selectFirst:function(){var A=this.getFirstOption();if(A)A.setSelected(true)},getFirstOption:function(){var A=this.getOptions();if(A.length<=0)return null;return A[0]},getLastOption:function(){var A=this.getOptions();if(A.length<=0)return null;return A[A.length-1]},contains:function(A){if(!A)return false;return this.containsId(A.getId())},containsId:function(A){return this.getById(A)?true:false},containsValue:function(A){return this.getOptionByValue(A)?true:false},getById:function(A){return this.getOptions().find(function(B){return B.getId()==A})},getByValue:function(A){return this.getOptions().find(function(B){return B.getValue()==A})},getAllIds:function(){return this.getOptions().map(function(A){return A.getId()})},getAllValues:function(){return this.getOptions().map(function(A){return A.getValue()})},getFirstSelected:function(){return this.getOptions().find(function(A){return A.isSelected()})},getSelected:function(){return this.getOptions().findAll(function(A){return A.isSelected()})},getNotSelected:function(){return this.getOptions().collect(function(A){return!A.isSelected()})},getSelectedId:function(){var A=this.getSelectedIds();return A.length<=0?null:A[0]},getSelectedValue:function(){var A=this.getSelectedValues();return A.length<=0?null:A[0]},getSelectedIds:function(){var A=[];this.getOptions().each(function(B){if(B.isSelected())A.push(B.getId())});return A},getSelectedValues:function(){var A=[];this.getOptions().each(function(B){if(B.isSelected())A.push(B.getValue())});return A},getAllIdsAndValues:function(){return[this.getAllIds(),this.getAllValues()]},getSelectedIdsAndValues:function(){return[this.getSelectedIds(),this.getSelectedValues()]},remove:function(A){return this.removeById(A.getId())},removeAll:function(){var A=$A(this.getOptions());A.each(function(A){this.remove(A)}.bind(this));return this},removeSelected:function(){return this.getSelected().each(function(A){this.remove(A)}.bind(this))},removeContained:function(B){var A=$A(this.wrap(B).getOptions());A.each(function(A){this.remove(A)}.bind(this));return this},removeNotContained:function(B){B=this.wrap(B);var A=$A(this.getOptions());A.each(function(A){if(!B.contains(A))this.remove(A)}.bind(this));return this},addNotContained:function(B){B=this.wrap(B);var A=B.getOptions();A.each(function(A){if(!this.contains(A))this.add(A)}.bind(this))},selectOrAdd:function(A,B){if(typeof(B)=="undefined")B=A;var C=this.getById(A);if(C)C.setSelected(A);else this.addOption(A,B,true)},moveAllTo:function(A){var C=this;A=this.wrap(A);var B=$A(C.getOptions());B.each(function(B){A.add(B);C.remove(B)})},moveSelectedTo:function(A){A=this.wrap(A);var B=$A(this.getOptions());B.each(function(B){if(B.isSelected()){A.add(B);this.remove(B)}}.bind(this))},moveSelectedUp:function(){var A=$A(this.getOptions()),E,B=A.length;if(B<=1)return;for(E=0;E<B;E++)if(!A[E].isSelected())break;for(;E<B;E++){var C=A[E];if(C.isSelected()){var D=A[E-1];A[E-1]=C;A[E]=D;this.removeByPos(E-1);this.add(D,E)}}},moveSelectedDown:function(){var A=$A(this.getOptions()),E,C=A.length;if(C<=1)return;for(E=C-1;E>=0;E--)if(!A[E].isSelected())break;for(;E>=0;E--){var D=A[E];if(D.isSelected()){var B=A[E+1];this.removeByPos(E+1);this.add(B,E);A[E+1]=D;A[E]=B}}},markSelectedById:function(A){return this.getOptions().find(function(B){if(B.getId()==A){B.setSelected(true);return true}else return false})},markSelectedByValue:function(B){var A=false;this.getOptions().each(function(C){if(C.getValue()==B){C.setSelected(true);A=true}})},selectAll:function(){this.getOptions().each(function(A){A.setSelected(true)})},unselectAll:function(){this.getOptions().each(function(A){A.setSelected(false)})},selectById:function(A){return this.select([A])},select:function(A){if(!A)return;this.getOptions().each(function(B){if(A.include(B.getId()))B.setSelected(true)})},unselect:function(A){this.getOptions().each(function(B){if(A.include(B.getId()))B.setSelected(false)})},sort:function(A){},toData:function(){var A=[];this.getOptions().each(function(B){A.push([B.getId(),B.getValue(),B.isSelected()])});return A},fromData:function(B,A){if(typeof(A)!="undefined"&&A.constructor!=Array)A=[A];this.removeAll();if(this.options.firstText)this.add(this.newOption("",this.options.firstText));if(!B)return;B.each(function(A){this.add(this.newOption(A[0],A[1],false))}.bind(this));this.select(A)},buildDataFromText:function(B){if(!B)return[];var A=[],E=js.xml.loadXML(B).documentElement,H,G=E.childNodes.length;for(H=0;H<G;H++){var D=E.childNodes[H],F=D.nodeName;if(F!="option")continue;var C=D.getAttribute("selected");A.push([D.getAttribute("value"),D.firstChild.nodeValue,C])}return A},fromText:function(A,B){return this.fromData(this.buildDataFromText(A),B)},dynamicLoad:function(C,A,B){B=B||function(){};this.removeAll();this.add(this.newOption("",js.string("ajax.loading")));new js.Ajax().setUrl(C).setOnSuccess(function(B){this.fromText(B.responseText,A)}.bind(this)).request(B)},connectWith:function(C,D,B){var A=function(){try{if(!B&&!$F(C)){this.removeAll();if(this.options.firstText)this.add(this.newOption("",this.options.firstText))}else this.dynamicLoad(this.options.requestUrl+$F(C),this.options.selectedId)}catch(A){alert(A.message)}}.bind(this);new Form.Element.EventObserver(C,A);if(D)A()}});js.model.SelectOption=Class.create();Object.extend(js.model.SelectOption.prototype,{initialize:function(A){this.options=A},getId:function(){return this.options.id},getValue:function(){return this.options.value},isSelected:function(){return this.options.selected},setSelected:function(A){this.options.selected=A}});if(!js.model.html)js.model.html={};js.model.html.Select=Class.create();Object.extend(Object.extend(js.model.html.Select.prototype,js.model.Select.prototype),{initialize:function(A,B){this.elm=$(A);js.model.Select.prototype.initialize.bind(this)(B)},wrap:function(A,B){if(A.tagName=="SELECT")return new js.model.html.Select(A,B);else return A},removeById:function(A){this.removeByPos(this.getPosById(A))},removeByIdList:function(A){A.each(this.removeById.bind(this))},removeByPos:function(A){if(A<0||A>=this.elm.options.length)return;this.elm.options[A]=null},add:function(B,C){var A=new Option(B.getValue(),B.getId());A.selected=B.isSelected()?true:false;if(C>=0)this.elm.options.add(A,C);else this.elm.options.add(A)},getOptions:function(){var A=[],B=this.elm.options,D,C=B.length;for(D=0;D<C;D++)A.push(new js.model.html.SelectOption(B[D]));return A}});js.model.html.SelectOption=Class.create();Object.extend(js.model.html.SelectOption.prototype,{initialize:function(A){this.opt=A},getId:function(){return this.opt.value},getValue:function(){return this.opt.text},isSelected:function(){return this.opt.selected},setSelected:function(A){this.opt.selected=A}});js.model.html.TableSelect=Class.create();Object.extend(Object.extend(js.model.html.TableSelect.prototype,js.model.Select.prototype),{initialize:function(A,B){this.elm=$(A);js.model.Select.prototype.initialize.bind(this)(B);this.table=new js.Table(this.elm,B)},wrap:function(A,B){if(A.tagName=="TABLE")return new js.model.html.TableSelect(A,B);else return A},removeById:function(A){this.removeByPos(this.getPosById(A))},removeByPos:function(A){if(A<0||A>=this.table.getRowCount())return;this.table.removeRow(A)},add:function(B,C){var A="<input type=\"checkbox\" name=\"$name\" value=\"$id\" showName=\"$value\" />";A=A.split("$name").join(this.options.checkName||"");A=A.split("$id").join(B.getId());A=A.split("$value").join(B.getValue());this.table.addRow([A,B.getValue()])},getOptions:function(){var A=[],B=this.table.getRows(),E,C=B.length;for(E=0;E<C;E++){var D=new js.model.html.TableSelectOption(B[E],this.options);if(!D.getCheckElm())break;A.push(D)}return A}});js.model.html.TableSelectOption=Class.create();Object.extend(js.model.html.TableSelectOption.prototype,{initialize:function(A,B){this.elm=A;this.options=B},getCheckElm:function(){return _elm_get_check_child(this.elm)},getId:function(){return this.getCheckElm().value},getValue:function(){return this.getCheckElm().getAttribute("showName")},isSelected:function(){return this.getCheckElm().checked},setSelected:function(A){this.getCheckElm().checked=A}});js.model.makeSelect=function(A,C){var B=A.tagName.toLowerCase();if(B=="select")return new js.model.html.Select(A,C);if(B=="table")return new js.model.html.TableSelect(A,C);throw new Exception("js.CAN_err_not_select::"+B)};function _elm_get_check_child(C){if(!C||!C.childNodes)return null;var E,D=C.childNodes.length;for(E=0;E<D;E++){var A=C.childNodes[E];if(A.nodeType!=1)continue;if(A.tagName=="INPUT"&&A.type=="checkbox")return A;var B=_elm_get_check_child(A);if(B)return B}return null}js;if(!js)js=new Object;js.Url=Class.create();Object.extend(js.Url.prototype,{initialize:function(A){this.options={params:[],path:"?"};this.options=Object.extend(this.options,A||{})},path:function(A){this.options.path=A},append:function(A,B){this.options.params.push([A,B]);return this},remove:function(A){this.options.params=this.options.params.findAll(function(B){return B[0]!=A});return this},replace:function(B,A){this.remove(B);this.append(B,A);return this},objectName:function(A){return this.replace("objectName",A)},objectEvent:function(A){return this.replace("objectEvent",A)},getParam:function(B){var A;this.options.params.each(function(C){if(C[0]==B){A=C[1];throw $break}});return A},_getQueryString:function(){return this.options.params.map(function(A){return encodeURIComponent(A[0])+"="+encodeURIComponent(A[1])}).join("&")},getString:function(){return this.options.path+"&UTF8Request=true&"+this._getQueryString()}});function wx_lock_table(X,O){function J(A){return document.getElementById(A)}function N(D,C,F,A,E){var B;if(A&&A.getAttribute("wxType")==E)B=A;else{B=document.createElement(D);if(E)B.setAttribute("wxType",E)}B.style.cssText=C||"";B.className=F||"";return B}function a(A){function D(A){var E=[],B=A.length;for(var F=0,C=0;F<B;F++)for(var D=0;D<A[F].colSpan;D++){E[C]={cell:A[F],rowSpan:A[F].rowSpan};C++}return E}function B(E,A,B){var C=[],H=D(E.rows[A+1].cells);for(var I=0,F=0,G=0;I<(B.length);I++)if((B[I].rowSpan)>1){C[F]={cell:B[I].cell,rowSpan:B[I].rowSpan-1};F++}else if(B[I].rowSpan==1){C[F]=H[G];F++;G++}return C}var E=$(A).tHead,C=D(E.rows[0].cells);for(var G=0;G<(E.rows.length-1);G++)C=B(E,G,C);var F=[];for(G=0;G<C.length;G++)F[G]=C[G].cell;return F}function T(I,K,H){var J,D=K.length;for(J=0;J<D;J++){var B=K[J],C=N("tr",B.style.cssText,B.className),G,F=B.cells.length;for(G=0;G<F;G++){var A=B.cells[G],E=A.cloneNode(true);if(A.offsetLeft<H-2){E.style.width=(A.offsetWidth-1)+"px";C.appendChild(E)}}C.style.height=B.offsetHeight+"px";I.appendChild(C)}}function e(A,F){var E=N("table",A.style.cssText,A.className+" wx_fix_header");E.style.width=(A.offsetWidth)+"px";E.style.height=(A.tHead.offsetHeight)+"px";E.cellSpacing=A.cellSpacing;E.cellPadding=A.cellPadding;if(A.caption)E.appendChild(A.caption.cloneNode(true));var B=A.getElementsByTagName("colgroup")[0];if(B){var D=B.cloneNode(true);E.appendChild(D)}var H=A.tHead.rows,C=N("thead"),G=F||A.tHead.offsetWidth+10;T(C,H,G);E.appendChild(C);E.style.tableLayout="fixed";return E}function K(A,M){var I=A.tBodies[0].rows,L=N("table",A.style.cssText,A.className+"  sui_table1_side");L.style.width=M+"px";L.style.height=(A.tBodies[0].offsetHeight)+"px";L.cellSpacing=A.cellSpacing;L.cellPadding=A.cellPadding;var G=A.getElementsByTagName("colgroup")[0];if(G){var O=document.createElement("colgroup"),B=G.getElementsByTagName("col"),J,F=B.length;for(J=0;J<F;J++)if(B[J].offsetLeft<M-2){var C=B[J].cloneNode(true);C.style.width=B[J].offsetWidth+"px";O.appendChild(C)}L.appendChild(O)}var K=N("tbody");T(K,I,M);L.appendChild(K);var H=L.getElementsByTagName("input"),J,F=H.length;for(J=0;J<F;J++){var E=H[J],D=document.createElement("input");D.type=E.type;D.value=E.value;D.setAttribute("showName",E.getAttribute("showName"));E.parentNode.replaceChild(D,E)}L.style.tableLayout="fixed";return L}function C(A){A.cellSpacing=0;A.cellPadding=0;A.style.width=(A.offsetWidth)+"px";A.style.height=(A.offsetHeight)+"px";if(A.style.tableLayout!="fixed"){var J=[],M=[],B=A.getElementsByTagName("colgroup")[0];if(B){B=B.getElementsByTagName("col");var I,D=B.length;for(I=0;I<D;I++){var C=B[I];J.push(C.offsetWidth+"px")}}I,D=A.tHead.rows.length;for(I=0;I<D;I++){var H=A.tHead.rows[I],N={};N.height=H.offsetHeight+"px";N.cells=[];var G,E=H.cells.length;for(G=0;G<E;G++){var F=H.cells[G];N.cells.push((F.offsetWidth-1)+"px")}M.push(N)}var L=A.parentNode,K=A.nextSibling;L.removeChild(A);B=A.getElementsByTagName("colgroup")[0];if(B){B=B.getElementsByTagName("col");I,D=B.length;for(I=0;I<D;I++){C=B[I];C.style.width=J[I]}}I,D=A.tHead.rows.length;for(I=0;I<D;I++){H=A.tHead.rows[I];H.style.height=M[I].height;G,E=H.cells.length;for(G=0;G<E;G++){F=H.cells[G];F.style.width=M[I].cells[G]}}A.style.tableLayout="fixed";L.insertBefore(A,K)}}var P=J(X);if(!P)return;C(P);var Z=O.width||"100%",Y=O.height||"100%",F=O.fixC||0,d=O.useChk,R=P.tHead,c=P.tBodies[0],A=a(P)[F].offsetLeft,W;if(Prototype.Browser.IE)W=N("div","overflow:auto;","wx_lock_container");else W=N("div","position:relative;overflow:auto;","wx_lock_container");setTimeout(function(){W.style.top="0px"},10);var V=N("div","overflow:auto;width:100%;height:100%",P.parentNode.className,P.parentNode,"wx_table_container");if(V!=P.parentNode){P.parentNode.replaceChild(V,P);V.appendChild(P)}else{while(V.firstChild)V.removeChild(V.firstChild);V.appendChild(P)}var D=N("div","position:absolute;overflow:hidden;display:none;z-index:100"),E=e(P);D.setAttribute("autoSerialize","false");D.appendChild(E);var H,L,G;if(F>0){H=N("div","position:absolute;overflow:hidden;display:none;z-index:99");L=K(P,A);H.setAttribute("autoSerialize","false");H.appendChild(L);var U=N("div","height:30px");H.appendChild(U);H.style.top=(R.offsetHeight+(P.caption?P.caption.offsetHeight:0))+"px";G=N("div","position:absolute;overflow:hidden;display:none;z-index:101");var b=e(P,A);G.setAttribute("autoSerialize","false");G.appendChild(b);W.appendChild(G)}W.appendChild(D);if(H)W.appendChild(H);V.parentNode.replaceChild(W,V);W.appendChild(V);if(O.autoShink){var B,I=P.offsetHeight+50;if(Y){try{B=parseInt(Y)}catch(Q){B=undefined}}else B=999999;if(I<B)W.style.height=(I)+"px";else W.style.height=Y}else W.style.height=Y;W.style.width=Z;Event.observe(V,"scroll",function(){if(F>0)if(V.scrollLeft==0){H.style.display="none";G.style.display="none"}else{H.style.display="";H.style.height=(V.clientHeight-R.offsetHeight)+"px";H.style.width=A+"px";H.scrollTop=V.scrollTop;G.style.display="";G.style.width=A+"px"}if(V.scrollTop==0)D.style.display="none";else{D.style.display="";D.style.width=V.clientWidth+"px";D.scrollLeft=V.scrollLeft}});function M(B){var E=B.parentNode.getAttribute("fieldName");if(!E)return;var G=B.checked,F=W.getElementsByTagName("input"),H,D=F.length;for(H=0;H<D;H++){var A=F[H];if(A.disabled||A.tagName!="INPUT"||A.type!="checkbox")continue;var C=(((F[H].parentNode||{}).parentNode||{}).parentNode||{}).parentNode;if(C&&(C==P||C==L))A.checked=G}}function S(D){D=D||window.event;var B=D.target||D.srcElement;if(B.tagName=="INPUT"&&B.type=="checkbox"){var F=B.parentNode,C=B.parentNode.parentNode;if(F.tagName=="TD"&&F==C.cells[0]){var A;if(C.parentNode==P.tHead){A=E.tHead.rows[C.rowIndex].cells[0].getElementsByTagName("input")[0];if(!A.disabled)A.checked=B.checked;M(A)}else if(C.parentNode==E.tHead||C.parentNode==b.tHead){A=P.tHead.rows[C.rowIndex].cells[0].getElementsByTagName("input")[0];if(!A.disabled)A.checked=B.checked;M(A)}else if(C.parentNode==P.tBodies[0]){A=L.tBodies[0].rows[C.rowIndex-P.tHead.rows.length].getElementsByTagName("input")[0];if(!A.disabled)A.checked=B.checked}else if(C.parentNode==L.tBodies[0]){A=P.tBodies[0].rows[C.rowIndex].getElementsByTagName("input")[0];if(!A.disabled)A.checked=B.checked}}}}if(d)Event.observe(W,"click",S)}function fieldset_toggle(fldsetId,divId,pic){var elm=$(fldsetId),path=js.CONTEXT_PATH+"/_tpl/ui/fieldset/";Element.visible(divId)?$(pic).src=path+"/_img/close.gif":$(pic).src=path+"/_img/unfold.gif";var loadFunc=elm.getAttribute("loadFunc");if(loadFunc){elm.removeAttribute("loadFunc");var f=eval(loadFunc);if(typeof f=="function")f(divId)}Element.toggle(divId)}var DetailExpander=Class.create();Object.extend(DetailExpander.prototype,{initialize:function(){this.switcher=new DetailExpander.Switcher(this)},onExpandFunc:function(A,B){Element.update(A,"<div style=\"height:100px;background:red;\" arg>"+B+",please override here </div>")},clickListener:function(A,B){this.switcher.toggle(A,B)},regItem:function(B,C,A){if(C)this.onExpandFunc=C;Event.observe(B,"click",this.clickListener.bind(this,B,A))},getTrByImg:function(A){A=$(A);return A.parentNode.parentNode},getTr:function(A){var B=$(A);return this.getTrByImg(B)}});DetailExpander.Switcher=Class.create();Object.extend(DetailExpander.Switcher.prototype,{initialize:function(A){this.options={img_plus:"/_tpl/app/expand_detail/_img/plus.png",img_minus:"/_tpl/app/expand_detail/_img/minus.png",prefix:"dtl_item_"};this.cache={};this.expander=A},toggle:function(A,E){var G=this.makeDtlElm(A),F=G.getAttribute("expanded");if(typeof(F)=="undefined")G.setAttribute("expanded",true);else{var D=$(A);if(F=="true"){G.setAttribute("expanded","false");Element.hide(G);D.src=js.CONTEXT_PATH+this.options.img_plus}else{G.setAttribute("expanded","true");Element.show(G);D.src=js.CONTEXT_PATH+this.options.img_minus;var C=G.getAttribute("loaded");if(!C){var B=G.childNodes[0];this.expander.onExpandFunc(B,E);G.setAttribute("loaded","true")}}}},makeDtlElm:function(B){var D=this.options.prefix+B,H=this.cache[D];if(!H){var E=this.expander.getTr(B),G=0;for(var I=0;I<E.childNodes.length;I++){var F=E.childNodes[I];if(F.getAttribute)G+=parseInt(F.getAttribute("colspan")||"1")}H=document.createElement("tr");E.setAttribute("id",D);var C=document.createElement("td");C.setAttribute("colSpan",G,0);H.appendChild(C);var A=E.parentNode;A.insertBefore(H,E.nextSibling);this.cache[D]=H}return H}});window.jazz_detail_expander=new DetailExpander();js;if(!js)js={};js.TreeTable=Class.create();Object.extend(js.TreeTable.prototype,{initialize:function(A,B){this.options={foldedImg:js.CONTEXT_PATH+"/_tpl/app/expand_detail/_img/plus.png",expandedImg:js.CONTEXT_PATH+"/_tpl/app/expand_detail/_img/minus.png"};this.tbl=$(A);this.options=Object.extend(this.options,B||{})},getSubTrs:function(A){return $(A).retrieve("sub")},setSubTrs:function(B,A){$(B).store("sub",A)},getTrByImg:function(A){return $PDataTr(A)},getTrSeq:function(A){return A.cells[1].innerHTML},_expandRow:function(tr,img){var status=img.getAttribute("st");if(status){var sub=this.getSubTrs(tr);if(sub){var i,n=sub.length;for(i=0;i<n;i++){Element.show(sub[i]);if(sub[i].getAttribute("expanded"))this._expandRow(sub[i],img)}}return}var args=img.getAttribute("p");args=eval("("+args+")");args=args||{};var seq=this.getTrSeq(tr);if(seq)args._seq=seq;img.setAttribute("st","loading");this.fetchChildren(args,this.onRecvData.bind(this,tr,img,args))},toggleRow:function(C){var A=this.getTrByImg(C),B=A.getAttribute("expanded");if(B){C.src=this.options.foldedImg;A.removeAttribute("expanded");this._hideRow(A)}else{C.src=this.options.expandedImg;A.setAttribute("expanded",true);this._expandRow(A,C)}},_hideRow:function(B){var A=this.getSubTrs(B);if(!A)return;var D,C=A.length;for(D=0;D<C;D++){Element.hide(A[D]);this._hideRow(A[D])}},fetchChildren:function(B,D){var A=this.options.fetchFunc;if(!A){var C=window.stdPage;A=C.fetchRows.bind(C)}A(B,D)},onRecvData:function(C,E,D,B){E.setAttribute("st","loaded");var A=new js.Table(this.tbl,{markDataTr:true}).addTableText(B,C.nextSibling);this.setSubTrs(C,A)}});function t_b_t(E){var D=$PDataTr(E);if(!D)return;var B=D.parentNode.parentNode,A=B.id,F=window["js_tree_table_"+A];if(!F){var C=window[B.parentNode.getAttribute("ajaxObj")];if(C)F=C.treeTable}if(F)F.toggleRow(E)}(function(js,window){js.Class=window.Class;js.AjaxBase=function(){};js.AjaxBase.prototype=window.AjaxBo;js.byName=window.$Name;js.byTag=window.$Tag;js.byField=window.$Field;js.byId=window.$;js.show=window.Element.show;js.hide=window.Element.hide;js.toArray=window.$A;js.getPostData=window.js.$F;js.addClassName=Element.addClassName;js.removeClassName=Element.removeClassName;js.hasClassName=Element.hasClassName;js.getEventTarget=Event.element;if(!js.form)js.form={};js.form.table_serialize=table_serialize;js.isArray=function(A){return Object.prototype.toString.call(A)=="[object Array]"};js.observe=window.Event.observe.bind(Event);var indexOf=[].indexOf,slice=[].slice;js.stopEvent=window.Event.stop.bind(Event);js.toggle=window.Element.toggle;js.proxy=function(E,C){var D,A,B;A=slice.call(arguments,2);B=function(){return E.apply(C,A.concat(slice.call(arguments)))};return B};js.defer=function(C,B){var A=slice.call(arguments,2);return window.setTimeout(function(){return C.apply(B,A)},10)};js.forDefer=function(B,A){return function(){return js.defer(B,A)}};js.extend=function(B,A){for(var C in A)B[C]=A[C];return B};js.each=function(C,D){if(!C)return;var E,B=C.length;for(E=0;E<B;E++){var A=C[E];if(D.call(A,E,A)==true)break}};js.map=function(E,F){if(!E)return[];var A=[],G,C=E.length;for(G=0;G<C;G++){var B=E[G],D=F(B,G);A.push(D)}return A};js.inArray=function(A,C){if(indexOf)return indexOf.call(C,A);var D,B=C.length;for(D=0;D<B;D++)if(C[D]==A)return D;return-1};if(!js.table)js.table={};function get_all_chk(A){var D=A.tBodies[0],C=js.byClass("wx-row-chk",D,"input"),E,B=C.length;for(E=0;E<B;E++)if(C[E].parentNode.parentNode.parentNode!=D){C.splice(E,1);E--;B--}return C}function sync_all_chk(C,A){A=A||C.parentNode.parentNode.parentNode.parentNode;var B=get_all_chk(A),F,E=B.length,D=C.checked;for(F=0;F<E;F++){if(B[F].disabled)continue;B[F].checked=D}}js.table.syncAllChk=sync_all_chk;js.toggleFieldset=function(fldsetId){var elm=js.byId(fldsetId),divId="content_"+fldsetId,content=js.byId(divId),img=js.byId("img_"+fldsetId),path=js.CONTEXT_PATH+"/_tpl/ui/fieldset/";if(content.style.display=="none")img.src=path+"/_img/unfold.gif";else img.src=path+"/_img/close.gif";var loadFunc=elm.getAttribute("loadFunc");if(loadFunc){elm.removeAttribute("loadFunc");var f=eval(loadFunc);if(typeof f=="function")f(divId)}js.toggle(content)};js.togglePanel=function(B){B=js.byId(B);var A=js.byId("content_"+B.id);if(js.hasClassName(B,"folded")){js.removeClassName(B,"folded");js.show(A)}else{js.addClassName(B,"folded");js.hide(A)}};js.disableAutoClick=function(A){A=A||window.event;if(A.keyCode==13){var B=A.target||evt.srcElement;if(B.tagName!="TEXTAREA"&&B.tagName!="SELECT")if(A.preventDefault)A.preventDefault();else A.returnValue=false}};js.setButtonText=function(C,B){var A=js.byId("content_"+C);if(A)A.innerHTML=B};js.StdPagerAction=StdPagerAction})(window.js,window)


