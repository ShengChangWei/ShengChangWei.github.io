(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a9c8"],{bbf8:function(s,a,t){"use strict";t.r(a);var r=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},e=[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("h1",[s._v("手动实现深拷贝")]),t("h2",[s._v("一、浅拷贝和深拷贝的定义")]),t("ul",[t("li",[t("p",[s._v("浅拷贝： 创建一个新对象，这个对象有着原始对象属性值的一份精确拷贝。如果属性是基本类型，拷贝的就是基本类型的值，如果属性是引用类型，拷贝的就是内存地址 ，所以如果其中一个对象改变了这个地址，就会影响到另一个对象。")])]),t("li",[t("p",[s._v("深拷贝： 将一个对象从内存中完整的拷贝一份出来,从堆内存中开辟一个新的区域存放新对象,且修改新对象不会影响原对象")])])]),t("h2",[s._v("二、实现深拷贝")]),t("h3",[s._v("乞丐版")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".parse("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify());\n")])]),t("ul",[t("li",[s._v("缺陷： 这种写法非常简单，而且可以应对大部分的应用场景，但是它还是有很大缺陷的，比如拷贝其他引用类型、拷贝函数、循环引用等情况。")])]),t("h3",[s._v("基础版本")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("clone")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" target === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'object'")]),s._v(") {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" cloneTarget = {};\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" target) {\n            cloneTarget[key] = clone(target[key]);\n        }\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" cloneTarget;\n    } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" target;\n    }\n};\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 测试")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" target = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("field1")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("field2")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("field3")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'ConardLi'")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("field4")]),s._v(": {\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("child")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'child'")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("child2")]),s._v(": {\n            "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("child2")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'child2'")]),s._v("\n        }\n    }\n};\n")])]),t("p",[s._v("缺陷： 没有考虑数组")]),t("h3",[s._v("考虑数组")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("clone")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" target === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'object'")]),s._v(") {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" cloneTarget =  "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v(".isArray(target)? [] : {}\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" k "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" target) {\n            cloneTarget[k] = clone(target[k])\n        } \n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" cloneTarget;\n    } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" target;\n    }\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 测试")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" target = {\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("field1")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("field2")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("field3")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'ConardLi'")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("field4")]),s._v(": {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("child")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'child'")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("child2")]),s._v(": {\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("child2")]),s._v(": ["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v("]\n    }\n}\n};\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" res = clone(target);\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(res);\n")])]),t("p",[s._v("深拷贝到此已经很不错了，但还要考虑其他情况未完待续……")]),t("p",[s._v("学习参考：")]),t("p",[s._v("非常非常感谢："),t("a",{attrs:{href:"http://www.conardli.top/blog/article/JS%E8%BF%9B%E9%98%B6/%E5%A6%82%E4%BD%95%E5%86%99%E5%87%BA%E4%B8%80%E4%B8%AA%E6%83%8A%E8%89%B3%E9%9D%A2%E8%AF%95%E5%AE%98%E7%9A%84%E6%B7%B1%E6%8B%B7%E8%B4%9D.html"}},[s._v("如何写出一个惊艳面试官的深拷贝")])])])}],l=t("2877"),n={},p=Object(l["a"])(n,r,e,!1,null,null,null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d21a9c8.e86a9076.js.map